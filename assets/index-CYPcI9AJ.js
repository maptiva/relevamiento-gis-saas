const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-DRvpDTiE.js","assets/App-DQefK7LW.css"])))=>i.map(i=>d[i]);
function OP(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const NP="modulepreload",DP=function(e){return"/relevamiento-gis-saas/"+e},hg={},VP=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=h(n.map(f=>{if(f=DP(f),f in hg)return;hg[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":NP,m||(g.as="script"),g.crossOrigin="",g.href=f,l&&g.setAttribute("nonce",l),document.head.appendChild(g),m)return new Promise((E,T)=>{g.addEventListener("load",E),g.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xm(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ge={},Yo=[],Vi=()=>{},FP=()=>!1,Qu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jm=e=>e.startsWith("onUpdate:"),gn=Object.assign,tp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},GP=Object.prototype.hasOwnProperty,oe=(e,t)=>GP.call(e,t),Gt=Array.isArray,Qo=e=>Xu(e)==="[object Map]",U0=e=>Xu(e)==="[object Set]",jt=e=>typeof e=="function",Ve=e=>typeof e=="string",vs=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",z0=e=>(Pe(e)||jt(e))&&jt(e.then)&&jt(e.catch),B0=Object.prototype.toString,Xu=e=>B0.call(e),UP=e=>Xu(e).slice(8,-1),$0=e=>Xu(e)==="[object Object]",ep=e=>Ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ml=Xm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ju=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zP=/-(\w)/g,ai=Ju(e=>e.replace(zP,(t,n)=>n?n.toUpperCase():"")),BP=/\B([A-Z])/g,ys=Ju(e=>e.replace(BP,"-$1").toLowerCase()),tf=Ju(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zf=Ju(e=>e?`on${tf(e)}`:""),Qr=(e,t)=>!Object.is(e,t),Fh=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Dd=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Vd=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ug;const ef=()=>ug||(ug=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function np(e){if(Gt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Ve(i)?HP(i):np(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(Ve(e)||Pe(e))return e}const $P=/;(?![^(]*\))/g,jP=/:([^]+)/,qP=/\/\*[^]*?\*\//g;function HP(e){const t={};return e.replace(qP,"").split($P).forEach(n=>{if(n){const i=n.split(jP);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ec(e){let t="";if(Ve(e))t=e;else if(Gt(e))for(let n=0;n<e.length;n++){const i=Ec(e[n]);i&&(t+=i+" ")}else if(Pe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const WP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",KP=Xm(WP);function j0(e){return!!e||e===""}const q0=e=>!!(e&&e.__v_isRef===!0),Ce=e=>Ve(e)?e:e==null?"":Gt(e)||Pe(e)&&(e.toString===B0||!jt(e.toString))?q0(e)?Ce(e.value):JSON.stringify(e,H0,2):String(e),H0=(e,t)=>q0(t)?H0(e,t.value):Qo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],s)=>(n[Yf(i,s)+" =>"]=r,n),{})}:U0(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Yf(n))}:vs(t)?Yf(t):Pe(t)&&!Gt(t)&&!$0(t)?String(t):t,Yf=(e,t="")=>{var n;return vs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rn;class ZP{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rn,!t&&Rn&&(this.index=(Rn.scopes||(Rn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Rn;try{return Rn=this,t()}finally{Rn=n}}}on(){++this._on===1&&(this.prevScope=Rn,Rn=this)}off(){this._on>0&&--this._on===0&&(Rn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function YP(){return Rn}let ve;const Qf=new WeakSet;class W0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rn&&Rn.active&&Rn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qf.has(this)&&(Qf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Z0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fg(this),Y0(this);const t=ve,n=gi;ve=this,gi=!0;try{return this.fn()}finally{Q0(this),ve=t,gi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)sp(t);this.deps=this.depsTail=void 0,fg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fd(this)&&this.run()}get dirty(){return Fd(this)}}let K0=0,Al,Ll;function Z0(e,t=!1){if(e.flags|=8,t){e.next=Ll,Ll=e;return}e.next=Al,Al=e}function ip(){K0++}function rp(){if(--K0>0)return;if(Ll){let t=Ll;for(Ll=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Al;){let t=Al;for(Al=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Y0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Q0(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),sp(i),QP(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function Fd(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(X0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function X0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ql)||(e.globalVersion=Ql,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fd(e))))return;e.flags|=2;const t=e.dep,n=ve,i=gi;ve=e,gi=!0;try{Y0(e);const r=e.fn(e._value);(t.version===0||Qr(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{ve=n,gi=i,Q0(e),e.flags&=-3}}function sp(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)sp(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function QP(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let gi=!0;const J0=[];function gr(){J0.push(gi),gi=!1}function vr(){const e=J0.pop();gi=e===void 0?!0:e}function fg(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ve;ve=void 0;try{t()}finally{ve=n}}}let Ql=0;class XP{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class op{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ve||!gi||ve===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ve)n=this.activeLink=new XP(ve,this),ve.deps?(n.prevDep=ve.depsTail,ve.depsTail.nextDep=n,ve.depsTail=n):ve.deps=ve.depsTail=n,t1(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=ve.depsTail,n.nextDep=void 0,ve.depsTail.nextDep=n,ve.depsTail=n,ve.deps===n&&(ve.deps=i)}return n}trigger(t){this.version++,Ql++,this.notify(t)}notify(t){ip();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rp()}}}function t1(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)t1(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Gd=new WeakMap,js=Symbol(""),Ud=Symbol(""),Xl=Symbol("");function dn(e,t,n){if(gi&&ve){let i=Gd.get(e);i||Gd.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new op),r.map=i,r.key=n),r.track()}}function lr(e,t,n,i,r,s){const a=Gd.get(e);if(!a){Ql++;return}const l=h=>{h&&h.trigger()};if(ip(),t==="clear")a.forEach(l);else{const h=Gt(e),f=h&&ep(n);if(h&&n==="length"){const m=Number(i);a.forEach((p,g)=>{(g==="length"||g===Xl||!vs(g)&&g>=m)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Xl)),t){case"add":h?f&&l(a.get("length")):(l(a.get(js)),Qo(e)&&l(a.get(Ud)));break;case"delete":h||(l(a.get(js)),Qo(e)&&l(a.get(Ud)));break;case"set":Qo(e)&&l(a.get(js));break}}rp()}function Oo(e){const t=Vt(e);return t===e?t:(dn(t,"iterate",Xl),ri(e)?t:t.map(rn))}function nf(e){return dn(e=Vt(e),"iterate",Xl),e}const JP={__proto__:null,[Symbol.iterator](){return Xf(this,Symbol.iterator,rn)},concat(...e){return Oo(this).concat(...e.map(t=>Gt(t)?Oo(t):t))},entries(){return Xf(this,"entries",e=>(e[1]=rn(e[1]),e))},every(e,t){return sr(this,"every",e,t,void 0,arguments)},filter(e,t){return sr(this,"filter",e,t,n=>n.map(rn),arguments)},find(e,t){return sr(this,"find",e,t,rn,arguments)},findIndex(e,t){return sr(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return sr(this,"findLast",e,t,rn,arguments)},findLastIndex(e,t){return sr(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return sr(this,"forEach",e,t,void 0,arguments)},includes(...e){return Jf(this,"includes",e)},indexOf(...e){return Jf(this,"indexOf",e)},join(e){return Oo(this).join(e)},lastIndexOf(...e){return Jf(this,"lastIndexOf",e)},map(e,t){return sr(this,"map",e,t,void 0,arguments)},pop(){return ll(this,"pop")},push(...e){return ll(this,"push",e)},reduce(e,...t){return dg(this,"reduce",e,t)},reduceRight(e,...t){return dg(this,"reduceRight",e,t)},shift(){return ll(this,"shift")},some(e,t){return sr(this,"some",e,t,void 0,arguments)},splice(...e){return ll(this,"splice",e)},toReversed(){return Oo(this).toReversed()},toSorted(e){return Oo(this).toSorted(e)},toSpliced(...e){return Oo(this).toSpliced(...e)},unshift(...e){return ll(this,"unshift",e)},values(){return Xf(this,"values",rn)}};function Xf(e,t,n){const i=nf(e),r=i[t]();return i!==e&&!ri(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const tS=Array.prototype;function sr(e,t,n,i,r,s){const a=nf(e),l=a!==e&&!ri(e),h=a[t];if(h!==tS[t]){const p=h.apply(e,s);return l?rn(p):p}let f=n;a!==e&&(l?f=function(p,g){return n.call(this,rn(p),g,e)}:n.length>2&&(f=function(p,g){return n.call(this,p,g,e)}));const m=h.call(a,f,i);return l&&r?r(m):m}function dg(e,t,n,i){const r=nf(e);let s=n;return r!==e&&(ri(e)?n.length>3&&(s=function(a,l,h){return n.call(this,a,l,h,e)}):s=function(a,l,h){return n.call(this,a,rn(l),h,e)}),r[t](s,...i)}function Jf(e,t,n){const i=Vt(e);dn(i,"iterate",Xl);const r=i[t](...n);return(r===-1||r===!1)&&cp(n[0])?(n[0]=Vt(n[0]),i[t](...n)):r}function ll(e,t,n=[]){gr(),ip();const i=Vt(e)[t].apply(e,n);return rp(),vr(),i}const eS=Xm("__proto__,__v_isRef,__isVue"),e1=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vs));function nS(e){vs(e)||(e=String(e));const t=Vt(this);return dn(t,"has",e),t.hasOwnProperty(e)}class n1{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(r?s?fS:o1:s?s1:r1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=Gt(t);if(!r){let h;if(a&&(h=JP[n]))return h;if(n==="hasOwnProperty")return nS}const l=Reflect.get(t,n,_n(t)?t:i);return(vs(n)?e1.has(n):eS(n))||(r||dn(t,"get",n),s)?l:_n(l)?a&&ep(n)?l:l.value:Pe(l)?r?l1(l):rf(l):l}}class i1 extends n1{constructor(t=!1){super(!1,t)}set(t,n,i,r){let s=t[n];if(!this._isShallow){const h=rs(s);if(!ri(i)&&!rs(i)&&(s=Vt(s),i=Vt(i)),!Gt(t)&&_n(s)&&!_n(i))return h?!1:(s.value=i,!0)}const a=Gt(t)&&ep(n)?Number(n)<t.length:oe(t,n),l=Reflect.set(t,n,i,_n(t)?t:r);return t===Vt(r)&&(a?Qr(i,s)&&lr(t,"set",n,i):lr(t,"add",n,i)),l}deleteProperty(t,n){const i=oe(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&lr(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!vs(n)||!e1.has(n))&&dn(t,"has",n),i}ownKeys(t){return dn(t,"iterate",Gt(t)?"length":js),Reflect.ownKeys(t)}}class iS extends n1{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const rS=new i1,sS=new iS,oS=new i1(!0);const zd=e=>e,Eh=e=>Reflect.getPrototypeOf(e);function aS(e,t,n){return function(...i){const r=this.__v_raw,s=Vt(r),a=Qo(s),l=e==="entries"||e===Symbol.iterator&&a,h=e==="keys"&&a,f=r[e](...i),m=n?zd:t?lu:rn;return!t&&dn(s,"iterate",h?Ud:js),{next(){const{value:p,done:g}=f.next();return g?{value:p,done:g}:{value:l?[m(p[0]),m(p[1])]:m(p),done:g}},[Symbol.iterator](){return this}}}}function bh(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function lS(e,t){const n={get(r){const s=this.__v_raw,a=Vt(s),l=Vt(r);e||(Qr(r,l)&&dn(a,"get",r),dn(a,"get",l));const{has:h}=Eh(a),f=t?zd:e?lu:rn;if(h.call(a,r))return f(s.get(r));if(h.call(a,l))return f(s.get(l));s!==a&&s.get(r)},get size(){const r=this.__v_raw;return!e&&dn(Vt(r),"iterate",js),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,a=Vt(s),l=Vt(r);return e||(Qr(r,l)&&dn(a,"has",r),dn(a,"has",l)),r===l?s.has(r):s.has(r)||s.has(l)},forEach(r,s){const a=this,l=a.__v_raw,h=Vt(l),f=t?zd:e?lu:rn;return!e&&dn(h,"iterate",js),l.forEach((m,p)=>r.call(s,f(m),f(p),a))}};return gn(n,e?{add:bh("add"),set:bh("set"),delete:bh("delete"),clear:bh("clear")}:{add(r){!t&&!ri(r)&&!rs(r)&&(r=Vt(r));const s=Vt(this);return Eh(s).has.call(s,r)||(s.add(r),lr(s,"add",r,r)),this},set(r,s){!t&&!ri(s)&&!rs(s)&&(s=Vt(s));const a=Vt(this),{has:l,get:h}=Eh(a);let f=l.call(a,r);f||(r=Vt(r),f=l.call(a,r));const m=h.call(a,r);return a.set(r,s),f?Qr(s,m)&&lr(a,"set",r,s):lr(a,"add",r,s),this},delete(r){const s=Vt(this),{has:a,get:l}=Eh(s);let h=a.call(s,r);h||(r=Vt(r),h=a.call(s,r)),l&&l.call(s,r);const f=s.delete(r);return h&&lr(s,"delete",r,void 0),f},clear(){const r=Vt(this),s=r.size!==0,a=r.clear();return s&&lr(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=aS(r,e,t)}),n}function ap(e,t){const n=lS(e,t);return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(oe(n,r)&&r in i?n:i,r,s)}const cS={get:ap(!1,!1)},hS={get:ap(!1,!0)},uS={get:ap(!0,!1)};const r1=new WeakMap,s1=new WeakMap,o1=new WeakMap,fS=new WeakMap;function dS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mS(e){return e.__v_skip||!Object.isExtensible(e)?0:dS(UP(e))}function rf(e){return rs(e)?e:lp(e,!1,rS,cS,r1)}function a1(e){return lp(e,!1,oS,hS,s1)}function l1(e){return lp(e,!0,sS,uS,o1)}function lp(e,t,n,i,r){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=mS(e);if(s===0)return e;const a=r.get(e);if(a)return a;const l=new Proxy(e,s===2?i:n);return r.set(e,l),l}function Xo(e){return rs(e)?Xo(e.__v_raw):!!(e&&e.__v_isReactive)}function rs(e){return!!(e&&e.__v_isReadonly)}function ri(e){return!!(e&&e.__v_isShallow)}function cp(e){return e?!!e.__v_raw:!1}function Vt(e){const t=e&&e.__v_raw;return t?Vt(t):e}function Bd(e){return!oe(e,"__v_skip")&&Object.isExtensible(e)&&Dd(e,"__v_skip",!0),e}const rn=e=>Pe(e)?rf(e):e,lu=e=>Pe(e)?l1(e):e;function _n(e){return e?e.__v_isRef===!0:!1}function ue(e){return c1(e,!1)}function pS(e){return c1(e,!0)}function c1(e,t){return _n(e)?e:new _S(e,t)}class _S{constructor(t,n){this.dep=new op,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Vt(t),this._value=n?t:rn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||ri(t)||rs(t);t=i?t:Vt(t),Qr(t,n)&&(this._rawValue=t,this._value=i?t:rn(t),this.dep.trigger())}}function Jo(e){return _n(e)?e.value:e}const gS={get:(e,t,n)=>t==="__v_raw"?e:Jo(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return _n(r)&&!_n(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function h1(e){return Xo(e)?e:new Proxy(e,gS)}class vS{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new op(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ql-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return Z0(this,!0),!0}get value(){const t=this.dep.track();return X0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function yS(e,t,n=!1){let i,r;return jt(e)?i=e:(i=e.get,r=e.set),new vS(i,r,n)}const Th={},cu=new WeakMap;let Vs;function wS(e,t=!1,n=Vs){if(n){let i=cu.get(n);i||cu.set(n,i=[]),i.push(e)}}function ES(e,t,n=ge){const{immediate:i,deep:r,once:s,scheduler:a,augmentJob:l,call:h}=n,f=q=>r?q:ri(q)||r===!1||r===0?cr(q,1):cr(q);let m,p,g,E,T=!1,P=!1;if(_n(e)?(p=()=>e.value,T=ri(e)):Xo(e)?(p=()=>f(e),T=!0):Gt(e)?(P=!0,T=e.some(q=>Xo(q)||ri(q)),p=()=>e.map(q=>{if(_n(q))return q.value;if(Xo(q))return f(q);if(jt(q))return h?h(q,2):q()})):jt(e)?t?p=h?()=>h(e,2):e:p=()=>{if(g){gr();try{g()}finally{vr()}}const q=Vs;Vs=m;try{return h?h(e,3,[E]):e(E)}finally{Vs=q}}:p=Vi,t&&r){const q=p,J=r===!0?1/0:r;p=()=>cr(q(),J)}const x=YP(),O=()=>{m.stop(),x&&x.active&&tp(x.effects,m)};if(s&&t){const q=t;t=(...J)=>{q(...J),O()}}let V=P?new Array(e.length).fill(Th):Th;const U=q=>{if(!(!(m.flags&1)||!m.dirty&&!q))if(t){const J=m.run();if(r||T||(P?J.some((at,k)=>Qr(at,V[k])):Qr(J,V))){g&&g();const at=Vs;Vs=m;try{const k=[J,V===Th?void 0:P&&V[0]===Th?[]:V,E];V=J,h?h(t,3,k):t(...k)}finally{Vs=at}}}else m.run()};return l&&l(U),m=new W0(p),m.scheduler=a?()=>a(U,!1):U,E=q=>wS(q,!1,m),g=m.onStop=()=>{const q=cu.get(m);if(q){if(h)h(q,4);else for(const J of q)J();cu.delete(m)}},t?i?U(!0):V=m.run():a?a(U.bind(null,!0),!0):m.run(),O.pause=m.pause.bind(m),O.resume=m.resume.bind(m),O.stop=O,O}function cr(e,t=1/0,n){if(t<=0||!Pe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,_n(e))cr(e.value,t,n);else if(Gt(e))for(let i=0;i<e.length;i++)cr(e[i],t,n);else if(U0(e)||Qo(e))e.forEach(i=>{cr(i,t,n)});else if($0(e)){for(const i in e)cr(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&cr(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bc(e,t,n,i){try{return i?e(...i):e()}catch(r){sf(r,t,n)}}function ji(e,t,n,i){if(jt(e)){const r=bc(e,t,n,i);return r&&z0(r)&&r.catch(s=>{sf(s,t,n)}),r}if(Gt(e)){const r=[];for(let s=0;s<e.length;s++)r.push(ji(e[s],t,n,i));return r}}function sf(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||ge;if(t){let l=t.parent;const h=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const m=l.ec;if(m){for(let p=0;p<m.length;p++)if(m[p](e,h,f)===!1)return}l=l.parent}if(s){gr(),bc(s,null,10,[e,h,f]),vr();return}}bS(e,n,r,i,a)}function bS(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const Mn=[];let Ci=-1;const ta=[];let zr=null,Do=0;const u1=Promise.resolve();let hu=null;function Jl(e){const t=hu||u1;return e?t.then(this?e.bind(this):e):t}function TS(e){let t=Ci+1,n=Mn.length;for(;t<n;){const i=t+n>>>1,r=Mn[i],s=tc(r);s<e||s===e&&r.flags&2?t=i+1:n=i}return t}function hp(e){if(!(e.flags&1)){const t=tc(e),n=Mn[Mn.length-1];!n||!(e.flags&2)&&t>=tc(n)?Mn.push(e):Mn.splice(TS(t),0,e),e.flags|=1,f1()}}function f1(){hu||(hu=u1.then(m1))}function PS(e){Gt(e)?ta.push(...e):zr&&e.id===-1?zr.splice(Do+1,0,e):e.flags&1||(ta.push(e),e.flags|=1),f1()}function mg(e,t,n=Ci+1){for(;n<Mn.length;n++){const i=Mn[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Mn.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function d1(e){if(ta.length){const t=[...new Set(ta)].sort((n,i)=>tc(n)-tc(i));if(ta.length=0,zr){zr.push(...t);return}for(zr=t,Do=0;Do<zr.length;Do++){const n=zr[Do];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zr=null,Do=0}}const tc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function m1(e){try{for(Ci=0;Ci<Mn.length;Ci++){const t=Mn[Ci];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ci<Mn.length;Ci++){const t=Mn[Ci];t&&(t.flags&=-2)}Ci=-1,Mn.length=0,d1(),hu=null,(Mn.length||ta.length)&&m1()}}let Bn=null,p1=null;function uu(e){const t=Bn;return Bn=e,p1=e&&e.type.__scopeId||null,t}function _1(e,t=Bn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Mg(-1);const s=uu(t);let a;try{a=e(...r)}finally{uu(s),i._d&&Mg(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function fu(e,t){if(Bn===null)return e;const n=hf(Bn),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,a,l,h=ge]=t[r];s&&(jt(s)&&(s={mounted:s,updated:s}),s.deep&&cr(a),i.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:h}))}return e}function Ns(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];s&&(l.oldValue=s[a].value);let h=l.dir[i];h&&(gr(),ji(h,n,8,[e.el,l,e,t]),vr())}}const g1=Symbol("_vte"),SS=e=>e.__isTeleport,xl=e=>e&&(e.disabled||e.disabled===""),pg=e=>e&&(e.defer||e.defer===""),_g=e=>typeof SVGElement<"u"&&e instanceof SVGElement,gg=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,$d=(e,t)=>{const n=e&&e.to;return Ve(n)?t?t(n):null:n},v1={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,s,a,l,h,f){const{mc:m,pc:p,pbc:g,o:{insert:E,querySelector:T,createText:P,createComment:x}}=f,O=xl(t.props);let{shapeFlag:V,children:U,dynamicChildren:q}=t;if(e==null){const J=t.el=P(""),at=t.anchor=P("");E(J,n,i),E(at,n,i);const k=(M,F)=>{V&16&&(r&&r.isCE&&(r.ce._teleportTarget=M),m(U,M,F,r,s,a,l,h))},I=()=>{const M=t.target=$d(t.props,T),F=y1(M,t,P,E);M&&(a!=="svg"&&_g(M)?a="svg":a!=="mathml"&&gg(M)&&(a="mathml"),O||(k(M,F),Gh(t,!1)))};O&&(k(n,at),Gh(t,!0)),pg(t.props)?(t.el.__isMounted=!1,Sn(()=>{I(),delete t.el.__isMounted},s)):I()}else{if(pg(t.props)&&e.el.__isMounted===!1){Sn(()=>{v1.process(e,t,n,i,r,s,a,l,h,f)},s);return}t.el=e.el,t.targetStart=e.targetStart;const J=t.anchor=e.anchor,at=t.target=e.target,k=t.targetAnchor=e.targetAnchor,I=xl(e.props),M=I?n:at,F=I?J:k;if(a==="svg"||_g(at)?a="svg":(a==="mathml"||gg(at))&&(a="mathml"),q?(g(e.dynamicChildren,q,M,r,s,a,l),_p(e,t,!0)):h||p(e,t,M,F,r,s,a,l,!1),O)I?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ph(t,n,J,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=$d(t.props,T);D&&Ph(t,D,null,f,0)}else I&&Ph(t,at,k,f,1);Gh(t,O)}},remove(e,t,n,{um:i,o:{remove:r}},s){const{shapeFlag:a,children:l,anchor:h,targetStart:f,targetAnchor:m,target:p,props:g}=e;if(p&&(r(f),r(m)),s&&r(h),a&16){const E=s||!xl(g);for(let T=0;T<l.length;T++){const P=l[T];i(P,t,n,E,!!P.dynamicChildren)}}},move:Ph,hydrate:IS};function Ph(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:a,anchor:l,shapeFlag:h,children:f,props:m}=e,p=s===2;if(p&&i(a,t,n),(!p||xl(m))&&h&16)for(let g=0;g<f.length;g++)r(f[g],t,n,2);p&&i(l,t,n)}function IS(e,t,n,i,r,s,{o:{nextSibling:a,parentNode:l,querySelector:h,insert:f,createText:m}},p){const g=t.target=$d(t.props,h);if(g){const E=xl(t.props),T=g._lpa||g.firstChild;if(t.shapeFlag&16)if(E)t.anchor=p(a(e),t,l(e),n,i,r,s),t.targetStart=T,t.targetAnchor=T&&a(T);else{t.anchor=a(e);let P=T;for(;P;){if(P&&P.nodeType===8){if(P.data==="teleport start anchor")t.targetStart=P;else if(P.data==="teleport anchor"){t.targetAnchor=P,g._lpa=t.targetAnchor&&a(t.targetAnchor);break}}P=a(P)}t.targetAnchor||y1(g,t,m,f),p(T&&a(T),t,g,n,i,r,s)}Gh(t,E)}return t.anchor&&a(t.anchor)}const lV=v1;function Gh(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function y1(e,t,n,i){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[g1]=s,e&&(i(r,e),i(s,e)),s}function up(e,t){e.shapeFlag&6&&e.component?(e.transition=t,up(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function fp(e,t){return jt(e)?gn({name:e.name},t,{setup:e}):e}function w1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Cl(e,t,n,i,r=!1){if(Gt(e)){e.forEach((T,P)=>Cl(T,t&&(Gt(t)?t[P]:t),n,i,r));return}if(kl(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Cl(e,t,n,i.component.subTree);return}const s=i.shapeFlag&4?hf(i.component):i.el,a=r?null:s,{i:l,r:h}=e,f=t&&t.r,m=l.refs===ge?l.refs={}:l.refs,p=l.setupState,g=Vt(p),E=p===ge?()=>!1:T=>oe(g,T);if(f!=null&&f!==h&&(Ve(f)?(m[f]=null,E(f)&&(p[f]=null)):_n(f)&&(f.value=null)),jt(h))bc(h,l,12,[a,m]);else{const T=Ve(h),P=_n(h);if(T||P){const x=()=>{if(e.f){const O=T?E(h)?p[h]:m[h]:h.value;r?Gt(O)&&tp(O,s):Gt(O)?O.includes(s)||O.push(s):T?(m[h]=[s],E(h)&&(p[h]=m[h])):(h.value=[s],e.k&&(m[e.k]=h.value))}else T?(m[h]=a,E(h)&&(p[h]=a)):P&&(h.value=a,e.k&&(m[e.k]=a))};a?(x.id=-1,Sn(x,n)):x()}}}ef().requestIdleCallback;ef().cancelIdleCallback;const kl=e=>!!e.type.__asyncLoader,E1=e=>e.type.__isKeepAlive;function MS(e,t){b1(e,"a",t)}function AS(e,t){b1(e,"da",t)}function b1(e,t,n=pn){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(of(t,i,n),n){let r=n.parent;for(;r&&r.parent;)E1(r.parent.vnode)&&LS(i,t,n,r),r=r.parent}}function LS(e,t,n,i){const r=of(t,e,i,!0);S1(()=>{tp(i[t],r)},n)}function of(e,t,n=pn,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{gr();const l=Tc(n),h=ji(t,n,e,a);return l(),vr(),h});return i?r.unshift(s):r.push(s),s}}const Sr=e=>(t,n=pn)=>{(!ic||e==="sp")&&of(e,(...i)=>t(...i),n)},xS=Sr("bm"),T1=Sr("m"),CS=Sr("bu"),kS=Sr("u"),P1=Sr("bum"),S1=Sr("um"),RS=Sr("sp"),OS=Sr("rtg"),NS=Sr("rtc");function DS(e,t=pn){of("ec",e,t)}const VS="components";function dp(e,t){return GS(VS,e,!0,t)||e}const FS=Symbol.for("v-ndc");function GS(e,t,n=!0,i=!1){const r=Bn||pn;if(r){const s=r.type;{const l=M2(s,!1);if(l&&(l===t||l===ai(t)||l===tf(ai(t))))return s}const a=vg(r[e]||s[e],t)||vg(r.appContext[e],t);return!a&&i?s:a}}function vg(e,t){return e&&(e[t]||e[ai(t)]||e[tf(ai(t))])}function af(e,t,n,i){let r;const s=n,a=Gt(e);if(a||Ve(e)){const l=a&&Xo(e);let h=!1,f=!1;l&&(h=!ri(e),f=rs(e),e=nf(e)),r=new Array(e.length);for(let m=0,p=e.length;m<p;m++)r[m]=t(h?f?lu(rn(e[m])):rn(e[m]):e[m],m,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,s)}else if(Pe(e))if(e[Symbol.iterator])r=Array.from(e,(l,h)=>t(l,h,void 0,s));else{const l=Object.keys(e);r=new Array(l.length);for(let h=0,f=l.length;h<f;h++){const m=l[h];r[h]=t(e[m],m,h,s)}}else r=[];return r}const jd=e=>e?$1(e)?hf(e):jd(e.parent):null,Rl=gn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jd(e.parent),$root:e=>jd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>M1(e),$forceUpdate:e=>e.f||(e.f=()=>{hp(e.update)}),$nextTick:e=>e.n||(e.n=Jl.bind(e.proxy)),$watch:e=>a2.bind(e)}),td=(e,t)=>e!==ge&&!e.__isScriptSetup&&oe(e,t),US={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:s,accessCache:a,type:l,appContext:h}=e;let f;if(t[0]!=="$"){const E=a[t];if(E!==void 0)switch(E){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(td(i,t))return a[t]=1,i[t];if(r!==ge&&oe(r,t))return a[t]=2,r[t];if((f=e.propsOptions[0])&&oe(f,t))return a[t]=3,s[t];if(n!==ge&&oe(n,t))return a[t]=4,n[t];qd&&(a[t]=0)}}const m=Rl[t];let p,g;if(m)return t==="$attrs"&&dn(e.attrs,"get",""),m(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==ge&&oe(n,t))return a[t]=4,n[t];if(g=h.config.globalProperties,oe(g,t))return g[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return td(r,t)?(r[t]=n,!0):i!==ge&&oe(i,t)?(i[t]=n,!0):oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},a){let l;return!!n[a]||e!==ge&&oe(e,a)||td(t,a)||(l=s[0])&&oe(l,a)||oe(i,a)||oe(Rl,a)||oe(r.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:oe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function yg(e){return Gt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qd=!0;function zS(e){const t=M1(e),n=e.proxy,i=e.ctx;qd=!1,t.beforeCreate&&wg(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:a,watch:l,provide:h,inject:f,created:m,beforeMount:p,mounted:g,beforeUpdate:E,updated:T,activated:P,deactivated:x,beforeDestroy:O,beforeUnmount:V,destroyed:U,unmounted:q,render:J,renderTracked:at,renderTriggered:k,errorCaptured:I,serverPrefetch:M,expose:F,inheritAttrs:D,components:G,directives:C,filters:fe}=t;if(f&&BS(f,i,null),a)for(const qt in a){const ft=a[qt];jt(ft)&&(i[qt]=ft.bind(n))}if(r){const qt=r.call(n,n);Pe(qt)&&(e.data=rf(qt))}if(qd=!0,s)for(const qt in s){const ft=s[qt],Ze=jt(ft)?ft.bind(n,n):jt(ft.get)?ft.get.bind(n,n):Vi,It=!jt(ft)&&jt(ft.set)?ft.set.bind(n):Vi,Ht=$e({get:Ze,set:It});Object.defineProperty(i,qt,{enumerable:!0,configurable:!0,get:()=>Ht.value,set:rt=>Ht.value=rt})}if(l)for(const qt in l)I1(l[qt],i,n,qt);if(h){const qt=jt(h)?h.call(n):h;Reflect.ownKeys(qt).forEach(ft=>{Uh(ft,qt[ft])})}m&&wg(m,e,"c");function Zt(qt,ft){Gt(ft)?ft.forEach(Ze=>qt(Ze.bind(n))):ft&&qt(ft.bind(n))}if(Zt(xS,p),Zt(T1,g),Zt(CS,E),Zt(kS,T),Zt(MS,P),Zt(AS,x),Zt(DS,I),Zt(NS,at),Zt(OS,k),Zt(P1,V),Zt(S1,q),Zt(RS,M),Gt(F))if(F.length){const qt=e.exposed||(e.exposed={});F.forEach(ft=>{Object.defineProperty(qt,ft,{get:()=>n[ft],set:Ze=>n[ft]=Ze,enumerable:!0})})}else e.exposed||(e.exposed={});J&&e.render===Vi&&(e.render=J),D!=null&&(e.inheritAttrs=D),G&&(e.components=G),C&&(e.directives=C),M&&w1(e)}function BS(e,t,n=Vi){Gt(e)&&(e=Hd(e));for(const i in e){const r=e[i];let s;Pe(r)?"default"in r?s=si(r.from||i,r.default,!0):s=si(r.from||i):s=si(r),_n(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function wg(e,t,n){ji(Gt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function I1(e,t,n,i){let r=i.includes(".")?F1(n,i):()=>n[i];if(Ve(e)){const s=t[e];jt(s)&&dr(r,s)}else if(jt(e))dr(r,e.bind(n));else if(Pe(e))if(Gt(e))e.forEach(s=>I1(s,t,n,i));else{const s=jt(e.handler)?e.handler.bind(n):t[e.handler];jt(s)&&dr(r,s,e)}}function M1(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,l=s.get(t);let h;return l?h=l:!r.length&&!n&&!i?h=t:(h={},r.length&&r.forEach(f=>du(h,f,a,!0)),du(h,t,a)),Pe(t)&&s.set(t,h),h}function du(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&du(e,s,n,!0),r&&r.forEach(a=>du(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const l=$S[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const $S={data:Eg,props:bg,emits:bg,methods:ml,computed:ml,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:ml,directives:ml,watch:qS,provide:Eg,inject:jS};function Eg(e,t){return t?e?function(){return gn(jt(e)?e.call(this,this):e,jt(t)?t.call(this,this):t)}:t:e}function jS(e,t){return ml(Hd(e),Hd(t))}function Hd(e){if(Gt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Tn(e,t){return e?[...new Set([].concat(e,t))]:t}function ml(e,t){return e?gn(Object.create(null),e,t):t}function bg(e,t){return e?Gt(e)&&Gt(t)?[...new Set([...e,...t])]:gn(Object.create(null),yg(e),yg(t??{})):t}function qS(e,t){if(!e)return t;if(!t)return e;const n=gn(Object.create(null),e);for(const i in t)n[i]=Tn(e[i],t[i]);return n}function A1(){return{app:null,config:{isNativeTag:FP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HS=0;function WS(e,t){return function(i,r=null){jt(i)||(i=gn({},i)),r!=null&&!Pe(r)&&(r=null);const s=A1(),a=new WeakSet,l=[];let h=!1;const f=s.app={_uid:HS++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:L2,get config(){return s.config},set config(m){},use(m,...p){return a.has(m)||(m&&jt(m.install)?(a.add(m),m.install(f,...p)):jt(m)&&(a.add(m),m(f,...p))),f},mixin(m){return s.mixins.includes(m)||s.mixins.push(m),f},component(m,p){return p?(s.components[m]=p,f):s.components[m]},directive(m,p){return p?(s.directives[m]=p,f):s.directives[m]},mount(m,p,g){if(!h){const E=f._ceVNode||on(i,r);return E.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),e(E,m,g),h=!0,f._container=m,m.__vue_app__=f,hf(E.component)}},onUnmount(m){l.push(m)},unmount(){h&&(ji(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(m,p){return s.provides[m]=p,f},runWithContext(m){const p=ea;ea=f;try{return m()}finally{ea=p}}};return f}}let ea=null;function Uh(e,t){if(pn){let n=pn.provides;const i=pn.parent&&pn.parent.provides;i===n&&(n=pn.provides=Object.create(i)),n[e]=t}}function si(e,t,n=!1){const i=b2();if(i||ea){let r=ea?ea._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&jt(t)?t.call(i&&i.proxy):t}}const L1={},x1=()=>Object.create(L1),C1=e=>Object.getPrototypeOf(e)===L1;function KS(e,t,n,i=!1){const r={},s=x1();e.propsDefaults=Object.create(null),k1(e,t,r,s);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=i?r:a1(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function ZS(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=e,l=Vt(r),[h]=e.propsOptions;let f=!1;if((i||a>0)&&!(a&16)){if(a&8){const m=e.vnode.dynamicProps;for(let p=0;p<m.length;p++){let g=m[p];if(lf(e.emitsOptions,g))continue;const E=t[g];if(h)if(oe(s,g))E!==s[g]&&(s[g]=E,f=!0);else{const T=ai(g);r[T]=Wd(h,l,T,E,e,!1)}else E!==s[g]&&(s[g]=E,f=!0)}}}else{k1(e,t,r,s)&&(f=!0);let m;for(const p in l)(!t||!oe(t,p)&&((m=ys(p))===p||!oe(t,m)))&&(h?n&&(n[p]!==void 0||n[m]!==void 0)&&(r[p]=Wd(h,l,p,void 0,e,!0)):delete r[p]);if(s!==l)for(const p in s)(!t||!oe(t,p))&&(delete s[p],f=!0)}f&&lr(e.attrs,"set","")}function k1(e,t,n,i){const[r,s]=e.propsOptions;let a=!1,l;if(t)for(let h in t){if(Ml(h))continue;const f=t[h];let m;r&&oe(r,m=ai(h))?!s||!s.includes(m)?n[m]=f:(l||(l={}))[m]=f:lf(e.emitsOptions,h)||(!(h in i)||f!==i[h])&&(i[h]=f,a=!0)}if(s){const h=Vt(n),f=l||ge;for(let m=0;m<s.length;m++){const p=s[m];n[p]=Wd(r,h,p,f[p],e,!oe(f,p))}}return a}function Wd(e,t,n,i,r,s){const a=e[n];if(a!=null){const l=oe(a,"default");if(l&&i===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&jt(h)){const{propsDefaults:f}=r;if(n in f)i=f[n];else{const m=Tc(r);i=f[n]=h.call(null,t),m()}}else i=h;r.ce&&r.ce._setProp(n,i)}a[0]&&(s&&!l?i=!1:a[1]&&(i===""||i===ys(n))&&(i=!0))}return i}const YS=new WeakMap;function R1(e,t,n=!1){const i=n?YS:t.propsCache,r=i.get(e);if(r)return r;const s=e.props,a={},l=[];let h=!1;if(!jt(e)){const m=p=>{h=!0;const[g,E]=R1(p,t,!0);gn(a,g),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!s&&!h)return Pe(e)&&i.set(e,Yo),Yo;if(Gt(s))for(let m=0;m<s.length;m++){const p=ai(s[m]);Tg(p)&&(a[p]=ge)}else if(s)for(const m in s){const p=ai(m);if(Tg(p)){const g=s[m],E=a[p]=Gt(g)||jt(g)?{type:g}:gn({},g),T=E.type;let P=!1,x=!0;if(Gt(T))for(let O=0;O<T.length;++O){const V=T[O],U=jt(V)&&V.name;if(U==="Boolean"){P=!0;break}else U==="String"&&(x=!1)}else P=jt(T)&&T.name==="Boolean";E[0]=P,E[1]=x,(P||oe(E,"default"))&&l.push(p)}}const f=[a,l];return Pe(e)&&i.set(e,f),f}function Tg(e){return e[0]!=="$"&&!Ml(e)}const mp=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",pp=e=>Gt(e)?e.map(Ri):[Ri(e)],QS=(e,t,n)=>{if(t._n)return t;const i=_1((...r)=>pp(t(...r)),n);return i._c=!1,i},O1=(e,t,n)=>{const i=e._ctx;for(const r in e){if(mp(r))continue;const s=e[r];if(jt(s))t[r]=QS(r,s,i);else if(s!=null){const a=pp(s);t[r]=()=>a}}},N1=(e,t)=>{const n=pp(t);e.slots.default=()=>n},D1=(e,t,n)=>{for(const i in t)(n||!mp(i))&&(e[i]=t[i])},XS=(e,t,n)=>{const i=e.slots=x1();if(e.vnode.shapeFlag&32){const r=t.__;r&&Dd(i,"__",r,!0);const s=t._;s?(D1(i,t,n),n&&Dd(i,"_",s,!0)):O1(t,i)}else t&&N1(e,t)},JS=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,a=ge;if(i.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:D1(r,t,n):(s=!t.$stable,O1(t,r)),a=t}else t&&(N1(e,t),a={default:1});if(s)for(const l in r)!mp(l)&&a[l]==null&&delete r[l]},Sn=m2;function t2(e){return e2(e)}function e2(e,t){const n=ef();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:l,createComment:h,setText:f,setElementText:m,parentNode:p,nextSibling:g,setScopeId:E=Vi,insertStaticContent:T}=e,P=(A,R,z,Z=null,Y=null,K=null,ct=void 0,lt=null,ot=!!R.dynamicChildren)=>{if(A===R)return;A&&!cl(A,R)&&(Z=j(A),rt(A,Y,K,!0),A=null),R.patchFlag===-2&&(ot=!1,R.dynamicChildren=null);const{type:et,ref:Mt,shapeFlag:_t}=R;switch(et){case cf:x(A,R,z,Z);break;case ss:O(A,R,z,Z);break;case nd:A==null&&V(R,z,Z,ct);break;case zn:G(A,R,z,Z,Y,K,ct,lt,ot);break;default:_t&1?J(A,R,z,Z,Y,K,ct,lt,ot):_t&6?C(A,R,z,Z,Y,K,ct,lt,ot):(_t&64||_t&128)&&et.process(A,R,z,Z,Y,K,ct,lt,ot,Et)}Mt!=null&&Y?Cl(Mt,A&&A.ref,K,R||A,!R):Mt==null&&A&&A.ref!=null&&Cl(A.ref,null,K,A,!0)},x=(A,R,z,Z)=>{if(A==null)i(R.el=l(R.children),z,Z);else{const Y=R.el=A.el;R.children!==A.children&&f(Y,R.children)}},O=(A,R,z,Z)=>{A==null?i(R.el=h(R.children||""),z,Z):R.el=A.el},V=(A,R,z,Z)=>{[A.el,A.anchor]=T(A.children,R,z,Z,A.el,A.anchor)},U=({el:A,anchor:R},z,Z)=>{let Y;for(;A&&A!==R;)Y=g(A),i(A,z,Z),A=Y;i(R,z,Z)},q=({el:A,anchor:R})=>{let z;for(;A&&A!==R;)z=g(A),r(A),A=z;r(R)},J=(A,R,z,Z,Y,K,ct,lt,ot)=>{R.type==="svg"?ct="svg":R.type==="math"&&(ct="mathml"),A==null?at(R,z,Z,Y,K,ct,lt,ot):M(A,R,Y,K,ct,lt,ot)},at=(A,R,z,Z,Y,K,ct,lt)=>{let ot,et;const{props:Mt,shapeFlag:_t,transition:St,dirs:kt}=A;if(ot=A.el=a(A.type,K,Mt&&Mt.is,Mt),_t&8?m(ot,A.children):_t&16&&I(A.children,ot,null,Z,Y,ed(A,K),ct,lt),kt&&Ns(A,null,Z,"created"),k(ot,A,A.scopeId,ct,Z),Mt){for(const Ut in Mt)Ut!=="value"&&!Ml(Ut)&&s(ot,Ut,null,Mt[Ut],K,Z);"value"in Mt&&s(ot,"value",null,Mt.value,K),(et=Mt.onVnodeBeforeMount)&&xi(et,Z,A)}kt&&Ns(A,null,Z,"beforeMount");const Lt=n2(Y,St);Lt&&St.beforeEnter(ot),i(ot,R,z),((et=Mt&&Mt.onVnodeMounted)||Lt||kt)&&Sn(()=>{et&&xi(et,Z,A),Lt&&St.enter(ot),kt&&Ns(A,null,Z,"mounted")},Y)},k=(A,R,z,Z,Y)=>{if(z&&E(A,z),Z)for(let K=0;K<Z.length;K++)E(A,Z[K]);if(Y){let K=Y.subTree;if(R===K||U1(K.type)&&(K.ssContent===R||K.ssFallback===R)){const ct=Y.vnode;k(A,ct,ct.scopeId,ct.slotScopeIds,Y.parent)}}},I=(A,R,z,Z,Y,K,ct,lt,ot=0)=>{for(let et=ot;et<A.length;et++){const Mt=A[et]=lt?Br(A[et]):Ri(A[et]);P(null,Mt,R,z,Z,Y,K,ct,lt)}},M=(A,R,z,Z,Y,K,ct)=>{const lt=R.el=A.el;let{patchFlag:ot,dynamicChildren:et,dirs:Mt}=R;ot|=A.patchFlag&16;const _t=A.props||ge,St=R.props||ge;let kt;if(z&&Ds(z,!1),(kt=St.onVnodeBeforeUpdate)&&xi(kt,z,R,A),Mt&&Ns(R,A,z,"beforeUpdate"),z&&Ds(z,!0),(_t.innerHTML&&St.innerHTML==null||_t.textContent&&St.textContent==null)&&m(lt,""),et?F(A.dynamicChildren,et,lt,z,Z,ed(R,Y),K):ct||ft(A,R,lt,null,z,Z,ed(R,Y),K,!1),ot>0){if(ot&16)D(lt,_t,St,z,Y);else if(ot&2&&_t.class!==St.class&&s(lt,"class",null,St.class,Y),ot&4&&s(lt,"style",_t.style,St.style,Y),ot&8){const Lt=R.dynamicProps;for(let Ut=0;Ut<Lt.length;Ut++){const Yt=Lt[Ut],He=_t[Yt],Fe=St[Yt];(Fe!==He||Yt==="value")&&s(lt,Yt,He,Fe,Y,z)}}ot&1&&A.children!==R.children&&m(lt,R.children)}else!ct&&et==null&&D(lt,_t,St,z,Y);((kt=St.onVnodeUpdated)||Mt)&&Sn(()=>{kt&&xi(kt,z,R,A),Mt&&Ns(R,A,z,"updated")},Z)},F=(A,R,z,Z,Y,K,ct)=>{for(let lt=0;lt<R.length;lt++){const ot=A[lt],et=R[lt],Mt=ot.el&&(ot.type===zn||!cl(ot,et)||ot.shapeFlag&198)?p(ot.el):z;P(ot,et,Mt,null,Z,Y,K,ct,!0)}},D=(A,R,z,Z,Y)=>{if(R!==z){if(R!==ge)for(const K in R)!Ml(K)&&!(K in z)&&s(A,K,R[K],null,Y,Z);for(const K in z){if(Ml(K))continue;const ct=z[K],lt=R[K];ct!==lt&&K!=="value"&&s(A,K,lt,ct,Y,Z)}"value"in z&&s(A,"value",R.value,z.value,Y)}},G=(A,R,z,Z,Y,K,ct,lt,ot)=>{const et=R.el=A?A.el:l(""),Mt=R.anchor=A?A.anchor:l("");let{patchFlag:_t,dynamicChildren:St,slotScopeIds:kt}=R;kt&&(lt=lt?lt.concat(kt):kt),A==null?(i(et,z,Z),i(Mt,z,Z),I(R.children||[],z,Mt,Y,K,ct,lt,ot)):_t>0&&_t&64&&St&&A.dynamicChildren?(F(A.dynamicChildren,St,z,Y,K,ct,lt),(R.key!=null||Y&&R===Y.subTree)&&_p(A,R,!0)):ft(A,R,z,Mt,Y,K,ct,lt,ot)},C=(A,R,z,Z,Y,K,ct,lt,ot)=>{R.slotScopeIds=lt,A==null?R.shapeFlag&512?Y.ctx.activate(R,z,Z,ct,ot):fe(R,z,Z,Y,K,ct,ot):ln(A,R,ot)},fe=(A,R,z,Z,Y,K,ct)=>{const lt=A.component=E2(A,Z,Y);if(E1(A)&&(lt.ctx.renderer=Et),T2(lt,!1,ct),lt.asyncDep){if(Y&&Y.registerDep(lt,Zt,ct),!A.el){const ot=lt.subTree=on(ss);O(null,ot,R,z),A.placeholder=ot.el}}else Zt(lt,A,R,z,Y,K,ct)},ln=(A,R,z)=>{const Z=R.component=A.component;if(f2(A,R,z))if(Z.asyncDep&&!Z.asyncResolved){qt(Z,R,z);return}else Z.next=R,Z.update();else R.el=A.el,Z.vnode=R},Zt=(A,R,z,Z,Y,K,ct)=>{const lt=()=>{if(A.isMounted){let{next:_t,bu:St,u:kt,parent:Lt,vnode:Ut}=A;{const Ye=V1(A);if(Ye){_t&&(_t.el=Ut.el,qt(A,_t,ct)),Ye.asyncDep.then(()=>{A.isUnmounted||lt()});return}}let Yt=_t,He;Ds(A,!1),_t?(_t.el=Ut.el,qt(A,_t,ct)):_t=Ut,St&&Fh(St),(He=_t.props&&_t.props.onVnodeBeforeUpdate)&&xi(He,Lt,_t,Ut),Ds(A,!0);const Fe=Sg(A),wn=A.subTree;A.subTree=Fe,P(wn,Fe,p(wn.el),j(wn),A,Y,K),_t.el=Fe.el,Yt===null&&d2(A,Fe.el),kt&&Sn(kt,Y),(He=_t.props&&_t.props.onVnodeUpdated)&&Sn(()=>xi(He,Lt,_t,Ut),Y)}else{let _t;const{el:St,props:kt}=R,{bm:Lt,m:Ut,parent:Yt,root:He,type:Fe}=A,wn=kl(R);Ds(A,!1),Lt&&Fh(Lt),!wn&&(_t=kt&&kt.onVnodeBeforeMount)&&xi(_t,Yt,R),Ds(A,!0);{He.ce&&He.ce._def.shadowRoot!==!1&&He.ce._injectChildStyle(Fe);const Ye=A.subTree=Sg(A);P(null,Ye,z,Z,A,Y,K),R.el=Ye.el}if(Ut&&Sn(Ut,Y),!wn&&(_t=kt&&kt.onVnodeMounted)){const Ye=R;Sn(()=>xi(_t,Yt,Ye),Y)}(R.shapeFlag&256||Yt&&kl(Yt.vnode)&&Yt.vnode.shapeFlag&256)&&A.a&&Sn(A.a,Y),A.isMounted=!0,R=z=Z=null}};A.scope.on();const ot=A.effect=new W0(lt);A.scope.off();const et=A.update=ot.run.bind(ot),Mt=A.job=ot.runIfDirty.bind(ot);Mt.i=A,Mt.id=A.uid,ot.scheduler=()=>hp(Mt),Ds(A,!0),et()},qt=(A,R,z)=>{R.component=A;const Z=A.vnode.props;A.vnode=R,A.next=null,ZS(A,R.props,Z,z),JS(A,R.children,z),gr(),mg(A),vr()},ft=(A,R,z,Z,Y,K,ct,lt,ot=!1)=>{const et=A&&A.children,Mt=A?A.shapeFlag:0,_t=R.children,{patchFlag:St,shapeFlag:kt}=R;if(St>0){if(St&128){It(et,_t,z,Z,Y,K,ct,lt,ot);return}else if(St&256){Ze(et,_t,z,Z,Y,K,ct,lt,ot);return}}kt&8?(Mt&16&&Tt(et,Y,K),_t!==et&&m(z,_t)):Mt&16?kt&16?It(et,_t,z,Z,Y,K,ct,lt,ot):Tt(et,Y,K,!0):(Mt&8&&m(z,""),kt&16&&I(_t,z,Z,Y,K,ct,lt,ot))},Ze=(A,R,z,Z,Y,K,ct,lt,ot)=>{A=A||Yo,R=R||Yo;const et=A.length,Mt=R.length,_t=Math.min(et,Mt);let St;for(St=0;St<_t;St++){const kt=R[St]=ot?Br(R[St]):Ri(R[St]);P(A[St],kt,z,null,Y,K,ct,lt,ot)}et>Mt?Tt(A,Y,K,!0,!1,_t):I(R,z,Z,Y,K,ct,lt,ot,_t)},It=(A,R,z,Z,Y,K,ct,lt,ot)=>{let et=0;const Mt=R.length;let _t=A.length-1,St=Mt-1;for(;et<=_t&&et<=St;){const kt=A[et],Lt=R[et]=ot?Br(R[et]):Ri(R[et]);if(cl(kt,Lt))P(kt,Lt,z,null,Y,K,ct,lt,ot);else break;et++}for(;et<=_t&&et<=St;){const kt=A[_t],Lt=R[St]=ot?Br(R[St]):Ri(R[St]);if(cl(kt,Lt))P(kt,Lt,z,null,Y,K,ct,lt,ot);else break;_t--,St--}if(et>_t){if(et<=St){const kt=St+1,Lt=kt<Mt?R[kt].el:Z;for(;et<=St;)P(null,R[et]=ot?Br(R[et]):Ri(R[et]),z,Lt,Y,K,ct,lt,ot),et++}}else if(et>St)for(;et<=_t;)rt(A[et],Y,K,!0),et++;else{const kt=et,Lt=et,Ut=new Map;for(et=Lt;et<=St;et++){const Ge=R[et]=ot?Br(R[et]):Ri(R[et]);Ge.key!=null&&Ut.set(Ge.key,et)}let Yt,He=0;const Fe=St-Lt+1;let wn=!1,Ye=0;const li=new Array(Fe);for(et=0;et<Fe;et++)li[et]=0;for(et=kt;et<=_t;et++){const Ge=A[et];if(He>=Fe){rt(Ge,Y,K,!0);continue}let Ln;if(Ge.key!=null)Ln=Ut.get(Ge.key);else for(Yt=Lt;Yt<=St;Yt++)if(li[Yt-Lt]===0&&cl(Ge,R[Yt])){Ln=Yt;break}Ln===void 0?rt(Ge,Y,K,!0):(li[Ln-Lt]=et+1,Ln>=Ye?Ye=Ln:wn=!0,P(Ge,R[Ln],z,null,Y,K,ct,lt,ot),He++)}const Wi=wn?i2(li):Yo;for(Yt=Wi.length-1,et=Fe-1;et>=0;et--){const Ge=Lt+et,Ln=R[Ge],Si=R[Ge+1],Lr=Ge+1<Mt?Si.el||Si.placeholder:Z;li[et]===0?P(null,Ln,z,Lr,Y,K,ct,lt,ot):wn&&(Yt<0||et!==Wi[Yt]?Ht(Ln,z,Lr,2):Yt--)}}},Ht=(A,R,z,Z,Y=null)=>{const{el:K,type:ct,transition:lt,children:ot,shapeFlag:et}=A;if(et&6){Ht(A.component.subTree,R,z,Z);return}if(et&128){A.suspense.move(R,z,Z);return}if(et&64){ct.move(A,R,z,Et);return}if(ct===zn){i(K,R,z);for(let _t=0;_t<ot.length;_t++)Ht(ot[_t],R,z,Z);i(A.anchor,R,z);return}if(ct===nd){U(A,R,z);return}if(Z!==2&&et&1&&lt)if(Z===0)lt.beforeEnter(K),i(K,R,z),Sn(()=>lt.enter(K),Y);else{const{leave:_t,delayLeave:St,afterLeave:kt}=lt,Lt=()=>{A.ctx.isUnmounted?r(K):i(K,R,z)},Ut=()=>{_t(K,()=>{Lt(),kt&&kt()})};St?St(K,Lt,Ut):Ut()}else i(K,R,z)},rt=(A,R,z,Z=!1,Y=!1)=>{const{type:K,props:ct,ref:lt,children:ot,dynamicChildren:et,shapeFlag:Mt,patchFlag:_t,dirs:St,cacheIndex:kt}=A;if(_t===-2&&(Y=!1),lt!=null&&(gr(),Cl(lt,null,z,A,!0),vr()),kt!=null&&(R.renderCache[kt]=void 0),Mt&256){R.ctx.deactivate(A);return}const Lt=Mt&1&&St,Ut=!kl(A);let Yt;if(Ut&&(Yt=ct&&ct.onVnodeBeforeUnmount)&&xi(Yt,R,A),Mt&6)mt(A.component,z,Z);else{if(Mt&128){A.suspense.unmount(z,Z);return}Lt&&Ns(A,null,R,"beforeUnmount"),Mt&64?A.type.remove(A,R,z,Et,Z):et&&!et.hasOnce&&(K!==zn||_t>0&&_t&64)?Tt(et,R,z,!1,!0):(K===zn&&_t&384||!Y&&Mt&16)&&Tt(ot,R,z),Z&&ht(A)}(Ut&&(Yt=ct&&ct.onVnodeUnmounted)||Lt)&&Sn(()=>{Yt&&xi(Yt,R,A),Lt&&Ns(A,null,R,"unmounted")},z)},ht=A=>{const{type:R,el:z,anchor:Z,transition:Y}=A;if(R===zn){Pt(z,Z);return}if(R===nd){q(A);return}const K=()=>{r(z),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(A.shapeFlag&1&&Y&&!Y.persisted){const{leave:ct,delayLeave:lt}=Y,ot=()=>ct(z,K);lt?lt(A.el,K,ot):ot()}else K()},Pt=(A,R)=>{let z;for(;A!==R;)z=g(A),r(A),A=z;r(R)},mt=(A,R,z)=>{const{bum:Z,scope:Y,job:K,subTree:ct,um:lt,m:ot,a:et,parent:Mt,slots:{__:_t}}=A;Pg(ot),Pg(et),Z&&Fh(Z),Mt&&Gt(_t)&&_t.forEach(St=>{Mt.renderCache[St]=void 0}),Y.stop(),K&&(K.flags|=8,rt(ct,A,R,z)),lt&&Sn(lt,R),Sn(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Tt=(A,R,z,Z=!1,Y=!1,K=0)=>{for(let ct=K;ct<A.length;ct++)rt(A[ct],R,z,Z,Y)},j=A=>{if(A.shapeFlag&6)return j(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const R=g(A.anchor||A.el),z=R&&R[g1];return z?g(z):R};let it=!1;const pt=(A,R,z)=>{A==null?R._vnode&&rt(R._vnode,null,null,!0):P(R._vnode||null,A,R,null,null,null,z),R._vnode=A,it||(it=!0,mg(),d1(),it=!1)},Et={p:P,um:rt,m:Ht,r:ht,mt:fe,mc:I,pc:ft,pbc:F,n:j,o:e};return{render:pt,hydrate:void 0,createApp:WS(pt)}}function ed({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ds({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function n2(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function _p(e,t,n=!1){const i=e.children,r=t.children;if(Gt(i)&&Gt(r))for(let s=0;s<i.length;s++){const a=i[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=Br(r[s]),l.el=a.el),!n&&l.patchFlag!==-2&&_p(a,l)),l.type===cf&&(l.el=a.el),l.type===ss&&!l.el&&(l.el=a.el)}}function i2(e){const t=e.slice(),n=[0];let i,r,s,a,l;const h=e.length;for(i=0;i<h;i++){const f=e[i];if(f!==0){if(r=n[n.length-1],e[r]<f){t[i]=r,n.push(i);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,e[n[l]]<f?s=l+1:a=l;f<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}function V1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:V1(t)}function Pg(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const r2=Symbol.for("v-scx"),s2=()=>si(r2);function o2(e,t){return gp(e,null,t)}function dr(e,t,n){return gp(e,t,n)}function gp(e,t,n=ge){const{immediate:i,deep:r,flush:s,once:a}=n,l=gn({},n),h=t&&i||!t&&s!=="post";let f;if(ic){if(s==="sync"){const E=s2();f=E.__watcherHandles||(E.__watcherHandles=[])}else if(!h){const E=()=>{};return E.stop=Vi,E.resume=Vi,E.pause=Vi,E}}const m=pn;l.call=(E,T,P)=>ji(E,m,T,P);let p=!1;s==="post"?l.scheduler=E=>{Sn(E,m&&m.suspense)}:s!=="sync"&&(p=!0,l.scheduler=(E,T)=>{T?E():hp(E)}),l.augmentJob=E=>{t&&(E.flags|=4),p&&(E.flags|=2,m&&(E.id=m.uid,E.i=m))};const g=ES(e,t,l);return ic&&(f?f.push(g):h&&g()),g}function a2(e,t,n){const i=this.proxy,r=Ve(e)?e.includes(".")?F1(i,e):()=>i[e]:e.bind(i,i);let s;jt(t)?s=t:(s=t.handler,n=t);const a=Tc(this),l=gp(r,s.bind(i),n);return a(),l}function F1(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const l2=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ai(t)}Modifiers`]||e[`${ys(t)}Modifiers`];function c2(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ge;let r=n;const s=t.startsWith("update:"),a=s&&l2(i,t.slice(7));a&&(a.trim&&(r=n.map(m=>Ve(m)?m.trim():m)),a.number&&(r=n.map(Vd)));let l,h=i[l=Zf(t)]||i[l=Zf(ai(t))];!h&&s&&(h=i[l=Zf(ys(t))]),h&&ji(h,e,6,r);const f=i[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ji(f,e,6,r)}}function G1(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let a={},l=!1;if(!jt(e)){const h=f=>{const m=G1(f,t,!0);m&&(l=!0,gn(a,m))};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!s&&!l?(Pe(e)&&i.set(e,null),null):(Gt(s)?s.forEach(h=>a[h]=null):gn(a,s),Pe(e)&&i.set(e,a),a)}function lf(e,t){return!e||!Qu(t)?!1:(t=t.slice(2).replace(/Once$/,""),oe(e,t[0].toLowerCase()+t.slice(1))||oe(e,ys(t))||oe(e,t))}function Sg(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[s],slots:a,attrs:l,emit:h,render:f,renderCache:m,props:p,data:g,setupState:E,ctx:T,inheritAttrs:P}=e,x=uu(e);let O,V;try{if(n.shapeFlag&4){const q=r||i,J=q;O=Ri(f.call(J,q,m,p,E,g,T)),V=l}else{const q=t;O=Ri(q.length>1?q(p,{attrs:l,slots:a,emit:h}):q(p,null)),V=t.props?l:h2(l)}}catch(q){Ol.length=0,sf(q,e,1),O=on(ss)}let U=O;if(V&&P!==!1){const q=Object.keys(V),{shapeFlag:J}=U;q.length&&J&7&&(s&&q.some(Jm)&&(V=u2(V,s)),U=ua(U,V,!1,!0))}return n.dirs&&(U=ua(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&up(U,n.transition),O=U,uu(x),O}const h2=e=>{let t;for(const n in e)(n==="class"||n==="style"||Qu(n))&&((t||(t={}))[n]=e[n]);return t},u2=(e,t)=>{const n={};for(const i in e)(!Jm(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function f2(e,t,n){const{props:i,children:r,component:s}=e,{props:a,children:l,patchFlag:h}=t,f=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?Ig(i,a,f):!!a;if(h&8){const m=t.dynamicProps;for(let p=0;p<m.length;p++){const g=m[p];if(a[g]!==i[g]&&!lf(f,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:i===a?!1:i?a?Ig(i,a,f):!0:!!a;return!1}function Ig(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!lf(n,s))return!0}return!1}function d2({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const U1=e=>e.__isSuspense;function m2(e,t){t&&t.pendingBranch?Gt(e)?t.effects.push(...e):t.effects.push(e):PS(e)}const zn=Symbol.for("v-fgt"),cf=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),nd=Symbol.for("v-stc"),Ol=[];let $n=null;function pe(e=!1){Ol.push($n=e?null:[])}function p2(){Ol.pop(),$n=Ol[Ol.length-1]||null}let ec=1;function Mg(e,t=!1){ec+=e,e<0&&$n&&t&&($n.hasOnce=!0)}function z1(e){return e.dynamicChildren=ec>0?$n||Yo:null,p2(),ec>0&&$n&&$n.push(e),e}function ke(e,t,n,i,r,s){return z1(dt(e,t,n,i,r,s,!0))}function na(e,t,n,i,r){return z1(on(e,t,n,i,r,!0))}function mu(e){return e?e.__v_isVNode===!0:!1}function cl(e,t){return e.type===t.type&&e.key===t.key}const B1=({key:e})=>e??null,zh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ve(e)||_n(e)||jt(e)?{i:Bn,r:e,k:t,f:!!n}:e:null);function dt(e,t=null,n=null,i=0,r=null,s=e===zn?0:1,a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&B1(t),ref:t&&zh(t),scopeId:p1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Bn};return l?(vp(h,n),s&128&&e.normalize(h)):n&&(h.shapeFlag|=Ve(n)?8:16),ec>0&&!a&&$n&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&$n.push(h),h}const on=_2;function _2(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===FS)&&(e=ss),mu(e)){const l=ua(e,t,!0);return n&&vp(l,n),ec>0&&!s&&$n&&(l.shapeFlag&6?$n[$n.indexOf(e)]=l:$n.push(l)),l.patchFlag=-2,l}if(A2(e)&&(e=e.__vccOpts),t){t=g2(t);let{class:l,style:h}=t;l&&!Ve(l)&&(t.class=Ec(l)),Pe(h)&&(cp(h)&&!Gt(h)&&(h=gn({},h)),t.style=np(h))}const a=Ve(e)?1:U1(e)?128:SS(e)?64:Pe(e)?4:jt(e)?2:0;return dt(e,t,n,i,r,a,s,!0)}function g2(e){return e?cp(e)||C1(e)?gn({},e):e:null}function ua(e,t,n=!1,i=!1){const{props:r,ref:s,patchFlag:a,children:l,transition:h}=e,f=t?v2(r||{},t):r,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&B1(f),ref:t&&t.ref?n&&s?Gt(s)?s.concat(zh(t)):[s,zh(t)]:zh(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==zn?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ua(e.ssContent),ssFallback:e.ssFallback&&ua(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&i&&up(m,h.clone(m)),m}function nc(e=" ",t=0){return on(cf,null,e,t)}function qs(e="",t=!1){return t?(pe(),na(ss,null,e)):on(ss,null,e)}function Ri(e){return e==null||typeof e=="boolean"?on(ss):Gt(e)?on(zn,null,e.slice()):mu(e)?Br(e):on(cf,null,String(e))}function Br(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ua(e)}function vp(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Gt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),vp(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!C1(t)?t._ctx=Bn:r===3&&Bn&&(Bn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else jt(t)?(t={default:t,_ctx:Bn},n=32):(t=String(t),i&64?(n=16,t=[nc(t)]):n=8);e.children=t,e.shapeFlag|=n}function v2(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Ec([t.class,i.class]));else if(r==="style")t.style=np([t.style,i.style]);else if(Qu(r)){const s=t[r],a=i[r];a&&s!==a&&!(Gt(s)&&s.includes(a))&&(t[r]=s?[].concat(s,a):a)}else r!==""&&(t[r]=i[r])}return t}function xi(e,t,n,i=null){ji(e,t,7,[n,i])}const y2=A1();let w2=0;function E2(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||y2,s={uid:w2++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ZP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:R1(i,r),emitsOptions:G1(i,r),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:i.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=c2.bind(null,s),e.ce&&e.ce(s),s}let pn=null;const b2=()=>pn||Bn;let pu,Kd;{const e=ef(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};pu=t("__VUE_INSTANCE_SETTERS__",n=>pn=n),Kd=t("__VUE_SSR_SETTERS__",n=>ic=n)}const Tc=e=>{const t=pn;return pu(e),e.scope.on(),()=>{e.scope.off(),pu(t)}},Ag=()=>{pn&&pn.scope.off(),pu(null)};function $1(e){return e.vnode.shapeFlag&4}let ic=!1;function T2(e,t=!1,n=!1){t&&Kd(t);const{props:i,children:r}=e.vnode,s=$1(e);KS(e,i,s,t),XS(e,r,n||t);const a=s?P2(e,t):void 0;return t&&Kd(!1),a}function P2(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,US);const{setup:i}=n;if(i){gr();const r=e.setupContext=i.length>1?I2(e):null,s=Tc(e),a=bc(i,e,0,[e.props,r]),l=z0(a);if(vr(),s(),(l||e.sp)&&!kl(e)&&w1(e),l){if(a.then(Ag,Ag),t)return a.then(h=>{Lg(e,h)}).catch(h=>{sf(h,e,0)});e.asyncDep=a}else Lg(e,a)}else j1(e)}function Lg(e,t,n){jt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=h1(t)),j1(e)}function j1(e,t,n){const i=e.type;e.render||(e.render=i.render||Vi);{const r=Tc(e);gr();try{zS(e)}finally{vr(),r()}}}const S2={get(e,t){return dn(e,"get",""),e[t]}};function I2(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,S2),slots:e.slots,emit:e.emit,expose:t}}function hf(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(h1(Bd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rl)return Rl[n](e)},has(t,n){return n in t||n in Rl}})):e.proxy}function M2(e,t=!0){return jt(e)?e.displayName||e.name:e.name||t&&e.__name}function A2(e){return jt(e)&&"__vccOpts"in e}const $e=(e,t)=>yS(e,t,ic);function yp(e,t,n){const i=arguments.length;return i===2?Pe(t)&&!Gt(t)?mu(t)?on(e,null,[t]):on(e,t):on(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&mu(n)&&(n=[n]),on(e,t,n))}const L2="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zd;const xg=typeof window<"u"&&window.trustedTypes;if(xg)try{Zd=xg.createPolicy("vue",{createHTML:e=>e})}catch{}const q1=Zd?e=>Zd.createHTML(e):e=>e,x2="http://www.w3.org/2000/svg",C2="http://www.w3.org/1998/Math/MathML",ar=typeof document<"u"?document:null,Cg=ar&&ar.createElement("template"),k2={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?ar.createElementNS(x2,e):t==="mathml"?ar.createElementNS(C2,e):n?ar.createElement(e,{is:n}):ar.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>ar.createTextNode(e),createComment:e=>ar.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ar.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Cg.innerHTML=q1(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const l=Cg.content;if(i==="svg"||i==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},R2=Symbol("_vtc");function O2(e,t,n){const i=e[R2];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const kg=Symbol("_vod"),N2=Symbol("_vsh"),D2=Symbol(""),V2=/(^|;)\s*display\s*:/;function F2(e,t,n){const i=e.style,r=Ve(n);let s=!1;if(n&&!r){if(t)if(Ve(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Bh(i,l,"")}else for(const a in t)n[a]==null&&Bh(i,a,"");for(const a in n)a==="display"&&(s=!0),Bh(i,a,n[a])}else if(r){if(t!==n){const a=i[D2];a&&(n+=";"+a),i.cssText=n,s=V2.test(n)}}else t&&e.removeAttribute("style");kg in e&&(e[kg]=s?i.display:"",e[N2]&&(i.display="none"))}const Rg=/\s*!important$/;function Bh(e,t,n){if(Gt(n))n.forEach(i=>Bh(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=G2(e,t);Rg.test(n)?e.setProperty(ys(i),n.replace(Rg,""),"important"):e[i]=n}}const Og=["Webkit","Moz","ms"],id={};function G2(e,t){const n=id[t];if(n)return n;let i=ai(t);if(i!=="filter"&&i in e)return id[t]=i;i=tf(i);for(let r=0;r<Og.length;r++){const s=Og[r]+i;if(s in e)return id[t]=s}return t}const Ng="http://www.w3.org/1999/xlink";function Dg(e,t,n,i,r,s=KP(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ng,t.slice(6,t.length)):e.setAttributeNS(Ng,t,n):n==null||s&&!j0(n)?e.removeAttribute(t):e.setAttribute(t,s?"":vs(n)?String(n):n)}function Vg(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?q1(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?e.getAttribute("value")||"":e.value,h=n==null?e.type==="checkbox"?"on":"":String(n);(l!==h||!("_value"in e))&&(e.value=h),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=j0(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(r||t)}function Vo(e,t,n,i){e.addEventListener(t,n,i)}function U2(e,t,n,i){e.removeEventListener(t,n,i)}const Fg=Symbol("_vei");function z2(e,t,n,i,r=null){const s=e[Fg]||(e[Fg]={}),a=s[t];if(i&&a)a.value=i;else{const[l,h]=B2(t);if(i){const f=s[t]=q2(i,r);Vo(e,l,f,h)}else a&&(U2(e,l,a,h),s[t]=void 0)}}const Gg=/(?:Once|Passive|Capture)$/;function B2(e){let t;if(Gg.test(e)){t={};let i;for(;i=e.match(Gg);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ys(e.slice(2)),t]}let rd=0;const $2=Promise.resolve(),j2=()=>rd||($2.then(()=>rd=0),rd=Date.now());function q2(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;ji(H2(i,n.value),t,5,[i])};return n.value=e,n.attached=j2(),n}function H2(e,t){if(Gt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Ug=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,W2=(e,t,n,i,r,s)=>{const a=r==="svg";t==="class"?O2(e,i,a):t==="style"?F2(e,n,i):Qu(t)?Jm(t)||z2(e,t,n,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):K2(e,t,i,a))?(Vg(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Dg(e,t,i,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ve(i))?Vg(e,ai(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Dg(e,t,i,a))};function K2(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ug(t)&&jt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ug(t)&&Ve(n)?!1:t in e}const zg=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Gt(t)?n=>Fh(t,n):t};function Z2(e){e.target.composing=!0}function Bg(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const sd=Symbol("_assign"),_u={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[sd]=zg(r);const s=i||r.props&&r.props.type==="number";Vo(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=Vd(l)),e[sd](l)}),n&&Vo(e,"change",()=>{e.value=e.value.trim()}),t||(Vo(e,"compositionstart",Z2),Vo(e,"compositionend",Bg),Vo(e,"change",Bg))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:s}},a){if(e[sd]=zg(a),e.composing)return;const l=(s||e.type==="number")&&!/^0\d/.test(e.value)?Vd(e.value):e.value,h=t??"";l!==h&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===h)||(e.value=h))}},Y2=["ctrl","shift","alt","meta"],Q2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Y2.some(n=>e[`${n}Key`]&&!t.includes(n))},uf=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(r,...s)=>{for(let a=0;a<t.length;a++){const l=Q2[t[a]];if(l&&l(r,t))return}return e(r,...s)})},X2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},J2=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=r=>{if(!("key"in r))return;const s=ys(r.key);if(t.some(a=>a===s||X2[a]===s))return e(r)})},tI=gn({patchProp:W2},k2);let $g;function eI(){return $g||($g=t2(tI))}const nI=(...e)=>{const t=eI().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=rI(i);if(!r)return;const s=t._component;!jt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=n(r,!1,iI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};function iI(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function rI(e){return Ve(e)?document.querySelector(e):e}const sI=()=>{};var jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},oI=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],h=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(h>>10)),t[i++]=String.fromCharCode(56320+(h&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},W1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,h=r+2<e.length,f=h?e[r+2]:0,m=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|f>>6,E=f&63;h||(E=64,a||(g=64)),i.push(n[m],n[p],n[g],n[E])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(H1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):oI(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const f=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||f==null||p==null)throw new aI;const g=s<<2|l>>4;if(i.push(g),f!==64){const E=l<<4&240|f>>2;if(i.push(E),p!==64){const T=f<<6&192|p;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class aI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lI=function(e){const t=H1(e);return W1.encodeByteArray(t,!0)},gu=function(e){return lI(e).replace(/\./g,"")},K1=function(e){try{return W1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=()=>cI().__FIREBASE_DEFAULTS__,uI=()=>{if(typeof process>"u"||typeof jg>"u")return;const e=jg.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},fI=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&K1(e[1]);return t&&JSON.parse(t)},ff=()=>{try{return sI()||hI()||uI()||fI()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Z1=e=>ff()?.emulatorHosts?.[e],dI=e=>{const t=Z1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Y1=()=>ff()?.config,Q1=e=>ff()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[gu(JSON.stringify(n)),gu(JSON.stringify(a)),""].join(".")}const Nl={};function _I(){const e={prod:[],emulator:[]};for(const t of Object.keys(Nl))Nl[t]?e.emulator.push(t):e.prod.push(t);return e}function gI(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let qg=!1;function J1(e,t){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||Nl[e]===t||Nl[e]||qg)return;Nl[e]=t;function n(g){return`__firebase__banner__${g}`}const i="__firebase__banner",s=_I().prod.length>0;function a(){const g=document.getElementById(i);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function h(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{qg=!0,a()},g}function m(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=gI(i),E=n("text"),T=document.getElementById(E)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),O=n("preprendIcon"),V=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const U=g.element;l(U),m(x,P);const q=f();h(V,O),U.append(V,T,x,q),document.body.appendChild(U)}s?(T.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function yI(){const e=ff()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EI(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function bI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TI(){const e=vn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function PI(){return!yI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FirebaseError";class Ir extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=MI,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?AI(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Ir(r,l,i)}}function AI(e,t){return e.replace(LI,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const LI=/\{\$([^}]+)}/g;function xI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ks(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Hg(s)&&Hg(a)){if(!Ks(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hg(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function pl(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function _l(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function CI(e,t){const n=new kI(e,t);return n.subscribe.bind(n)}class kI{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");RI(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=od),r.error===void 0&&(r.error=od),r.complete===void 0&&(r.complete=od);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RI(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(e){return e&&e._delegate?e._delegate:e}class Zs{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new mI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(DI(t))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Fs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fs){return this.instances.has(t)}getOptions(t=Fs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NI(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Fs){return this.component?this.component.multipleInstances?t:Fs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(e){return e===Fs?void 0:e}function DI(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new OI(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Jt||(Jt={}));const FI={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},GI=Jt.INFO,UI={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},zI=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=UI[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wp{constructor(t){this.name=t,this._logLevel=GI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...t),this._logHandler(this,Jt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...t),this._logHandler(this,Jt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...t),this._logHandler(this,Jt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...t),this._logHandler(this,Jt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...t),this._logHandler(this,Jt.ERROR,...t)}}const BI=(e,t)=>t.some(n=>e instanceof n);let Wg,Kg;function $I(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,Yd=new WeakMap,ew=new WeakMap,ad=new WeakMap,Ep=new WeakMap;function qI(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Xr(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&tw.set(n,e)}).catch(()=>{}),Ep.set(t,e),t}function HI(e){if(Yd.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});Yd.set(e,t)}let Qd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Yd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ew.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WI(e){Qd=e(Qd)}function KI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(ld(this),t,...n);return ew.set(i,t.sort?t.sort():[t]),Xr(i)}:jI().includes(e)?function(...t){return e.apply(ld(this),t),Xr(tw.get(this))}:function(...t){return Xr(e.apply(ld(this),t))}}function ZI(e){return typeof e=="function"?KI(e):(e instanceof IDBTransaction&&HI(e),BI(e,$I())?new Proxy(e,Qd):e)}function Xr(e){if(e instanceof IDBRequest)return qI(e);if(ad.has(e))return ad.get(e);const t=ZI(e);return t!==e&&(ad.set(e,t),Ep.set(t,e)),t}const ld=e=>Ep.get(e);function YI(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Xr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Xr(a.result),h.oldVersion,h.newVersion,Xr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const QI=["get","getKey","getAll","getAllKeys","count"],XI=["put","add","delete","clear"],cd=new Map;function Zg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cd.get(t))return cd.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=XI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||QI.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),r&&h.done]))[0]};return cd.set(t,s),s}WI(e=>({...e,get:(t,n,i)=>Zg(t,n)||e.get(t,n,i),has:(t,n)=>!!Zg(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function tM(e){return e.getComponent()?.type==="VERSION"}const Xd="@firebase/app",Yg="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new wp("@firebase/app"),eM="@firebase/app-compat",nM="@firebase/analytics-compat",iM="@firebase/analytics",rM="@firebase/app-check-compat",sM="@firebase/app-check",oM="@firebase/auth",aM="@firebase/auth-compat",lM="@firebase/database",cM="@firebase/data-connect",hM="@firebase/database-compat",uM="@firebase/functions",fM="@firebase/functions-compat",dM="@firebase/installations",mM="@firebase/installations-compat",pM="@firebase/messaging",_M="@firebase/messaging-compat",gM="@firebase/performance",vM="@firebase/performance-compat",yM="@firebase/remote-config",wM="@firebase/remote-config-compat",EM="@firebase/storage",bM="@firebase/storage-compat",TM="@firebase/firestore",PM="@firebase/ai",SM="@firebase/firestore-compat",IM="firebase",MM="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",AM={[Xd]:"fire-core",[eM]:"fire-core-compat",[iM]:"fire-analytics",[nM]:"fire-analytics-compat",[sM]:"fire-app-check",[rM]:"fire-app-check-compat",[oM]:"fire-auth",[aM]:"fire-auth-compat",[lM]:"fire-rtdb",[cM]:"fire-data-connect",[hM]:"fire-rtdb-compat",[uM]:"fire-fn",[fM]:"fire-fn-compat",[dM]:"fire-iid",[mM]:"fire-iid-compat",[pM]:"fire-fcm",[_M]:"fire-fcm-compat",[gM]:"fire-perf",[vM]:"fire-perf-compat",[yM]:"fire-rc",[wM]:"fire-rc-compat",[EM]:"fire-gcs",[bM]:"fire-gcs-compat",[TM]:"fire-fst",[SM]:"fire-fst-compat",[PM]:"fire-vertex","fire-js":"fire-js",[IM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=new Map,LM=new Map,tm=new Map;function Qg(e,t){try{e.container.addComponent(t)}catch(n){yr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fa(e){const t=e.name;if(tm.has(t))return yr.debug(`There were multiple attempts to register component ${t}.`),!1;tm.set(t,e);for(const n of vu.values())Qg(n,e);for(const n of LM.values())Qg(n,e);return!0}function bp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ni(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Pc("app","Firebase",xM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=MM;function nw(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Jd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Jr.create("bad-app-name",{appName:String(r)});if(n||(n=Y1()),!n)throw Jr.create("no-options");const s=vu.get(r);if(s){if(Ks(n,s.options)&&Ks(i,s.config))return s;throw Jr.create("duplicate-app",{appName:r})}const a=new VI(r);for(const h of tm.values())a.addComponent(h);const l=new CM(n,i,a);return vu.set(r,l),l}function iw(e=Jd){const t=vu.get(e);if(!t&&e===Jd&&Y1())return nw();if(!t)throw Jr.create("no-app",{appName:e});return t}function ts(e,t,n){let i=AM[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}fa(new Zs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="firebase-heartbeat-database",RM=1,rc="firebase-heartbeat-store";let hd=null;function rw(){return hd||(hd=YI(kM,RM,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(rc)}catch(n){console.warn(n)}}}}).catch(e=>{throw Jr.create("idb-open",{originalErrorMessage:e.message})})),hd}async function OM(e){try{const n=(await rw()).transaction(rc),i=await n.objectStore(rc).get(sw(e));return await n.done,i}catch(t){if(t instanceof Ir)yr.warn(t.message);else{const n=Jr.create("idb-get",{originalErrorMessage:t?.message});yr.warn(n.message)}}}async function Xg(e,t){try{const i=(await rw()).transaction(rc,"readwrite");await i.objectStore(rc).put(t,sw(e)),await i.done}catch(n){if(n instanceof Ir)yr.warn(n.message);else{const i=Jr.create("idb-set",{originalErrorMessage:n?.message});yr.warn(i.message)}}}function sw(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=1024,DM=30;class VM{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>DM){const r=UM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){yr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jg(),{heartbeatsToSend:n,unsentEntries:i}=FM(this._heartbeatsCache.heartbeats),r=gu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return yr.warn(t),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function FM(e,t=NM){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),tv(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tv(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SI()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function tv(e){return gu(JSON.stringify({version:2,heartbeats:e})).length}function UM(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(e){fa(new Zs("platform-logger",t=>new JI(t),"PRIVATE")),fa(new Zs("heartbeat",t=>new VM(t),"PRIVATE")),ts(Xd,Yg,e),ts(Xd,Yg,"esm2020"),ts("fire-js","")}zM("");var BM="firebase",$M="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(BM,$M,"app");function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jM=ow,aw=new Pc("auth","Firebase",ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new wp("@firebase/auth");function qM(e,...t){yu.logLevel<=Jt.WARN&&yu.warn(`Auth (${Sa}): ${e}`,...t)}function $h(e,...t){yu.logLevel<=Jt.ERROR&&yu.error(`Auth (${Sa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(e,...t){throw Tp(e,...t)}function Fi(e,...t){return Tp(e,...t)}function lw(e,t,n){const i={...jM(),[t]:n};return new Pc("auth","Firebase",i).create(t,{appName:e.name})}function mr(e){return lw(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return aw.create(e,...t)}function Nt(e,t,...n){if(!e)throw Tp(t,...n)}function ur(e){const t="INTERNAL ASSERTION FAILED: "+e;throw $h(t),new Error(t)}function wr(e,t){e||ur(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){return typeof self<"u"&&self.location?.href||""}function HM(){return ev()==="http:"||ev()==="https:"}function ev(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HM()||EI()||"connection"in navigator)?navigator.onLine:!0}function KM(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,n){this.shortDelay=t,this.longDelay=n,wr(n>t,"Short delay should be less than long delay!"),this.isMobile=vI()||bI()}get(){return WM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(e,t){wr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QM=new Ic(3e4,6e4);function ws(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Es(e,t,n,i,r={}){return hw(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Sc({key:e.config.apiKey,...a}).slice(1),h=await e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);const f={method:t,headers:h,...s};return wI()||(f.referrerPolicy="no-referrer"),e.emulatorConfig&&Pa(e.emulatorConfig.host)&&(f.credentials="include"),cw.fetch()(await uw(e,e.config.apiHost,n,l),f)})}async function hw(e,t,n){e._canInitEmulator=!1;const i={...ZM,...t};try{const r=new JM(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Sh(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(e,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Sh(e,"email-already-in-use",a);if(h==="USER_DISABLED")throw Sh(e,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lw(e,m,f);Ei(e,m)}}catch(r){if(r instanceof Ir)throw r;Ei(e,"network-request-failed",{message:String(r)})}}async function Mc(e,t,n,i,r={}){const s=await Es(e,t,n,i,r);return"mfaPendingCredential"in s&&Ei(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function uw(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Pp(e.config,r):`${e.config.apiScheme}://${r}`;return YM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function XM(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fi(this.auth,"network-request-failed")),QM.get())})}}function Sh(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fi(e,t,i);return r.customData._tokenResponse=n,r}function nv(e){return e!==void 0&&e.enterprise!==void 0}class tA{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return XM(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eA(e,t){return Es(e,"GET","/v2/recaptchaConfig",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(e,t){return Es(e,"POST","/v1/accounts:delete",t)}async function wu(e,t){return Es(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function iA(e,t=!1){const n=Ke(e),i=await n.getIdToken(t),r=Sp(i);Nt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:Dl(ud(r.auth_time)),issuedAtTime:Dl(ud(r.iat)),expirationTime:Dl(ud(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function ud(e){return Number(e)*1e3}function Sp(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const r=K1(n);return r?JSON.parse(r):($h("Failed to decode base64 JWT payload"),null)}catch(r){return $h("Caught error parsing JWT payload as JSON",r?.toString()),null}}function iv(e){const t=Sp(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ir&&rA(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function rA({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(e){const t=e.auth,n=await e.getIdToken(),i=await sc(e,wu(t,{idToken:n}));Nt(i?.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=r.providerUserInfo?.length?fw(r.providerUserInfo):[],a=aA(e.providerData,s),l=e.isAnonymous,h=!(e.email&&r.passwordHash)&&!a?.length,f=l?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new nm(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(e,m)}async function oA(e){const t=Ke(e);await Eu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function aA(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function fw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(e,t){const n=await hw(e,{},async()=>{const i=Sc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await uw(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:l,body:i};return e.emulatorConfig&&Pa(e.emulatorConfig.host)&&(h.credentials="include"),cw.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cA(e,t){return Es(e,"POST","/v2/accounts:revokeToken",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):iv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=iv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await lA(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ia;return i&&(Nt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(Nt(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(Nt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pi{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await sc(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return iA(this,t)}reload(){return oA(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new pi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Eu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(mr(this.auth));const t=await this.getIdToken();return await sc(this,nA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:E,providerData:T,stsTokenManager:P}=n;Nt(p&&P,t,"internal-error");const x=ia.fromJSON(this.name,P);Nt(typeof p=="string",t,"internal-error"),Gr(i,t.name),Gr(r,t.name),Nt(typeof g=="boolean",t,"internal-error"),Nt(typeof E=="boolean",t,"internal-error"),Gr(s,t.name),Gr(a,t.name),Gr(l,t.name),Gr(h,t.name),Gr(f,t.name),Gr(m,t.name);const O=new pi({uid:p,auth:t,email:r,emailVerified:g,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:x,createdAt:f,lastLoginAt:m});return T&&Array.isArray(T)&&(O.providerData=T.map(V=>({...V}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(t,n,i=!1){const r=new ia;r.updateFromServerResponse(n);const s=new pi({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Eu(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];Nt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?fw(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,l=new ia;l.updateFromIdToken(i);const h=new pi({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new nm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;function fr(e){wr(e instanceof Function,"Expected a class definition");let t=rv.get(e);return t?(wr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}dw.type="NONE";const sv=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(e,t,n){return`firebase:${e}:${t}:${n}`}class ra{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=jh(this.userKey,r.apiKey,s),this.fullPersistenceKey=jh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await wu(this.auth,{idToken:t}).catch(()=>{});return n?pi._fromGetAccountInfoResponse(this.auth,n,t):null}return pi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new ra(fr(sv),t,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=r[0]||fr(sv);const a=jh(i,t.config.apiKey,t.name);let l=null;for(const f of n)try{const m=await f._get(a);if(m){let p;if(typeof m=="string"){const g=await wu(t,{idToken:m}).catch(()=>{});if(!g)break;p=await pi._fromGetAccountInfoResponse(t,g,m)}else p=pi._fromJSON(t,m);f!==s&&(l=p),s=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new ra(s,t,i):(s=h[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new ra(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yw(t))return"Blackberry";if(ww(t))return"Webos";if(pw(t))return"Safari";if((t.includes("chrome/")||_w(t))&&!t.includes("edge/"))return"Chrome";if(vw(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function mw(e=vn()){return/firefox\//i.test(e)}function pw(e=vn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _w(e=vn()){return/crios\//i.test(e)}function gw(e=vn()){return/iemobile/i.test(e)}function vw(e=vn()){return/android/i.test(e)}function yw(e=vn()){return/blackberry/i.test(e)}function ww(e=vn()){return/webos/i.test(e)}function Ip(e=vn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hA(e=vn()){return Ip(e)&&!!window.navigator?.standalone}function uA(){return TI()&&document.documentMode===10}function Ew(e=vn()){return Ip(e)||vw(e)||ww(e)||yw(e)||/windows phone/i.test(e)||gw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(e,t=[]){let n;switch(e){case"Browser":n=ov(vn());break;case"Worker":n=`${ov(vn())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const h=t(s);a(h)}catch(h){l(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(e,t={}){return Es(e,"GET","/v2/passwordPolicy",ws(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=6;class pA{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new av(this),this.idTokenSubscription=new av(this),this.beforeStateQueue=new fA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ra.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await wu(this,{idToken:t}),i=await pi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ni(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(t);(!s||s===a)&&l?.user&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Eu(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=KM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ni(this.app))return Promise.reject(mr(this));const n=t?Ke(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ni(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dA(this),n=new pA(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Pc("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&fr(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await ra.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=t.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=t.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&qM(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ro(e){return Ke(e)}class av{constructor(t){this.auth=t,this.observer=null,this.addObserver=CI(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gA(e){df=e}function Tw(e){return df.loadJS(e)}function vA(){return df.recaptchaEnterpriseScript}function yA(){return df.gapiScript}function wA(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class EA{constructor(){this.enterprise=new bA}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class bA{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const TA="recaptcha-enterprise",Pw="NO_RECAPTCHA";class PA{constructor(t){this.type=TA,this.auth=ro(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{eA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new tA(h);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(h=>{l(h)})})}function r(s,a,l){const h=window.grecaptcha;nv(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:t}).then(f=>{a(f)}).catch(()=>{a(Pw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EA().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&nv(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=vA();h.length!==0&&(h+=l),Tw(h).then(()=>{r(l,s,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})}}async function lv(e,t,n,i=!1,r=!1){const s=new PA(e);let a;if(r)a=Pw;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const h=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const h=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function im(e,t,n,i,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await lv(e,t,n,n==="getOobCode");return i(e,s)}else return i(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await lv(e,t,n,n==="getOobCode");return i(e,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(e,t){const n=bp(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ks(s,t??{}))return r;Ei(r,"already-initialized")}return n.initialize({options:t})}function IA(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(fr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function MA(e,t,n){const i=ro(e);Nt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=Sw(t),{host:a,port:l}=AA(t),h=l===null?"":`:${l}`,f={url:`${s}//${a}${h}/`},m=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Nt(Ks(f,i.config.emulator)&&Ks(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Pa(a)?(X1(`${s}//${a}${h}`),J1("Auth",!0)):LA()}function Sw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function AA(e){const t=Sw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:cv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:cv(a)}}}function cv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function LA(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(t){return ur("not implemented")}_linkToIdToken(t,n){return ur("not implemented")}_getReauthenticationResolver(t){return ur("not implemented")}}async function xA(e,t){return Es(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(e,t){return Mc(e,"POST","/v1/accounts:signInWithPassword",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(e,t){return Mc(e,"POST","/v1/accounts:signInWithEmailLink",ws(e,t))}async function RA(e,t){return Mc(e,"POST","/v1/accounts:signInWithEmailLink",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Mp{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new oc(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new oc(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(t,n,"signInWithPassword",CA);case"emailLink":return kA(t,{email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(t,i,"signUpPassword",xA);case"emailLink":return RA(t,{idToken:n,email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(e,t){return Mc(e,"POST","/v1/accounts:signInWithIdp",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Ys extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ys(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Ys(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return sa(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,sa(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,sa(t,n)}buildRequest(){const t={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Sc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DA(e){const t=pl(_l(e)).link,n=t?pl(_l(t)).deep_link_id:null,i=pl(_l(e)).deep_link_id;return(i?pl(_l(i)).link:null)||i||n||t||e}class Ap{constructor(t){const n=pl(_l(t)),i=n.apiKey??null,r=n.oobCode??null,s=NA(n.mode??null);Nt(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=DA(t);try{return new Ap(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(t,n){return oc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=Ap.parseLink(n);return Nt(i,"argument-error"),oc._fromEmailAndCode(t,i.code,i.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Iw{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ac{constructor(){super("facebook.com")}static credential(t){return Ys._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jr.credential(t.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ys._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return qr.credentialFromTaggedObject(t)}static credentialFromError(t){return qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return qr.credential(n,i)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ac{constructor(){super("github.com")}static credential(t){return Ys._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hr.credentialFromTaggedObject(t)}static credentialFromError(t){return Hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hr.credential(t.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Ac{constructor(){super("twitter.com")}static credential(t,n){return Ys._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wr.credentialFromTaggedObject(t)}static credentialFromError(t){return Wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Wr.credential(n,i)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(e,t){return Mc(e,"POST","/v1/accounts:signUp",ws(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await pi._fromIdTokenResponse(t,i,r),a=hv(i);return new Qs({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=hv(i);return new Qs({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function hv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Ir{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new bu(t,n,i,r)}}function Mw(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bu._fromErrorAndOperation(e,s,t,i):s})}async function FA(e,t,n=!1){const i=await sc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qs._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(e,t,n=!1){const{auth:i}=e;if(ni(i.app))return Promise.reject(mr(i));const r="reauthenticate";try{const s=await sc(e,Mw(i,r,t,e),n);Nt(s.idToken,i,"internal-error");const a=Sp(s.idToken);Nt(a,i,"internal-error");const{sub:l}=a;return Nt(e.uid===l,i,"user-mismatch"),Qs._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ei(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(e,t,n=!1){if(ni(e.app))return Promise.reject(mr(e));const i="signIn",r=await Mw(e,i,t),s=await Qs._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function UA(e,t){return Aw(ro(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(e){const t=ro(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zA(e,t,n){if(ni(e.app))return Promise.reject(mr(e));const i=ro(e),a=await im(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VA).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Lw(e),h}),l=await Qs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function BA(e,t,n){return ni(e.app)?Promise.reject(mr(e)):UA(Ke(e),Ia.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lw(e),i})}function $A(e,t,n,i){return Ke(e).onIdTokenChanged(t,n,i)}function jA(e,t,n){return Ke(e).beforeAuthStateChanged(t,n)}function qA(e,t,n,i){return Ke(e).onAuthStateChanged(t,n,i)}function cV(e){return Ke(e).signOut()}const Tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tu,"1"),this.storage.removeItem(Tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e3,WA=10;class Cw extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ew(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);uA()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,WA):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Cw.type="LOCAL";const KA=Cw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kw.type="SESSION";const Rw=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new mf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async f=>f(n.origin,s)),h=await ZA(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,h)=>{const f=Lp("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(m),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function QA(e){Gi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function XA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){return navigator?.serviceWorker?.controller||null}function tL(){return Ow()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firebaseLocalStorageDb",eL=1,Pu="firebaseLocalStorage",Dw="fbase_key";class Lc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pf(e,t){return e.transaction([Pu],t?"readwrite":"readonly").objectStore(Pu)}function nL(){const e=indexedDB.deleteDatabase(Nw);return new Lc(e).toPromise()}function rm(){const e=indexedDB.open(Nw,eL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Pu,{keyPath:Dw})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Pu)?t(i):(i.close(),await nL(),t(await rm()))})})}async function uv(e,t,n){const i=pf(e,!0).put({[Dw]:t,value:n});return new Lc(i).toPromise()}async function iL(e,t){const n=pf(e,!1).get(t),i=await new Lc(n).toPromise();return i===void 0?null:i.value}function fv(e,t){const n=pf(e,!0).delete(t);return new Lc(n).toPromise()}const rL=800,sL=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>sL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(tL()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new YA(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await rm();return await uv(t,Tu,"1"),await fv(t,Tu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>uv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>iL(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=pf(r,!1).getAll();return new Lc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const oL=Vw;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(e,t){return t?fr(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Mp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return sa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return sa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return sa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function lL(e){return Aw(e.auth,new xp(e),e.bypassAuthState)}function cL(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),GA(n,new xp(e),e.bypassAuthState)}async function hL(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),FA(n,new xp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lL;case"linkViaPopup":case"linkViaRedirect":return hL;case"reauthViaPopup":case"reauthViaRedirect":return cL;default:Ei(this.auth,"internal-error")}}resolve(t){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Ic(2e3,1e4);class jo extends Fw{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const t=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,uL.get())};t()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="pendingRedirect",qh=new Map;class dL extends Fw{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=qh.get(this.auth._key());if(!t){try{const i=await mL(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}qh.set(this.auth._key(),t)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mL(e,t){const n=gL(t),i=_L(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function pL(e,t){qh.set(e._key(),t)}function _L(e){return fr(e._redirectPersistence)}function gL(e){return jh(fL,e.config.apiKey,e.name)}async function vL(e,t,n=!1){if(ni(e.app))return Promise.reject(mr(e));const i=ro(e),r=aL(i,t),a=await new dL(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=600*1e3;class wL{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!EL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!Gw(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Fi(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yL&&this.cachedEventUids.clear(),this.cachedEventUids.has(dv(t))}saveEventToCache(t){this.cachedEventUids.add(dv(t)),this.lastProcessedEventTime=Date.now()}}function dv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Gw({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function EL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gw(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(e,t={}){return Es(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PL=/^https?/;async function SL(e){if(e.config.emulator)return;const{authorizedDomains:t}=await bL(e);for(const n of t)try{if(IL(n))return}catch{}Ei(e,"unauthorized-domain")}function IL(e){const t=em(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!PL.test(n))return!1;if(TL.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new Ic(3e4,6e4);function mv(){const e=Gi().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function AL(e){return new Promise((t,n)=>{function i(){mv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mv(),n(Fi(e,"network-request-failed"))},timeout:ML.get()})}if(Gi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Gi().gapi?.load)i();else{const r=wA("iframefcb");return Gi()[r]=()=>{gapi.load?i():n(Fi(e,"network-request-failed"))},Tw(`${yA()}?onload=${r}`).catch(s=>n(s))}}).catch(t=>{throw Hh=null,t})}let Hh=null;function LL(e){return Hh=Hh||AL(e),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=new Ic(5e3,15e3),CL="__/auth/iframe",kL="emulator/auth/iframe",RL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NL(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Pp(t,kL):`https://${e.config.authDomain}/${CL}`,i={apiKey:t.apiKey,appName:e.name,v:Sa},r=OL.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Sc(i).slice(1)}`}async function DL(e){const t=await LL(e),n=Gi().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:NL(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RL,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Fi(e,"network-request-failed"),l=Gi().setTimeout(()=>{s(a)},xL.get());function h(){Gi().clearTimeout(l),r(i)}i.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FL=500,GL=600,UL="_blank",zL="http://localhost";class pv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BL(e,t,n,i=FL,r=GL){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const h={...VL,width:i.toString(),height:r.toString(),top:s,left:a},f=vn().toLowerCase();n&&(l=_w(f)?UL:n),mw(f)&&(t=t||zL,h.scrollbars="yes");const m=Object.entries(h).reduce((g,[E,T])=>`${g}${E}=${T},`,"");if(hA(f)&&l!=="_self")return $L(t||"",l),new pv(null);const p=window.open(t||"",l,m);Nt(p,e,"popup-blocked");try{p.focus()}catch{}return new pv(p)}function $L(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="__/auth/handler",qL="emulator/auth/handler",HL=encodeURIComponent("fac");async function _v(e,t,n,i,r,s){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Sa,eventId:r};if(t instanceof Iw){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",xI(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,p]of Object.entries({}))a[m]=p}if(t instanceof Ac){const m=t.getScopes().filter(p=>p!=="");m.length>0&&(a.scopes=m.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const h=await e._getAppCheckToken(),f=h?`#${HL}=${encodeURIComponent(h)}`:"";return`${WL(e)}?${Sc(l).slice(1)}${f}`}function WL({config:e}){return e.emulator?Pp(e,qL):`https://${e.authDomain}/${jL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="webStorageSupport";class KL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rw,this._completeRedirectFn=vL,this._overrideRedirectResult=pL}async _openPopup(t,n,i,r){wr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const s=await _v(t,n,i,em(),r);return BL(t,s,Lp())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await _v(t,n,i,em(),r);return QA(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(wr(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await DL(t),i=new wL(t);return n.register("authEvent",r=>(Nt(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(fd,{type:fd},r=>{const s=r?.[0]?.[fd];s!==void 0&&n(!!s),Ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ew()||pw()||Ip()}}const ZL=KL;var gv="@firebase/auth",vv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XL(e){fa(new Zs("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Nt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bw(e)},f=new _A(i,r,s,h);return IA(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),fa(new Zs("auth-internal",t=>{const n=ro(t.getProvider("auth").getImmediate());return(i=>new YL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(gv,vv,QL(e)),ts(gv,vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=300,t4=Q1("authIdTokenMaxAge")||JL;let yv=null;const e4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>t4)return;const r=n?.token;yv!==r&&(yv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Uw(e=iw()){const t=bp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=SA(e,{popupRedirectResolver:ZL,persistence:[oL,KA,Rw]}),i=Q1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=e4(s.toString());jA(n,a,()=>a(n.currentUser)),$A(n,l=>a(l))}}const r=Z1("auth");return r&&MA(n,`http://${r}`),n}function n4(){return document.getElementsByTagName("head")?.[0]??document}gA({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Fi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",n4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XL("Browser");const i4={apiKey:"AIzaSyCmVZOT5dlfoXKiC9eqcMp-1DIOk6B3in8",authDomain:"herramienta-gis-saas.firebaseapp.com",projectId:"herramienta-gis-saas",storageBucket:"herramienta-gis-saas.firebasestorage.app",messagingSenderId:"785359965839",appId:"1:785359965839:web:c85491e70a4cafef462afa"};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Fo=typeof document<"u";function zw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function r4(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&zw(e.default)}const se=Object.assign;function dd(e,t){const n={};for(const i in t){const r=t[i];n[i]=bi(r)?r.map(e):e(r)}return n}const Vl=()=>{},bi=Array.isArray,Bw=/#/g,s4=/&/g,o4=/\//g,a4=/=/g,l4=/\?/g,$w=/\+/g,c4=/%5B/g,h4=/%5D/g,jw=/%5E/g,u4=/%60/g,qw=/%7B/g,f4=/%7C/g,Hw=/%7D/g,d4=/%20/g;function Cp(e){return encodeURI(""+e).replace(f4,"|").replace(c4,"[").replace(h4,"]")}function m4(e){return Cp(e).replace(qw,"{").replace(Hw,"}").replace(jw,"^")}function sm(e){return Cp(e).replace($w,"%2B").replace(d4,"+").replace(Bw,"%23").replace(s4,"%26").replace(u4,"`").replace(qw,"{").replace(Hw,"}").replace(jw,"^")}function p4(e){return sm(e).replace(a4,"%3D")}function _4(e){return Cp(e).replace(Bw,"%23").replace(l4,"%3F")}function g4(e){return e==null?"":_4(e).replace(o4,"%2F")}function ac(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const v4=/\/$/,y4=e=>e.replace(v4,"");function md(e,t,n="/"){let i,r={},s="",a="";const l=t.indexOf("#");let h=t.indexOf("?");return l<h&&l>=0&&(h=-1),h>-1&&(i=t.slice(0,h),s=t.slice(h+1,l>-1?l:t.length),r=e(s)),l>-1&&(i=i||t.slice(0,l),a=t.slice(l,t.length)),i=T4(i??t,n),{fullPath:i+(s&&"?")+s+a,path:i,query:r,hash:ac(a)}}function w4(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function wv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function E4(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&da(t.matched[i],n.matched[r])&&Ww(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function da(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ww(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!b4(e[n],t[n]))return!1;return!0}function b4(e,t){return bi(e)?Ev(e,t):bi(t)?Ev(t,e):e===t}function Ev(e,t){return bi(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function T4(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,a,l;for(a=0;a<i.length;a++)if(l=i[a],l!==".")if(l==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(a).join("/")}const Ur={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var lc;(function(e){e.pop="pop",e.push="push"})(lc||(lc={}));var Fl;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Fl||(Fl={}));function P4(e){if(!e)if(Fo){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),y4(e)}const S4=/^[^#]+#/;function I4(e,t){return e.replace(S4,"#")+t}function M4(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const _f=()=>({left:window.scrollX,top:window.scrollY});function A4(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=M4(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bv(e,t){return(history.state?history.state.position-t:-1)+e}const om=new Map;function L4(e,t){om.set(e,t)}function x4(e){const t=om.get(e);return om.delete(e),t}let C4=()=>location.protocol+"//"+location.host;function Kw(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let l=r.includes(e.slice(s))?e.slice(s).length:1,h=r.slice(l);return h[0]!=="/"&&(h="/"+h),wv(h,"")}return wv(n,e)+i+r}function k4(e,t,n,i){let r=[],s=[],a=null;const l=({state:g})=>{const E=Kw(e,location),T=n.value,P=t.value;let x=0;if(g){if(n.value=E,t.value=g,a&&a===T){a=null;return}x=P?g.position-P.position:0}else i(E);r.forEach(O=>{O(n.value,T,{delta:x,type:lc.pop,direction:x?x>0?Fl.forward:Fl.back:Fl.unknown})})};function h(){a=n.value}function f(g){r.push(g);const E=()=>{const T=r.indexOf(g);T>-1&&r.splice(T,1)};return s.push(E),E}function m(){const{history:g}=window;g.state&&g.replaceState(se({},g.state,{scroll:_f()}),"")}function p(){for(const g of s)g();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:h,listen:f,destroy:p}}function Tv(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?_f():null}}function R4(e){const{history:t,location:n}=window,i={value:Kw(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(h,f,m){const p=e.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+h:C4()+e+h;try{t[m?"replaceState":"pushState"](f,"",g),r.value=f}catch(E){console.error(E),n[m?"replace":"assign"](g)}}function a(h,f){const m=se({},t.state,Tv(r.value.back,h,r.value.forward,!0),f,{position:r.value.position});s(h,m,!0),i.value=h}function l(h,f){const m=se({},r.value,t.state,{forward:h,scroll:_f()});s(m.current,m,!0);const p=se({},Tv(i.value,h,null),{position:m.position+1},f);s(h,p,!1),i.value=h}return{location:i,state:r,push:l,replace:a}}function O4(e){e=P4(e);const t=R4(e),n=k4(e,t.state,t.location,t.replace);function i(s,a=!0){a||n.pauseListeners(),history.go(s)}const r=se({location:"",base:e,go:i,createHref:I4.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function N4(e){return typeof e=="string"||e&&typeof e=="object"}function Zw(e){return typeof e=="string"||typeof e=="symbol"}const Yw=Symbol("");var Pv;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Pv||(Pv={}));function ma(e,t){return se(new Error,{type:e,[Yw]:!0},t)}function or(e,t){return e instanceof Error&&Yw in e&&(t==null||!!(e.type&t))}const Sv="[^/]+?",D4={sensitive:!1,strict:!1,start:!0,end:!0},V4=/[.+*?^${}()[\]/\\]/g;function F4(e,t){const n=se({},D4,t),i=[];let r=n.start?"^":"";const s=[];for(const f of e){const m=f.length?[]:[90];n.strict&&!f.length&&(r+="/");for(let p=0;p<f.length;p++){const g=f[p];let E=40+(n.sensitive?.25:0);if(g.type===0)p||(r+="/"),r+=g.value.replace(V4,"\\$&"),E+=40;else if(g.type===1){const{value:T,repeatable:P,optional:x,regexp:O}=g;s.push({name:T,repeatable:P,optional:x});const V=O||Sv;if(V!==Sv){E+=10;try{new RegExp(`(${V})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${T}" (${V}): `+q.message)}}let U=P?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;p||(U=x&&f.length<2?`(?:/${U})`:"/"+U),x&&(U+="?"),r+=U,E+=20,x&&(E+=-8),P&&(E+=-20),V===".*"&&(E+=-50)}m.push(E)}i.push(m)}if(n.strict&&n.end){const f=i.length-1;i[f][i[f].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,n.sensitive?"":"i");function l(f){const m=f.match(a),p={};if(!m)return null;for(let g=1;g<m.length;g++){const E=m[g]||"",T=s[g-1];p[T.name]=E&&T.repeatable?E.split("/"):E}return p}function h(f){let m="",p=!1;for(const g of e){(!p||!m.endsWith("/"))&&(m+="/"),p=!1;for(const E of g)if(E.type===0)m+=E.value;else if(E.type===1){const{value:T,repeatable:P,optional:x}=E,O=T in f?f[T]:"";if(bi(O)&&!P)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const V=bi(O)?O.join("/"):O;if(!V)if(x)g.length<2&&(m.endsWith("/")?m=m.slice(0,-1):p=!0);else throw new Error(`Missing required param "${T}"`);m+=V}}return m||"/"}return{re:a,score:i,keys:s,parse:l,stringify:h}}function G4(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Qw(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=G4(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(Iv(i))return 1;if(Iv(r))return-1}return r.length-i.length}function Iv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const U4={type:0,value:""},z4=/[a-zA-Z0-9_]/;function B4(e){if(!e)return[[]];if(e==="/")return[[U4]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(E){throw new Error(`ERR (${n})/"${f}": ${E}`)}let n=0,i=n;const r=[];let s;function a(){s&&r.push(s),s=[]}let l=0,h,f="",m="";function p(){f&&(n===0?s.push({type:0,value:f}):n===1||n===2||n===3?(s.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:f,regexp:m,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),f="")}function g(){f+=h}for(;l<e.length;){if(h=e[l++],h==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:h==="/"?(f&&p(),a()):h===":"?(p(),n=1):g();break;case 4:g(),n=i;break;case 1:h==="("?n=2:z4.test(h)?g():(p(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&l--);break;case 2:h===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+h:n=3:m+=h;break;case 3:p(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&l--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${f}"`),p(),a(),r}function $4(e,t,n){const i=F4(B4(e.path),n),r=se(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function j4(e,t){const n=[],i=new Map;t=xv({strict:!1,end:!0,sensitive:!1},t);function r(p){return i.get(p)}function s(p,g,E){const T=!E,P=Av(p);P.aliasOf=E&&E.record;const x=xv(t,p),O=[P];if("alias"in p){const q=typeof p.alias=="string"?[p.alias]:p.alias;for(const J of q)O.push(Av(se({},P,{components:E?E.record.components:P.components,path:J,aliasOf:E?E.record:P})))}let V,U;for(const q of O){const{path:J}=q;if(g&&J[0]!=="/"){const at=g.record.path,k=at[at.length-1]==="/"?"":"/";q.path=g.record.path+(J&&k+J)}if(V=$4(q,g,x),E?E.alias.push(V):(U=U||V,U!==V&&U.alias.push(V),T&&p.name&&!Lv(V)&&a(p.name)),Xw(V)&&h(V),P.children){const at=P.children;for(let k=0;k<at.length;k++)s(at[k],V,E&&E.children[k])}E=E||V}return U?()=>{a(U)}:Vl}function a(p){if(Zw(p)){const g=i.get(p);g&&(i.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&i.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function h(p){const g=W4(p,n);n.splice(g,0,p),p.record.name&&!Lv(p)&&i.set(p.record.name,p)}function f(p,g){let E,T={},P,x;if("name"in p&&p.name){if(E=i.get(p.name),!E)throw ma(1,{location:p});x=E.record.name,T=se(Mv(g.params,E.keys.filter(U=>!U.optional).concat(E.parent?E.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),p.params&&Mv(p.params,E.keys.map(U=>U.name))),P=E.stringify(T)}else if(p.path!=null)P=p.path,E=n.find(U=>U.re.test(P)),E&&(T=E.parse(P),x=E.record.name);else{if(E=g.name?i.get(g.name):n.find(U=>U.re.test(g.path)),!E)throw ma(1,{location:p,currentLocation:g});x=E.record.name,T=se({},g.params,p.params),P=E.stringify(T)}const O=[];let V=E;for(;V;)O.unshift(V.record),V=V.parent;return{name:x,path:P,params:T,matched:O,meta:H4(O)}}e.forEach(p=>s(p));function m(){n.length=0,i.clear()}return{addRoute:s,resolve:f,removeRoute:a,clearRoutes:m,getRoutes:l,getRecordMatcher:r}}function Mv(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function Av(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:q4(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function q4(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Lv(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function H4(e){return e.reduce((t,n)=>se(t,n.meta),{})}function xv(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function W4(e,t){let n=0,i=t.length;for(;n!==i;){const s=n+i>>1;Qw(e,t[s])<0?i=s:n=s+1}const r=K4(e);return r&&(i=t.lastIndexOf(r,i-1)),i}function K4(e){let t=e;for(;t=t.parent;)if(Xw(t)&&Qw(e,t)===0)return t}function Xw({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Z4(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace($w," "),a=s.indexOf("="),l=ac(a<0?s:s.slice(0,a)),h=a<0?null:ac(s.slice(a+1));if(l in t){let f=t[l];bi(f)||(f=t[l]=[f]),f.push(h)}else t[l]=h}return t}function Cv(e){let t="";for(let n in e){const i=e[n];if(n=p4(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(bi(i)?i.map(s=>s&&sm(s)):[i&&sm(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Y4(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=bi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const Q4=Symbol(""),kv=Symbol(""),gf=Symbol(""),kp=Symbol(""),am=Symbol("");function hl(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function $r(e,t,n,i,r,s=a=>a()){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((l,h)=>{const f=g=>{g===!1?h(ma(4,{from:n,to:t})):g instanceof Error?h(g):N4(g)?h(ma(2,{from:t,to:g})):(a&&i.enterCallbacks[r]===a&&typeof g=="function"&&a.push(g),l())},m=s(()=>e.call(i&&i.instances[r],t,n,f));let p=Promise.resolve(m);e.length<3&&(p=p.then(f)),p.catch(g=>h(g))})}function pd(e,t,n,i,r=s=>s()){const s=[];for(const a of e)for(const l in a.components){let h=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(zw(h)){const m=(h.__vccOpts||h)[t];m&&s.push($r(m,n,i,a,l,r))}else{let f=h();s.push(()=>f.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=r4(m)?m.default:m;a.mods[l]=m,a.components[l]=p;const E=(p.__vccOpts||p)[t];return E&&$r(E,n,i,a,l,r)()}))}}return s}function Rv(e){const t=si(gf),n=si(kp),i=$e(()=>{const h=Jo(e.to);return t.resolve(h)}),r=$e(()=>{const{matched:h}=i.value,{length:f}=h,m=h[f-1],p=n.matched;if(!m||!p.length)return-1;const g=p.findIndex(da.bind(null,m));if(g>-1)return g;const E=Ov(h[f-2]);return f>1&&Ov(m)===E&&p[p.length-1].path!==E?p.findIndex(da.bind(null,h[f-2])):g}),s=$e(()=>r.value>-1&&nx(n.params,i.value.params)),a=$e(()=>r.value>-1&&r.value===n.matched.length-1&&Ww(n.params,i.value.params));function l(h={}){if(ex(h)){const f=t[Jo(e.replace)?"replace":"push"](Jo(e.to)).catch(Vl);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:i,href:$e(()=>i.value.href),isActive:s,isExactActive:a,navigate:l}}function X4(e){return e.length===1?e[0]:e}const J4=fp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rv,setup(e,{slots:t}){const n=rf(Rv(e)),{options:i}=si(gf),r=$e(()=>({[Nv(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Nv(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&X4(t.default(n));return e.custom?s:yp("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),tx=J4;function ex(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function nx(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!bi(r)||r.length!==i.length||i.some((s,a)=>s!==r[a]))return!1}return!0}function Ov(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Nv=(e,t,n)=>e??t??n,ix=fp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=si(am),r=$e(()=>e.route||i.value),s=si(kv,0),a=$e(()=>{let f=Jo(s);const{matched:m}=r.value;let p;for(;(p=m[f])&&!p.components;)f++;return f}),l=$e(()=>r.value.matched[a.value]);Uh(kv,$e(()=>a.value+1)),Uh(Q4,l),Uh(am,r);const h=ue();return dr(()=>[h.value,l.value,e.name],([f,m,p],[g,E,T])=>{m&&(m.instances[p]=f,E&&E!==m&&f&&f===g&&(m.leaveGuards.size||(m.leaveGuards=E.leaveGuards),m.updateGuards.size||(m.updateGuards=E.updateGuards))),f&&m&&(!E||!da(m,E)||!g)&&(m.enterCallbacks[p]||[]).forEach(P=>P(f))},{flush:"post"}),()=>{const f=r.value,m=e.name,p=l.value,g=p&&p.components[m];if(!g)return Dv(n.default,{Component:g,route:f});const E=p.props[m],T=E?E===!0?f.params:typeof E=="function"?E(f):E:null,x=yp(g,se({},T,t,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(p.instances[m]=null)},ref:h}));return Dv(n.default,{Component:x,route:f})||x}}});function Dv(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const rx=ix;function sx(e){const t=j4(e.routes,e),n=e.parseQuery||Z4,i=e.stringifyQuery||Cv,r=e.history,s=hl(),a=hl(),l=hl(),h=pS(Ur);let f=Ur;Fo&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=dd.bind(null,j=>""+j),p=dd.bind(null,g4),g=dd.bind(null,ac);function E(j,it){let pt,Et;return Zw(j)?(pt=t.getRecordMatcher(j),Et=it):Et=j,t.addRoute(Et,pt)}function T(j){const it=t.getRecordMatcher(j);it&&t.removeRoute(it)}function P(){return t.getRoutes().map(j=>j.record)}function x(j){return!!t.getRecordMatcher(j)}function O(j,it){if(it=se({},it||h.value),typeof j=="string"){const z=md(n,j,it.path),Z=t.resolve({path:z.path},it),Y=r.createHref(z.fullPath);return se(z,Z,{params:g(Z.params),hash:ac(z.hash),redirectedFrom:void 0,href:Y})}let pt;if(j.path!=null)pt=se({},j,{path:md(n,j.path,it.path).path});else{const z=se({},j.params);for(const Z in z)z[Z]==null&&delete z[Z];pt=se({},j,{params:p(z)}),it.params=p(it.params)}const Et=t.resolve(pt,it),Wt=j.hash||"";Et.params=m(g(Et.params));const A=w4(i,se({},j,{hash:m4(Wt),path:Et.path})),R=r.createHref(A);return se({fullPath:A,hash:Wt,query:i===Cv?Y4(j.query):j.query||{}},Et,{redirectedFrom:void 0,href:R})}function V(j){return typeof j=="string"?md(n,j,h.value.path):se({},j)}function U(j,it){if(f!==j)return ma(8,{from:it,to:j})}function q(j){return k(j)}function J(j){return q(se(V(j),{replace:!0}))}function at(j){const it=j.matched[j.matched.length-1];if(it&&it.redirect){const{redirect:pt}=it;let Et=typeof pt=="function"?pt(j):pt;return typeof Et=="string"&&(Et=Et.includes("?")||Et.includes("#")?Et=V(Et):{path:Et},Et.params={}),se({query:j.query,hash:j.hash,params:Et.path!=null?{}:j.params},Et)}}function k(j,it){const pt=f=O(j),Et=h.value,Wt=j.state,A=j.force,R=j.replace===!0,z=at(pt);if(z)return k(se(V(z),{state:typeof z=="object"?se({},Wt,z.state):Wt,force:A,replace:R}),it||pt);const Z=pt;Z.redirectedFrom=it;let Y;return!A&&E4(i,Et,pt)&&(Y=ma(16,{to:Z,from:Et}),Ht(Et,Et,!0,!1)),(Y?Promise.resolve(Y):F(Z,Et)).catch(K=>or(K)?or(K,2)?K:It(K):ft(K,Z,Et)).then(K=>{if(K){if(or(K,2))return k(se({replace:R},V(K.to),{state:typeof K.to=="object"?se({},Wt,K.to.state):Wt,force:A}),it||Z)}else K=G(Z,Et,!0,R,Wt);return D(Z,Et,K),K})}function I(j,it){const pt=U(j,it);return pt?Promise.reject(pt):Promise.resolve()}function M(j){const it=Pt.values().next().value;return it&&typeof it.runWithContext=="function"?it.runWithContext(j):j()}function F(j,it){let pt;const[Et,Wt,A]=ox(j,it);pt=pd(Et.reverse(),"beforeRouteLeave",j,it);for(const z of Et)z.leaveGuards.forEach(Z=>{pt.push($r(Z,j,it))});const R=I.bind(null,j,it);return pt.push(R),Tt(pt).then(()=>{pt=[];for(const z of s.list())pt.push($r(z,j,it));return pt.push(R),Tt(pt)}).then(()=>{pt=pd(Wt,"beforeRouteUpdate",j,it);for(const z of Wt)z.updateGuards.forEach(Z=>{pt.push($r(Z,j,it))});return pt.push(R),Tt(pt)}).then(()=>{pt=[];for(const z of A)if(z.beforeEnter)if(bi(z.beforeEnter))for(const Z of z.beforeEnter)pt.push($r(Z,j,it));else pt.push($r(z.beforeEnter,j,it));return pt.push(R),Tt(pt)}).then(()=>(j.matched.forEach(z=>z.enterCallbacks={}),pt=pd(A,"beforeRouteEnter",j,it,M),pt.push(R),Tt(pt))).then(()=>{pt=[];for(const z of a.list())pt.push($r(z,j,it));return pt.push(R),Tt(pt)}).catch(z=>or(z,8)?z:Promise.reject(z))}function D(j,it,pt){l.list().forEach(Et=>M(()=>Et(j,it,pt)))}function G(j,it,pt,Et,Wt){const A=U(j,it);if(A)return A;const R=it===Ur,z=Fo?history.state:{};pt&&(Et||R?r.replace(j.fullPath,se({scroll:R&&z&&z.scroll},Wt)):r.push(j.fullPath,Wt)),h.value=j,Ht(j,it,pt,R),It()}let C;function fe(){C||(C=r.listen((j,it,pt)=>{if(!mt.listening)return;const Et=O(j),Wt=at(Et);if(Wt){k(se(Wt,{replace:!0,force:!0}),Et).catch(Vl);return}f=Et;const A=h.value;Fo&&L4(bv(A.fullPath,pt.delta),_f()),F(Et,A).catch(R=>or(R,12)?R:or(R,2)?(k(se(V(R.to),{force:!0}),Et).then(z=>{or(z,20)&&!pt.delta&&pt.type===lc.pop&&r.go(-1,!1)}).catch(Vl),Promise.reject()):(pt.delta&&r.go(-pt.delta,!1),ft(R,Et,A))).then(R=>{R=R||G(Et,A,!1),R&&(pt.delta&&!or(R,8)?r.go(-pt.delta,!1):pt.type===lc.pop&&or(R,20)&&r.go(-1,!1)),D(Et,A,R)}).catch(Vl)}))}let ln=hl(),Zt=hl(),qt;function ft(j,it,pt){It(j);const Et=Zt.list();return Et.length?Et.forEach(Wt=>Wt(j,it,pt)):console.error(j),Promise.reject(j)}function Ze(){return qt&&h.value!==Ur?Promise.resolve():new Promise((j,it)=>{ln.add([j,it])})}function It(j){return qt||(qt=!j,fe(),ln.list().forEach(([it,pt])=>j?pt(j):it()),ln.reset()),j}function Ht(j,it,pt,Et){const{scrollBehavior:Wt}=e;if(!Fo||!Wt)return Promise.resolve();const A=!pt&&x4(bv(j.fullPath,0))||(Et||!pt)&&history.state&&history.state.scroll||null;return Jl().then(()=>Wt(j,it,A)).then(R=>R&&A4(R)).catch(R=>ft(R,j,it))}const rt=j=>r.go(j);let ht;const Pt=new Set,mt={currentRoute:h,listening:!0,addRoute:E,removeRoute:T,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:P,resolve:O,options:e,push:q,replace:J,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:s.add,beforeResolve:a.add,afterEach:l.add,onError:Zt.add,isReady:Ze,install(j){const it=this;j.component("RouterLink",tx),j.component("RouterView",rx),j.config.globalProperties.$router=it,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Jo(h)}),Fo&&!ht&&h.value===Ur&&(ht=!0,q(r.location).catch(Wt=>{}));const pt={};for(const Wt in Ur)Object.defineProperty(pt,Wt,{get:()=>h.value[Wt],enumerable:!0});j.provide(gf,it),j.provide(kp,a1(pt)),j.provide(am,h);const Et=j.unmount;Pt.add(j),j.unmount=function(){Pt.delete(j),Pt.size<1&&(f=Ur,C&&C(),C=null,h.value=Ur,ht=!1,qt=!1),Et()}}};function Tt(j){return j.reduce((it,pt)=>it.then(()=>M(pt)),Promise.resolve())}return mt}function ox(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const l=t.matched[a];l&&(e.matched.find(f=>da(f,l))?i.push(l):n.push(l));const h=e.matched[a];h&&(t.matched.find(f=>da(f,h))||r.push(h))}return[n,i,r]}function ax(){return si(gf)}function lx(e){return si(kp)}const so=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},cx={class:"auth-page"},hx={class:"auth-card"},ux={class:"form-group"},fx={class:"form-group"},dx={type:"submit",class:"auth-button"},mx={__name:"Auth",setup(e){const t=ue(""),n=ue(""),i=ue(!0),r=ax(),s=Uw(),a=async()=>{if(i.value)try{await BA(s,t.value,n.value),r.push("/dashboard")}catch(l){alert("Error al iniciar sesión: "+l.message)}else try{await zA(s,t.value,n.value),alert("¡Registro exitoso! Ahora puedes iniciar sesión."),i.value=!0}catch(l){alert("Error en el registro: "+l.message)}};return(l,h)=>(pe(),ke("div",cx,[dt("div",hx,[dt("h1",null,Ce(i.value?"Iniciar Sesión":"Registrarse"),1),dt("form",{onSubmit:uf(a,["prevent"])},[dt("div",ux,[h[3]||(h[3]=dt("label",{for:"email"},"Email",-1)),fu(dt("input",{id:"email",type:"email","onUpdate:modelValue":h[0]||(h[0]=f=>t.value=f),required:""},null,512),[[_u,t.value]])]),dt("div",fx,[h[4]||(h[4]=dt("label",{for:"password"},"Contraseña",-1)),fu(dt("input",{id:"password",type:"password","onUpdate:modelValue":h[1]||(h[1]=f=>n.value=f),required:""},null,512),[[_u,n.value]])]),dt("button",dx,Ce(i.value?"Iniciar Sesión":"Crear Cuenta"),1)],32),dt("p",{class:"toggle-link",onClick:h[2]||(h[2]=f=>i.value=!i.value)},Ce(i.value?"¿No tienes cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"),1)])]))}},px=so(mx,[["__scopeId","data-v-101b55f7"]]);var Vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,Jw;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,I){function M(){}M.prototype=I.prototype,k.D=I.prototype,k.prototype=new M,k.prototype.constructor=k,k.C=function(F,D,G){for(var C=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)C[fe-2]=arguments[fe];return I.prototype[D].apply(F,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,I,M){M||(M=0);var F=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)F[D]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(D=0;16>D;++D)F[D]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=k.g[0],M=k.g[1],D=k.g[2];var G=k.g[3],C=I+(G^M&(D^G))+F[0]+3614090360&4294967295;I=M+(C<<7&4294967295|C>>>25),C=G+(D^I&(M^D))+F[1]+3905402710&4294967295,G=I+(C<<12&4294967295|C>>>20),C=D+(M^G&(I^M))+F[2]+606105819&4294967295,D=G+(C<<17&4294967295|C>>>15),C=M+(I^D&(G^I))+F[3]+3250441966&4294967295,M=D+(C<<22&4294967295|C>>>10),C=I+(G^M&(D^G))+F[4]+4118548399&4294967295,I=M+(C<<7&4294967295|C>>>25),C=G+(D^I&(M^D))+F[5]+1200080426&4294967295,G=I+(C<<12&4294967295|C>>>20),C=D+(M^G&(I^M))+F[6]+2821735955&4294967295,D=G+(C<<17&4294967295|C>>>15),C=M+(I^D&(G^I))+F[7]+4249261313&4294967295,M=D+(C<<22&4294967295|C>>>10),C=I+(G^M&(D^G))+F[8]+1770035416&4294967295,I=M+(C<<7&4294967295|C>>>25),C=G+(D^I&(M^D))+F[9]+2336552879&4294967295,G=I+(C<<12&4294967295|C>>>20),C=D+(M^G&(I^M))+F[10]+4294925233&4294967295,D=G+(C<<17&4294967295|C>>>15),C=M+(I^D&(G^I))+F[11]+2304563134&4294967295,M=D+(C<<22&4294967295|C>>>10),C=I+(G^M&(D^G))+F[12]+1804603682&4294967295,I=M+(C<<7&4294967295|C>>>25),C=G+(D^I&(M^D))+F[13]+4254626195&4294967295,G=I+(C<<12&4294967295|C>>>20),C=D+(M^G&(I^M))+F[14]+2792965006&4294967295,D=G+(C<<17&4294967295|C>>>15),C=M+(I^D&(G^I))+F[15]+1236535329&4294967295,M=D+(C<<22&4294967295|C>>>10),C=I+(D^G&(M^D))+F[1]+4129170786&4294967295,I=M+(C<<5&4294967295|C>>>27),C=G+(M^D&(I^M))+F[6]+3225465664&4294967295,G=I+(C<<9&4294967295|C>>>23),C=D+(I^M&(G^I))+F[11]+643717713&4294967295,D=G+(C<<14&4294967295|C>>>18),C=M+(G^I&(D^G))+F[0]+3921069994&4294967295,M=D+(C<<20&4294967295|C>>>12),C=I+(D^G&(M^D))+F[5]+3593408605&4294967295,I=M+(C<<5&4294967295|C>>>27),C=G+(M^D&(I^M))+F[10]+38016083&4294967295,G=I+(C<<9&4294967295|C>>>23),C=D+(I^M&(G^I))+F[15]+3634488961&4294967295,D=G+(C<<14&4294967295|C>>>18),C=M+(G^I&(D^G))+F[4]+3889429448&4294967295,M=D+(C<<20&4294967295|C>>>12),C=I+(D^G&(M^D))+F[9]+568446438&4294967295,I=M+(C<<5&4294967295|C>>>27),C=G+(M^D&(I^M))+F[14]+3275163606&4294967295,G=I+(C<<9&4294967295|C>>>23),C=D+(I^M&(G^I))+F[3]+4107603335&4294967295,D=G+(C<<14&4294967295|C>>>18),C=M+(G^I&(D^G))+F[8]+1163531501&4294967295,M=D+(C<<20&4294967295|C>>>12),C=I+(D^G&(M^D))+F[13]+2850285829&4294967295,I=M+(C<<5&4294967295|C>>>27),C=G+(M^D&(I^M))+F[2]+4243563512&4294967295,G=I+(C<<9&4294967295|C>>>23),C=D+(I^M&(G^I))+F[7]+1735328473&4294967295,D=G+(C<<14&4294967295|C>>>18),C=M+(G^I&(D^G))+F[12]+2368359562&4294967295,M=D+(C<<20&4294967295|C>>>12),C=I+(M^D^G)+F[5]+4294588738&4294967295,I=M+(C<<4&4294967295|C>>>28),C=G+(I^M^D)+F[8]+2272392833&4294967295,G=I+(C<<11&4294967295|C>>>21),C=D+(G^I^M)+F[11]+1839030562&4294967295,D=G+(C<<16&4294967295|C>>>16),C=M+(D^G^I)+F[14]+4259657740&4294967295,M=D+(C<<23&4294967295|C>>>9),C=I+(M^D^G)+F[1]+2763975236&4294967295,I=M+(C<<4&4294967295|C>>>28),C=G+(I^M^D)+F[4]+1272893353&4294967295,G=I+(C<<11&4294967295|C>>>21),C=D+(G^I^M)+F[7]+4139469664&4294967295,D=G+(C<<16&4294967295|C>>>16),C=M+(D^G^I)+F[10]+3200236656&4294967295,M=D+(C<<23&4294967295|C>>>9),C=I+(M^D^G)+F[13]+681279174&4294967295,I=M+(C<<4&4294967295|C>>>28),C=G+(I^M^D)+F[0]+3936430074&4294967295,G=I+(C<<11&4294967295|C>>>21),C=D+(G^I^M)+F[3]+3572445317&4294967295,D=G+(C<<16&4294967295|C>>>16),C=M+(D^G^I)+F[6]+76029189&4294967295,M=D+(C<<23&4294967295|C>>>9),C=I+(M^D^G)+F[9]+3654602809&4294967295,I=M+(C<<4&4294967295|C>>>28),C=G+(I^M^D)+F[12]+3873151461&4294967295,G=I+(C<<11&4294967295|C>>>21),C=D+(G^I^M)+F[15]+530742520&4294967295,D=G+(C<<16&4294967295|C>>>16),C=M+(D^G^I)+F[2]+3299628645&4294967295,M=D+(C<<23&4294967295|C>>>9),C=I+(D^(M|~G))+F[0]+4096336452&4294967295,I=M+(C<<6&4294967295|C>>>26),C=G+(M^(I|~D))+F[7]+1126891415&4294967295,G=I+(C<<10&4294967295|C>>>22),C=D+(I^(G|~M))+F[14]+2878612391&4294967295,D=G+(C<<15&4294967295|C>>>17),C=M+(G^(D|~I))+F[5]+4237533241&4294967295,M=D+(C<<21&4294967295|C>>>11),C=I+(D^(M|~G))+F[12]+1700485571&4294967295,I=M+(C<<6&4294967295|C>>>26),C=G+(M^(I|~D))+F[3]+2399980690&4294967295,G=I+(C<<10&4294967295|C>>>22),C=D+(I^(G|~M))+F[10]+4293915773&4294967295,D=G+(C<<15&4294967295|C>>>17),C=M+(G^(D|~I))+F[1]+2240044497&4294967295,M=D+(C<<21&4294967295|C>>>11),C=I+(D^(M|~G))+F[8]+1873313359&4294967295,I=M+(C<<6&4294967295|C>>>26),C=G+(M^(I|~D))+F[15]+4264355552&4294967295,G=I+(C<<10&4294967295|C>>>22),C=D+(I^(G|~M))+F[6]+2734768916&4294967295,D=G+(C<<15&4294967295|C>>>17),C=M+(G^(D|~I))+F[13]+1309151649&4294967295,M=D+(C<<21&4294967295|C>>>11),C=I+(D^(M|~G))+F[4]+4149444226&4294967295,I=M+(C<<6&4294967295|C>>>26),C=G+(M^(I|~D))+F[11]+3174756917&4294967295,G=I+(C<<10&4294967295|C>>>22),C=D+(I^(G|~M))+F[2]+718787259&4294967295,D=G+(C<<15&4294967295|C>>>17),C=M+(G^(D|~I))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+G&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var M=I-this.blockSize,F=this.B,D=this.h,G=0;G<I;){if(D==0)for(;G<=M;)r(this,k,G),G+=this.blockSize;if(typeof k=="string"){for(;G<I;)if(F[D++]=k.charCodeAt(G++),D==this.blockSize){r(this,F),D=0;break}}else for(;G<I;)if(F[D++]=k[G++],D==this.blockSize){r(this,F),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var M=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=M&255,M/=256;for(this.u(k),k=Array(16),I=M=0;4>I;++I)for(var F=0;32>F;F+=8)k[M++]=this.g[I]>>>F&255;return k};function s(k,I){var M=l;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=I(k)}function a(k,I){this.h=I;for(var M=[],F=!0,D=k.length-1;0<=D;D--){var G=k[D]|0;F&&G==I||(M[D]=G,F=!1)}this.g=M}var l={};function h(k){return-128<=k&&128>k?s(k,function(I){return new a([I|0],0>I?-1:0)}):new a([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return x(f(-k));for(var I=[],M=1,F=0;k>=M;F++)I[F]=k/M|0,M*=4294967296;return new a(I,0)}function m(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return x(m(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=f(Math.pow(I,8)),F=p,D=0;D<k.length;D+=8){var G=Math.min(8,k.length-D),C=parseInt(k.substring(D,D+G),I);8>G?(G=f(Math.pow(I,G)),F=F.j(G).add(f(C))):(F=F.j(M),F=F.add(f(C)))}return F}var p=h(0),g=h(1),E=h(16777216);e=a.prototype,e.m=function(){if(P(this))return-x(this).m();for(var k=0,I=1,M=0;M<this.g.length;M++){var F=this.i(M);k+=(0<=F?F:4294967296+F)*I,I*=4294967296}return k},e.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(P(this))return"-"+x(this).toString(k);for(var I=f(Math.pow(k,6)),M=this,F="";;){var D=q(M,I).g;M=O(M,D.j(I));var G=((0<M.g.length?M.g[0]:M.h)>>>0).toString(k);if(M=D,T(M))return G+F;for(;6>G.length;)G="0"+G;F=G+F}},e.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function P(k){return k.h==-1}e.l=function(k){return k=O(this,k),P(k)?-1:T(k)?0:1};function x(k){for(var I=k.g.length,M=[],F=0;F<I;F++)M[F]=~k.g[F];return new a(M,~k.h).add(g)}e.abs=function(){return P(this)?x(this):this},e.add=function(k){for(var I=Math.max(this.g.length,k.g.length),M=[],F=0,D=0;D<=I;D++){var G=F+(this.i(D)&65535)+(k.i(D)&65535),C=(G>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);F=C>>>16,G&=65535,C&=65535,M[D]=C<<16|G}return new a(M,M[M.length-1]&-2147483648?-1:0)};function O(k,I){return k.add(x(I))}e.j=function(k){if(T(this)||T(k))return p;if(P(this))return P(k)?x(this).j(x(k)):x(x(this).j(k));if(P(k))return x(this.j(x(k)));if(0>this.l(E)&&0>k.l(E))return f(this.m()*k.m());for(var I=this.g.length+k.g.length,M=[],F=0;F<2*I;F++)M[F]=0;for(F=0;F<this.g.length;F++)for(var D=0;D<k.g.length;D++){var G=this.i(F)>>>16,C=this.i(F)&65535,fe=k.i(D)>>>16,ln=k.i(D)&65535;M[2*F+2*D]+=C*ln,V(M,2*F+2*D),M[2*F+2*D+1]+=G*ln,V(M,2*F+2*D+1),M[2*F+2*D+1]+=C*fe,V(M,2*F+2*D+1),M[2*F+2*D+2]+=G*fe,V(M,2*F+2*D+2)}for(F=0;F<I;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=I;F<2*I;F++)M[F]=0;return new a(M,0)};function V(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function U(k,I){this.g=k,this.h=I}function q(k,I){if(T(I))throw Error("division by zero");if(T(k))return new U(p,p);if(P(k))return I=q(x(k),I),new U(x(I.g),x(I.h));if(P(I))return I=q(k,x(I)),new U(x(I.g),I.h);if(30<k.g.length){if(P(k)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var M=g,F=I;0>=F.l(k);)M=J(M),F=J(F);var D=at(M,1),G=at(F,1);for(F=at(F,2),M=at(M,2);!T(F);){var C=G.add(F);0>=C.l(k)&&(D=D.add(M),G=C),F=at(F,1),M=at(M,1)}return I=O(k,D.j(I)),new U(D,I)}for(D=p;0<=k.l(I);){for(M=Math.max(1,Math.floor(k.m()/I.m())),F=Math.ceil(Math.log(M)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),G=f(M),C=G.j(I);P(C)||0<C.l(k);)M-=F,G=f(M),C=G.j(I);T(G)&&(G=g),D=D.add(G),k=O(k,C)}return new U(D,k)}e.A=function(k){return q(this,k).h},e.and=function(k){for(var I=Math.max(this.g.length,k.g.length),M=[],F=0;F<I;F++)M[F]=this.i(F)&k.i(F);return new a(M,this.h&k.h)},e.or=function(k){for(var I=Math.max(this.g.length,k.g.length),M=[],F=0;F<I;F++)M[F]=this.i(F)|k.i(F);return new a(M,this.h|k.h)},e.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),M=[],F=0;F<I;F++)M[F]=this.i(F)^k.i(F);return new a(M,this.h^k.h)};function J(k){for(var I=k.g.length+1,M=[],F=0;F<I;F++)M[F]=k.i(F)<<1|k.i(F-1)>>>31;return new a(M,k.h)}function at(k,I){var M=I>>5;I%=32;for(var F=k.g.length-M,D=[],G=0;G<F;G++)D[G]=0<I?k.i(G+M)>>>I|k.i(G+M+1)<<32-I:k.i(G+M);return new a(D,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Jw=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,es=a}).apply(typeof Vv<"u"?Vv:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tE,gl,eE,Wh,lm,nE,iE,rE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,w){return u==Array.prototype||u==Object.prototype||(u[v]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var v=0;v<u.length;++v){var w=u[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(u,v){if(v)t:{var w=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in w))break t;w=w[B]}u=u[u.length-1],S=w[u],v=v(S),v!=S&&v!=null&&t(w,u,{configurable:!0,writable:!0,value:v})}}function s(u,v){u instanceof String&&(u+="");var w=0,S=!1,B={next:function(){if(!S&&w<u.length){var W=w++;return{value:v(W,u[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(u){return u||function(){return s(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function f(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function m(u,v,w){return u.call.apply(u.bind,arguments)}function p(u,v,w){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),u.apply(v,B)}}return function(){return u.apply(v,arguments)}}function g(u,v,w){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function E(u,v){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,v){function w(){}w.prototype=v.prototype,u.aa=v.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(S,B,W){for(var ut=Array(arguments.length-2),he=2;he<arguments.length;he++)ut[he-2]=arguments[he];return v.prototype[B].apply(S,ut)}}function P(u){const v=u.length;if(0<v){const w=Array(v);for(let S=0;S<v;S++)w[S]=u[S];return w}return[]}function x(u,v){for(let w=1;w<arguments.length;w++){const S=arguments[w];if(h(S)){const B=u.length||0,W=S.length||0;u.length=B+W;for(let ut=0;ut<W;ut++)u[B+ut]=S[ut]}else u.push(S)}}class O{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function q(u){return q[" "](u),u}q[" "]=function(){};var J=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function at(u,v,w){for(const S in u)v.call(w,u[S],S,u)}function k(u,v){for(const w in u)v.call(void 0,u[w],w,u)}function I(u){const v={};for(const w in u)v[w]=u[w];return v}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,v){let w,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(w in S)u[w]=S[w];for(let W=0;W<M.length;W++)w=M[W],Object.prototype.hasOwnProperty.call(S,w)&&(u[w]=S[w])}}function D(u){var v=1;u=u.split(":");const w=[];for(;0<v&&u.length;)w.push(u.shift()),v--;return u.length&&w.push(u.join(":")),w}function G(u){l.setTimeout(()=>{throw u},0)}function C(){var u=Ze;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class fe{constructor(){this.h=this.g=null}add(v,w){const S=ln.get();S.set(v,w),this.h?this.h.next=S:this.g=S,this.h=S}}var ln=new O(()=>new Zt,u=>u.reset());class Zt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let qt,ft=!1,Ze=new fe,It=()=>{const u=l.Promise.resolve(void 0);qt=()=>{u.then(Ht)}};var Ht=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(w){G(w)}var v=ln;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ft=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var Pt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};l.addEventListener("test",w,v),l.removeEventListener("test",w,v)}catch{}return u}();function mt(u,v){if(ht.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(J){t:{try{q(v.nodeName);var B=!0;break t}catch{}B=!1}B||(v=null)}}else w=="mouseover"?v=u.fromElement:w=="mouseout"&&(v=u.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Tt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&mt.aa.h.call(this)}}T(mt,ht);var Tt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),it=0;function pt(u,v,w,S,B){this.listener=u,this.proxy=null,this.src=v,this.type=w,this.capture=!!S,this.ha=B,this.key=++it,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Wt(u){this.src=u,this.g={},this.h=0}Wt.prototype.add=function(u,v,w,S,B){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ut=R(u,v,S,B);return-1<ut?(v=u[ut],w||(v.fa=!1)):(v=new pt(v,this.src,W,!!S,B),v.fa=w,u.push(v)),v};function A(u,v){var w=v.type;if(w in u.g){var S=u.g[w],B=Array.prototype.indexOf.call(S,v,void 0),W;(W=0<=B)&&Array.prototype.splice.call(S,B,1),W&&(Et(v),u.g[w].length==0&&(delete u.g[w],u.h--))}}function R(u,v,w,S){for(var B=0;B<u.length;++B){var W=u[B];if(!W.da&&W.listener==v&&W.capture==!!w&&W.ha==S)return B}return-1}var z="closure_lm_"+(1e6*Math.random()|0),Z={};function Y(u,v,w,S,B){if(Array.isArray(v)){for(var W=0;W<v.length;W++)Y(u,v[W],w,S,B);return null}return w=kt(w),u&&u[j]?u.K(v,w,f(S)?!!S.capture:!1,B):K(u,v,w,!1,S,B)}function K(u,v,w,S,B,W){if(!v)throw Error("Invalid event type");var ut=f(B)?!!B.capture:!!B,he=_t(u);if(he||(u[z]=he=new Wt(u)),w=he.add(v,w,S,ut,W),w.proxy)return w;if(S=ct(),w.proxy=S,S.src=u,S.listener=w,u.addEventListener)Pt||(B=ut),B===void 0&&(B=!1),u.addEventListener(v.toString(),S,B);else if(u.attachEvent)u.attachEvent(et(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ct(){function u(w){return v.call(u.src,u.listener,w)}const v=Mt;return u}function lt(u,v,w,S,B){if(Array.isArray(v))for(var W=0;W<v.length;W++)lt(u,v[W],w,S,B);else S=f(S)?!!S.capture:!!S,w=kt(w),u&&u[j]?(u=u.i,v=String(v).toString(),v in u.g&&(W=u.g[v],w=R(W,w,S,B),-1<w&&(Et(W[w]),Array.prototype.splice.call(W,w,1),W.length==0&&(delete u.g[v],u.h--)))):u&&(u=_t(u))&&(v=u.g[v.toString()],u=-1,v&&(u=R(v,w,S,B)),(w=-1<u?v[u]:null)&&ot(w))}function ot(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[j])A(v.i,u);else{var w=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(w,S,u.capture):v.detachEvent?v.detachEvent(et(w),S):v.addListener&&v.removeListener&&v.removeListener(S),(w=_t(v))?(A(w,u),w.h==0&&(w.src=null,v[z]=null)):Et(u)}}}function et(u){return u in Z?Z[u]:Z[u]="on"+u}function Mt(u,v){if(u.da)u=!0;else{v=new mt(v,this);var w=u.listener,S=u.ha||u.src;u.fa&&ot(u),u=w.call(S,v)}return u}function _t(u){return u=u[z],u instanceof Wt?u:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(u){return typeof u=="function"?u:(u[St]||(u[St]=function(v){return u.handleEvent(v)}),u[St])}function Lt(){rt.call(this),this.i=new Wt(this),this.M=this,this.F=null}T(Lt,rt),Lt.prototype[j]=!0,Lt.prototype.removeEventListener=function(u,v,w,S){lt(this,u,v,w,S)};function Ut(u,v){var w,S=u.F;if(S)for(w=[];S;S=S.F)w.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new ht(v,u);else if(v instanceof ht)v.target=v.target||u;else{var B=v;v=new ht(S,u),F(v,B)}if(B=!0,w)for(var W=w.length-1;0<=W;W--){var ut=v.g=w[W];B=Yt(ut,S,!0,v)&&B}if(ut=v.g=u,B=Yt(ut,S,!0,v)&&B,B=Yt(ut,S,!1,v)&&B,w)for(W=0;W<w.length;W++)ut=v.g=w[W],B=Yt(ut,S,!1,v)&&B}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var w=u.g[v],S=0;S<w.length;S++)Et(w[S]);delete u.g[v],u.h--}}this.F=null},Lt.prototype.K=function(u,v,w,S){return this.i.add(String(u),v,!1,w,S)},Lt.prototype.L=function(u,v,w,S){return this.i.add(String(u),v,!0,w,S)};function Yt(u,v,w,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var B=!0,W=0;W<v.length;++W){var ut=v[W];if(ut&&!ut.da&&ut.capture==w){var he=ut.listener,Ue=ut.ha||ut.src;ut.fa&&A(u.i,ut),B=he.call(Ue,S)!==!1&&B}}return B&&!S.defaultPrevented}function He(u,v,w){if(typeof u=="function")w&&(u=g(u,w));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(u,v||0)}function Fe(u){u.g=He(()=>{u.g=null,u.i&&(u.i=!1,Fe(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class wn extends rt{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Fe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(u){rt.call(this),this.h=u,this.g={}}T(Ye,rt);var li=[];function Wi(u){at(u.g,function(v,w){this.g.hasOwnProperty(w)&&ot(v)},u),u.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),Wi(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=l.JSON.stringify,Ln=l.JSON.parse,Si=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Lr(){}Lr.prototype.h=null;function qc(u){return u.h||(u.h=u.i())}function Ra(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function co(){ht.call(this,"d")}T(co,ht);function Oa(){ht.call(this,"c")}T(Oa,ht);var Ki={},Hc=null;function ho(){return Hc=Hc||new Lt}Ki.La="serverreachability";function Wc(u){ht.call(this,Ki.La,u)}T(Wc,ht);function Ss(u){const v=ho();Ut(v,new Wc(v))}Ki.STAT_EVENT="statevent";function uo(u,v){ht.call(this,Ki.STAT_EVENT,u),this.stat=v}T(uo,ht);function tn(u){const v=ho();Ut(v,new uo(v,u))}Ki.Ma="timingevent";function Kc(u,v){ht.call(this,Ki.Ma,u),this.size=v}T(Kc,ht);function Is(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},v)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function Hn(u,v,w,S,B,W){u.info(function(){if(u.g)if(W)for(var ut="",he=W.split("&"),Ue=0;Ue<he.length;Ue++){var ie=he[Ue].split("=");if(1<ie.length){var me=ie[0];ie=ie[1];var Ie=me.split("_");ut=2<=Ie.length&&Ie[1]=="type"?ut+(me+"="+ie+"&"):ut+(me+"=redacted&")}}else ut=null;else ut=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+v+`
`+w+`
`+ut})}function At(u,v,w,S,B,W,ut){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+v+`
`+w+`
`+W+" "+ut})}function Zi(u,v,w,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Yc(u,w)+(S?" "+S:"")})}function Zc(u,v){u.info(function(){return"TIMEOUT: "+v})}Ms.prototype.info=function(){};function Yc(u,v){if(!u.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var S=w[u];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ut=1;ut<B.length;ut++)B[ut]=""}}}}return Ge(w)}catch{return v}}var As={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mo;function ci(){}T(ci,Lr),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},mo=new ci;function hi(u,v,w,S){this.j=u,this.i=v,this.l=w,this.R=S||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qc}function Qc(){this.i=null,this.g="",this.h=!1}var Xc={},Na={};function Da(u,v,w){u.L=1,u.v=Kn(xe(v)),u.m=w,u.P=!0,Va(u,null)}function Va(u,v){u.F=Date.now(),_o(u),u.A=xe(u.v);var w=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),eh(w.i,"t",S),u.C=0,w=u.j.J,u.h=new Qc,u.g=lh(u.j,w?v:null,!u.m),0<u.O&&(u.M=new wn(g(u.Y,u,u.g),u.O)),v=u.U,w=u.g,S=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(li[0]=B.toString()),B=li);for(var W=0;W<B.length;W++){var ut=Y(w,B[W],S||v.handleEvent,!1,v.h||v);if(!ut)break;v.g[ut.key]=ut}v=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Ss(),Hn(u.i,u.u,u.A,u.l,u.R,u.m)}hi.prototype.ca=function(u){u=u.target;const v=this.M;v&&En(u)==3?v.j():this.Y(u)},hi.prototype.Y=function(u){try{if(u==this.g)t:{const Ie=En(this.g);var v=this.g.Ba();const Vr=this.g.Z();if(!(3>Ie)&&(Ie!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||Ie!=4||v==7||(v==8||0>=Vr?Ss(3):Ss(2)),Fa(this);var w=this.g.Z();this.X=w;e:if(Jc(this)){var S=Ja(this.g);u="";var B=S.length,W=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Ls(this);var ut="";break e}this.h.i=new l.TextDecoder}for(v=0;v<B;v++)this.h.h=!0,u+=this.h.i.decode(S[v],{stream:!(W&&v==B-1)});S.length=0,this.h.g+=u,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=w==200,At(this.i,this.u,this.A,this.l,this.R,Ie,w),this.o){if(this.T&&!this.K){e:{if(this.g){var he,Ue=this.g;if((he=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(he)){var ie=he;break e}}ie=null}if(w=ie)Zi(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,w);else{this.o=!1,this.s=3,tn(12),Yi(this),Ls(this);break t}}if(this.P){w=!0;let Re;for(;!this.J&&this.C<ut.length;)if(Re=po(this,ut),Re==Na){Ie==4&&(this.s=4,tn(14),w=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Re==Xc){this.s=4,tn(15),Zi(this.i,this.l,ut,"[Invalid Chunk]"),w=!1;break}else Zi(this.i,this.l,Re,null),xs(this,Re);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||ut.length!=0||this.h.h||(this.s=1,tn(16),w=!1),this.o=this.o&&w,!w)Zi(this.i,this.l,ut,"[Invalid Chunked Response]"),Yi(this),Ls(this);else if(0<ut.length&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.ba&&!me.M&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),So(me),me.M=!0,tn(11))}}else Zi(this.i,this.l,ut,null),xs(this,ut);Ie==4&&Yi(this),this.o&&!this.J&&(Ie==4?el(this.j,this):(this.o=!1,_o(this)))}else Bf(this.g),w==400&&0<ut.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Yi(this),Ls(this)}}}catch{}finally{}};function Jc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function po(u,v){var w=u.C,S=v.indexOf(`
`,w);return S==-1?Na:(w=Number(v.substring(w,S)),isNaN(w)?Xc:(S+=1,S+w>v.length?Na:(v=v.slice(S,S+w),u.C=S+w,v)))}hi.prototype.cancel=function(){this.J=!0,Yi(this)};function _o(u){u.S=Date.now()+u.I,th(u,u.I)}function th(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Is(g(u.ba,u),v)}function Fa(u){u.B&&(l.clearTimeout(u.B),u.B=null)}hi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Zc(this.i,this.A),this.L!=2&&(Ss(),tn(17)),Yi(this),this.s=2,Ls(this)):th(this,this.S-u)};function Ls(u){u.j.G==0||u.J||el(u.j,u)}function Yi(u){Fa(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Wi(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function xs(u,v){try{var w=u.j;if(w.G!=0&&(w.g==u||Xt(w.h,u))){if(!u.K&&Xt(w.h,u)&&w.G==3){try{var S=w.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)Mo(w),To(w);else break t;Po(w),tn(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=Is(g(w.Za,w),6e3));if(1>=Cr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else er(w,11)}else if((u.K||w.g==u)&&Mo(w),!V(v))for(B=w.Da.g.parse(v),v=0;v<B.length;v++){let ie=B[v];if(w.T=ie[0],ie=ie[1],w.G==2)if(ie[0]=="c"){w.K=ie[1],w.ia=ie[2];const me=ie[3];me!=null&&(w.la=me,w.j.info("VER="+w.la));const Ie=ie[4];Ie!=null&&(w.Aa=Ie,w.j.info("SVER="+w.Aa));const Vr=ie[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(S=1.5*Vr,w.L=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const Re=u.g;if(Re){const Lo=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var W=S.h;W.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(_e(W,W.h),W.h=null))}if(S.D){const Ai=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;Ai&&(S.ya=Ai,Ft(S.I,S.D,Ai))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),S=w;var ut=u;if(S.qa=Ao(S,S.J?S.ia:null,S.W),ut.K){ks(S.h,ut);var he=ut,Ue=S.L;Ue&&(he.I=Ue),he.B&&(Fa(he),_o(he)),S.g=ut}else di(S);0<w.i.length&&Dr(w)}else ie[0]!="stop"&&ie[0]!="close"||er(w,7);else w.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?er(w,7):bo(w):ie[0]!="noop"&&w.l&&w.l.ta(ie),w.v=0)}}Ss(4)}catch{}}var Cs=class{constructor(u,v){this.g=u,this.map=v}};function Ga(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ua(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cr(u){return u.h?1:u.g?u.g.size:0}function Xt(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function _e(u,v){u.g?u.g.add(v):u.h=v}function ks(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Ga.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Qi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const w of u.g.values())v=v.concat(w.D);return v}return P(u.i)}function kr(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(h(u)){for(var v=[],w=u.length,S=0;S<w;S++)v.push(u[S]);return v}v=[],w=0;for(S in u)v[w++]=u[S];return v}function za(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(h(u)||typeof u=="string"){var v=[];u=u.length;for(var w=0;w<u;w++)v.push(w);return v}v=[],w=0;for(const S in u)v[w++]=S;return v}}}function $t(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(h(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var w=za(u),S=kr(u),B=S.length,W=0;W<B;W++)v.call(void 0,S[W],w&&w[W],u)}var be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(u,v){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var S=u[w].indexOf("="),B=null;if(0<=S){var W=u[w].substring(0,S);B=u[w].substring(S+1)}else W=u[w];v(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Wn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wn){this.h=u.h,go(this,u.j),this.o=u.o,this.g=u.g,Xi(this,u.s),this.l=u.l;var v=u.i,w=new Ji;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),Ii(this,w),this.m=u.m}else u&&(v=String(u).match(be))?(this.h=!1,go(this,v[1]||"",!0),this.o=ui(v[2]||""),this.g=ui(v[3]||"",!0),Xi(this,v[4]),this.l=ui(v[5]||"",!0),Ii(this,v[6]||"",!0),this.m=ui(v[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}Wn.prototype.toString=function(){var u=[],v=this.j;v&&u.push(fi(v,Rr,!0),":");var w=this.g;return(w||v=="file")&&(u.push("//"),(v=this.o)&&u.push(fi(v,Rr,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(fi(w,w.charAt(0)=="/"?qa:ja,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",fi(w,Ha)),u.join("")};function xe(u){return new Wn(u)}function go(u,v,w){u.j=w?ui(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Xi(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Ii(u,v,w){v instanceof Ji?(u.i=v,Zn(u.i,u.h)):(w||(v=fi(v,vo)),u.i=new Ji(v,u.h))}function Ft(u,v,w){u.i.set(v,w)}function Kn(u){return Ft(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ui(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,v,w){return typeof u=="string"?(u=encodeURI(u).replace(v,$a),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $a(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Rr=/[#\/\?@]/g,ja=/[#\?:]/g,qa=/[#\?]/g,vo=/[#\?@]/g,Ha=/#/g;function Ji(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Fn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ba(u.i,function(v,w){u.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}e=Ji.prototype,e.add=function(u,v){Fn(this),this.i=null,u=Rt(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(v),this.h+=1,this};function Wa(u,v){Fn(u),v=Rt(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function yo(u,v){return Fn(u),v=Rt(u,v),u.g.has(v)}e.forEach=function(u,v){Fn(this),this.g.forEach(function(w,S){w.forEach(function(B){u.call(v,B,S,this)},this)},this)},e.na=function(){Fn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let S=0;S<v.length;S++){const B=u[S];for(let W=0;W<B.length;W++)w.push(v[S])}return w},e.V=function(u){Fn(this);let v=[];if(typeof u=="string")yo(this,u)&&(v=v.concat(this.g.get(Rt(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)v=v.concat(u[w])}return v},e.set=function(u,v){return Fn(this),this.i=null,u=Rt(this,u),yo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},e.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function eh(u,v,w){Wa(u,v),0<w.length&&(u.i=null,u.g.set(Rt(u,v),P(w)),u.h+=w.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var S=v[w];const W=encodeURIComponent(String(S)),ut=this.V(S);for(S=0;S<ut.length;S++){var B=W;ut[S]!==""&&(B+="="+encodeURIComponent(String(ut[S]))),u.push(B)}}return this.i=u.join("&")};function Rt(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Zn(u,v){v&&!u.j&&(Fn(u),u.i=null,u.g.forEach(function(w,S){var B=S.toLowerCase();S!=B&&(Wa(this,S),eh(this,B,w))},u)),u.j=v}function de(u,v){const w=new Ms;if(l.Image){const S=new Image;S.onload=E(Yn,w,"TestLoadImage: loaded",!0,v,S),S.onerror=E(Yn,w,"TestLoadImage: error",!1,v,S),S.onabort=E(Yn,w,"TestLoadImage: abort",!1,v,S),S.ontimeout=E(Yn,w,"TestLoadImage: timeout",!1,v,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function nh(u,v){const w=new Ms,S=new AbortController,B=setTimeout(()=>{S.abort(),Yn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?Yn(w,"TestPingServer: ok",!0,v):Yn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Yn(w,"TestPingServer: error",!1,v)})}function Yn(u,v,w,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(w)}catch{}}function Ka(){this.g=new Si}function Za(u,v,w){const S=w||"";try{$t(u,function(B,W){let ut=B;f(B)&&(ut=Ge(B)),v.push(S+W+"="+encodeURIComponent(ut))})}catch(B){throw v.push(S+"type="+encodeURIComponent("_badmap")),B}}function Qn(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Qn,Lr),Qn.prototype.g=function(){return new Or(this.l,this.j)},Qn.prototype.i=function(u){return function(){return u}}({});function Or(u,v){Lt.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Or,Lt),e=Or.prototype,e.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Gn(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Se(this)),this.readyState=0},e.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nr(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nr(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}e.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Se(this):Gn(this),this.readyState==3&&Nr(this)}},e.Ra=function(u){this.g&&(this.response=this.responseText=u,Se(this))},e.Qa=function(u){this.g&&(this.response=u,Se(this))},e.ga=function(){this.g&&Se(this)};function Se(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Gn(u)}e.setRequestHeader=function(u,v){this.u.append(u,v)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=v.next();return u.join(`\r
`)};function Gn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ya(u){let v="";return at(u,function(w,S){v+=S,v+=":",v+=w,v+=`\r
`}),v}function wo(u,v,w){t:{for(S in w){var S=!1;break t}S=!0}S||(w=Ya(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Ft(u,v,w))}function Te(u){Lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Te,Lt);var ih=/^https?$/i,Qa=["POST","PUT"];e=Te.prototype,e.Ha=function(u){this.J=u},e.ea=function(u,v,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mo.g(),this.v=this.o?qc(this.o):qc(mo),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(W){rh(this,W);return}if(u=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)w.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())w.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),B=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Qa,v,void 0))||S||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ut]of w)this.g.setRequestHeader(W,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xn(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){rh(this,W)}};function rh(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Xa(u),Eo(u)}function Xa(u){u.A||(u.A=!0,Ut(u,"complete"),Ut(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ut(this,"complete"),Ut(this,"abort"),Eo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eo(this,!0)),Te.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Qt(this):this.bb())},e.bb=function(){Qt(this)};function Qt(u){if(u.h&&typeof a<"u"&&(!u.v[1]||En(u)!=4||u.Z()!=2)){if(u.u&&En(u)==4)He(u.Ea,0,u);else if(Ut(u,"readystatechange"),En(u)==4){u.h=!1;try{const ut=u.Z();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var w;if(!(w=v)){var S;if(S=ut===0){var B=String(u.D).match(be)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),S=!ih.test(B?B.toLowerCase():"")}w=S}if(w)Ut(u,"complete"),Ut(u,"success");else{u.m=6;try{var W=2<En(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Xa(u)}}finally{Eo(u)}}}}function Eo(u,v){if(u.g){xn(u);const w=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||Ut(u,"ready");try{w.onreadystatechange=S}catch{}}}function xn(u){u.I&&(l.clearTimeout(u.I),u.I=null)}e.isActive=function(){return!!this.g};function En(u){return u.g?u.g.readyState:0}e.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ln(v)}};function Ja(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bf(u){const v={};u=(u.g&&2<=En(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(V(u[S]))continue;var w=D(u[S]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=v[B]||[];v[B]=W,W.push(w)}k(v,function(S){return S.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(u,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||v}function sh(u){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,u),this.cb=tr("retryDelaySeedMs",1e4,u),this.Wa=tr("forwardChannelMaxRetries",2,u),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ga(u&&u.concurrentRequestLimit),this.Da=new Ka,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=sh.prototype,e.la=8,e.G=1,e.connect=function(u,v,w,S){tn(0),this.W=u,this.H=v||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.I=Ao(this,null,this.W),Dr(this)};function bo(u){if(oh(u),u.G==3){var v=u.U++,w=xe(u.I);if(Ft(w,"SID",u.K),Ft(w,"RID",v),Ft(w,"TYPE","terminate"),Rs(u,w),v=new hi(u,u.j,v),v.L=2,v.v=Kn(xe(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&l.Image&&(new Image().src=v.v,w=!0),w||(v.g=lh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_o(v)}ah(u)}function To(u){u.g&&(So(u),u.g.cancel(),u.g=null)}function oh(u){To(u),u.u&&(l.clearTimeout(u.u),u.u=null),Mo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Dr(u){if(!Ua(u.h)&&!u.s){u.s=!0;var v=u.Ga;qt||It(),ft||(qt(),ft=!0),Ze.add(v,u),u.B=0}}function $f(u,v){return Cr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Is(g(u.Ga,u,v),nl(u,u.B)),u.B++,!0)}e.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new hi(this,this.j,u);let W=this.o;if(this.S&&(W?(W=I(W),F(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)t:{for(var v=0,w=0;w<this.i.length;w++){e:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=w;break t}if(v===4096||w===this.i.length-1){v=w+1;break t}}v=1e3}else v=1e3;v=tl(this,B,v),w=xe(this.I),Ft(w,"RID",u),Ft(w,"CVER",22),this.D&&Ft(w,"X-HTTP-Session-Id",this.D),Rs(this,w),W&&(this.O?v="headers="+encodeURIComponent(String(Ya(W)))+"&"+v:this.m&&wo(w,this.m,W)),_e(this.h,B),this.Ua&&Ft(w,"TYPE","init"),this.P?(Ft(w,"$req",v),Ft(w,"SID","null"),B.T=!0,Da(B,w,null)):Da(B,w,v),this.G=2}}else this.G==3&&(u?Un(this,u):this.i.length==0||Ua(this.h)||Un(this))};function Un(u,v){var w;v?w=v.l:w=u.U++;const S=xe(u.I);Ft(S,"SID",u.K),Ft(S,"RID",w),Ft(S,"AID",u.T),Rs(u,S),u.m&&u.o&&wo(S,u.m,u.o),w=new hi(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),v&&(u.i=v.D.concat(u.i)),v=tl(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),_e(u.h,w),Da(w,S,v)}function Rs(u,v){u.H&&at(u.H,function(w,S){Ft(v,S,w)}),u.l&&$t({},function(w,S){Ft(v,S,w)})}function tl(u,v,w){w=Math.min(u.i.length,w);var S=u.l?g(u.l.Na,u.l,u):null;t:{var B=u.i;let W=-1;for(;;){const ut=["count="+w];W==-1?0<w?(W=B[0].g,ut.push("ofs="+W)):W=0:ut.push("ofs="+W);let he=!0;for(let Ue=0;Ue<w;Ue++){let ie=B[Ue].g;const me=B[Ue].map;if(ie-=W,0>ie)W=Math.max(0,B[Ue].g-100),he=!1;else try{Za(me,ut,"req"+ie+"_")}catch{S&&S(me)}}if(he){S=ut.join("&");break t}}}return u=u.i.splice(0,w),v.D=u,S}function di(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;qt||It(),ft||(qt(),ft=!0),Ze.add(v,u),u.v=0}}function Po(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Is(g(u.Fa,u),nl(u,u.v)),u.v++,!0)}e.Fa=function(){if(this.u=null,Io(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Is(g(this.ab,this),u)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),To(this),Io(this))};function So(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function Io(u){u.g=new hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=xe(u.qa);Ft(v,"RID","rpc"),Ft(v,"SID",u.K),Ft(v,"AID",u.T),Ft(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ft(v,"TO",u.ja),Ft(v,"TYPE","xmlhttp"),Rs(u,v),u.m&&u.o&&wo(v,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Kn(xe(v)),w.m=null,w.P=!0,Va(w,u)}e.Za=function(){this.C!=null&&(this.C=null,To(this),Po(this),tn(19))};function Mo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function el(u,v){var w=null;if(u.g==v){Mo(u),So(u),u.g=null;var S=2}else if(Xt(u.h,v))w=v.D,ks(u.h,v),S=1;else return;if(u.G!=0){if(v.o)if(S==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var B=u.B;S=ho(),Ut(S,new Kc(S,w)),Dr(u)}else di(u);else if(B=v.s,B==3||B==0&&0<v.X||!(S==1&&$f(u,v)||S==2&&Po(u)))switch(w&&0<w.length&&(v=u.h,v.i=v.i.concat(w)),B){case 1:er(u,5);break;case 4:er(u,10);break;case 3:er(u,6);break;default:er(u,2)}}}function nl(u,v){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*v}function er(u,v){if(u.j.info("Error code "+v),v==2){var w=g(u.fb,u),S=u.Xa;const B=!S;S=new Wn(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||go(S,"https"),Kn(S),B?de(S.toString(),w):nh(S.toString(),w)}else tn(2);u.G=0,u.l&&u.l.sa(v),ah(u),oh(u)}e.fb=function(u){u?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function ah(u){if(u.G=0,u.ka=[],u.l){const v=Qi(u.h);(v.length!=0||u.i.length!=0)&&(x(u.ka,v),x(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function Ao(u,v,w){var S=w instanceof Wn?xe(w):new Wn(w);if(S.g!="")v&&(S.g=v+"."+S.g),Xi(S,S.s);else{var B=l.location;S=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;var W=new Wn(null);S&&go(W,S),v&&(W.g=v),B&&Xi(W,B),w&&(W.l=w),S=W}return w=u.D,v=u.ya,w&&v&&Ft(S,w,v),Ft(S,"VER",u.la),Rs(u,S),S}function lh(u,v,w){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new Te(new Qn({eb:w})):new Te(u.pa),v.Ha(u.J),v}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function il(){}e=il.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Os(){}Os.prototype.g=function(u,v){return new Qe(u,v)};function Qe(u,v){Lt.call(this),this.g=new sh(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!V(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Xn(this)}T(Qe,Lt),Qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qe.prototype.close=function(){bo(this.g)},Qe.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=Ge(u),u=w);v.i.push(new Cs(v.Ya++,u)),v.G==3&&Dr(v)},Qe.prototype.N=function(){this.g.l=null,delete this.j,bo(this.g),delete this.g,Qe.aa.N.call(this)};function Mi(u){co.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){t:{for(const w in v){u=w;break t}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}T(Mi,co);function ch(){Oa.call(this),this.status=1}T(ch,Oa);function Xn(u){this.g=u}T(Xn,il),Xn.prototype.ua=function(){Ut(this.g,"a")},Xn.prototype.ta=function(u){Ut(this.g,new Mi(u))},Xn.prototype.sa=function(u){Ut(this.g,new ch)},Xn.prototype.ra=function(){Ut(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,Qe.prototype.send=Qe.prototype.o,Qe.prototype.open=Qe.prototype.m,Qe.prototype.close=Qe.prototype.close,rE=function(){return new Os},iE=function(){return ho()},nE=Ki,lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Wh=As,fo.COMPLETE="complete",eE=fo,Ra.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,gl=Ra,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,tE=Te}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const Fv="@firebase/firestore",Gv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new wp("@firebase/firestore");function Go(){return Xs.logLevel}function bt(e,...t){if(Xs.logLevel<=Jt.DEBUG){const n=t.map(Rp);Xs.debug(`Firestore (${Ma}): ${e}`,...n)}}function Er(e,...t){if(Xs.logLevel<=Jt.ERROR){const n=t.map(Rp);Xs.error(`Firestore (${Ma}): ${e}`,...n)}}function pa(e,...t){if(Xs.logLevel<=Jt.WARN){const n=t.map(Rp);Xs.warn(`Firestore (${Ma}): ${e}`,...n)}}function Rp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,sE(e,i,n)}function sE(e,t,n){let i=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function ce(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||sE(t,r,i)}function Bt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Ir{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _x{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class gx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vx{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ce(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let s=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pr,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=s;t.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},l=h=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pr)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ce(typeof i.accessToken=="string",31837,{l:i}),new oE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ce(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class yx{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wx{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new yx(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ex{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ce(this.o===void 0,3512);const i=s=>{s.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,bt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Uv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=bx(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function te(e,t){return e<t?-1:e>t?1:0}function cm(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return _d(r)===_d(s)?te(r,s):_d(r)?1:-1}return te(e.length,t.length)}const Tx=55296,Px=57343;function _d(e){const t=e.charCodeAt(0);return t>=Tx&&t<=Px}function _a(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__name__";class ki{constructor(t,n,i){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Dt(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ki.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ki?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=ki.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return te(t.length,n.length)}static compareSegments(t,n){const i=ki.isNumericId(t),r=ki.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ki.extractNumericId(t).compare(ki.extractNumericId(n)):cm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return es.fromString(t.substring(4,t.length-2))}}class ye extends ki{construct(t,n,i){return new ye(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new yt(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const Sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends ki{construct(t,n,i){return new sn(t,n,i)}static isValidIdentifier(t){return Sx.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zv}static keyField(){return new sn([zv])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new yt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new yt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new yt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new yt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.path=t}static fromPath(t){return new xt(ye.fromString(t))}static fromName(t){return new xt(ye.fromString(t).popFirst(5))}static empty(){return new xt(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ye.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ye.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xt(new ye(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(e,t,n){if(!n)throw new yt(Q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ix(e,t,n,i){if(t===!0&&i===!0)throw new yt(Q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Bv(e){if(!xt.isDocumentKey(e))throw new yt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $v(e){if(xt.isDocumentKey(e))throw new yt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lE(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vf(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function oi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(e);throw new yt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(e,t){const n={typeString:e};return t&&(n.value=t),n}function xc(e,t){if(!lE(e))throw new yt(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new yt(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=-62135596800,qv=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(t){return we.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*qv);return new we(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new yt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<jv)throw new yt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qv}_compareTo(t){return this.seconds===t.seconds?te(this.nanoseconds,t.nanoseconds):te(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:we._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(xc(t,we._jsonSchema))return new we(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-jv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:qe("string",we._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{static fromTimestamp(t){return new zt(t)}static min(){return new zt(new we(0,0))}static max(){return new zt(new we(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=-1;function Mx(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=zt.fromTimestamp(i===1e9?new we(n+1,0):new we(n,i));return new os(r,xt.empty(),t)}function Ax(e){return new os(e.readTime,e.key,cc)}class os{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new os(zt.min(),xt.empty(),cc)}static max(){return new os(zt.max(),xt.empty(),cc)}}function Lx(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=xt.comparator(e.documentKey,t.documentKey),n!==0?n:te(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(e){if(e.code!==Q.FAILED_PRECONDITION||e.message!==xx)throw e;bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):X.reject(n)}static resolve(t){return new X((n,i)=>{n(t)})}static reject(t){return new X((n,i)=>{i(t)})}static waitFor(t){return new X((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},h=>i(h))}),a=!0,s===r&&n()})}static or(t){let n=X.resolve(!1);for(const i of t)n=n.next(r=>r?X.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new X((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let h=0;h<s;h++){const f=h;n(t[f]).next(m=>{a[f]=m,++l,l===s&&i(a)},m=>r(m))}})}static doWhile(t,n){return new X((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function kx(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function La(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}yf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=-1;function wf(e){return e==null}function Su(e){return e===0&&1/e==-1/0}function Rx(e){return typeof e=="number"&&Number.isInteger(e)&&!Su(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="";function Ox(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Hv(t)),t=Nx(e.get(n),t);return Hv(t)}function Nx(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case cE:n+="";break;default:n+=s}}return n}function Hv(e){return e+cE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t,n){this.comparator=t,this.root=n||nn.EMPTY}insert(t,n){return new Le(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(t){return new Le(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mh(this.root,t,this.comparator,!0)}}class Mh{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nn{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??nn.RED,this.left=r??nn.EMPTY,this.right=s??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new nn(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return nn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new nn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.comparator=t,this.data=new Le(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kv(this.data.getIterator())}getIteratorFrom(t){return new Kv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof We)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new We(this.comparator);return n.data=t,n}}class Kv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new jn([])}unionWith(t){let n=new We(sn.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new jn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _a(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uE("Invalid base64 string: "+s):s}}(t);return new an(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new an(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return te(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}an.EMPTY_BYTE_STRING=new an("");const Dx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(e){if(ce(!!e,39018),typeof e=="string"){let t=0;const n=Dx.exec(e);if(ce(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ls(e){return typeof e=="string"?an.fromBase64String(e):an.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="server_timestamp",dE="__type__",mE="__previous_value__",pE="__local_write_time__";function Dp(e){return(e?.mapValue?.fields||{})[dE]?.stringValue===fE}function Ef(e){const t=e.mapValue.fields[mE];return Dp(t)?Ef(t):t}function hc(e){const t=as(e.mapValue.fields[pE].timestampValue);return new we(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,n,i,r,s,a,l,h,f,m){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Iu="(default)";class uc{constructor(t,n){this.projectId=t,this.database=n||Iu}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===Iu}isEqual(t){return t instanceof uc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__type__",Fx="__max__",Ah={mapValue:{}},gE="__vector__",Mu="value";function cs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dp(e)?4:Ux(e)?9007199254740991:Gx(e)?10:11:Dt(28295,{value:e})}function qi(e,t){if(e===t)return!0;const n=cs(e);if(n!==cs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hc(e).isEqual(hc(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=as(r.timestampValue),l=as(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return ls(r.bytesValue).isEqual(ls(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Oe(r.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(r.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Oe(r.integerValue)===Oe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Oe(r.doubleValue),l=Oe(s.doubleValue);return a===l?Su(a)===Su(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return _a(e.arrayValue.values||[],t.arrayValue.values||[],qi);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Wv(a)!==Wv(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!qi(a[h],l[h])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function fc(e,t){return(e.values||[]).find(n=>qi(n,t))!==void 0}function ga(e,t){if(e===t)return 0;const n=cs(e),i=cs(t);if(n!==i)return te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Oe(s.integerValue||s.doubleValue),h=Oe(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(e,t);case 3:return Zv(e.timestampValue,t.timestampValue);case 4:return Zv(hc(e),hc(t));case 5:return cm(e.stringValue,t.stringValue);case 6:return function(s,a){const l=ls(s),h=ls(a);return l.compareTo(h)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),h=a.split("/");for(let f=0;f<l.length&&f<h.length;f++){const m=te(l[f],h[f]);if(m!==0)return m}return te(l.length,h.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=te(Oe(s.latitude),Oe(a.latitude));return l!==0?l:te(Oe(s.longitude),Oe(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Yv(e.arrayValue,t.arrayValue);case 10:return function(s,a){const l=s.fields||{},h=a.fields||{},f=l[Mu]?.arrayValue,m=h[Mu]?.arrayValue,p=te(f?.values?.length||0,m?.values?.length||0);return p!==0?p:Yv(f,m)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Ah.mapValue&&a===Ah.mapValue)return 0;if(s===Ah.mapValue)return 1;if(a===Ah.mapValue)return-1;const l=s.fields||{},h=Object.keys(l),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let p=0;p<h.length&&p<m.length;++p){const g=cm(h[p],m[p]);if(g!==0)return g;const E=ga(l[h[p]],f[m[p]]);if(E!==0)return E}return te(h.length,m.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{he:n})}}function Zv(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return te(e,t);const n=as(e),i=as(t),r=te(n.seconds,i.seconds);return r!==0?r:te(n.nanos,i.nanos)}function Yv(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ga(n[r],i[r]);if(s)return s}return te(n.length,i.length)}function va(e){return hm(e)}function hm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=as(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ls(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return xt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=hm(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${hm(n.fields[a])}`;return r+"}"}(e.mapValue):Dt(61005,{value:e})}function Kh(e){switch(cs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ef(e);return t?16+Kh(t):16;case 5:return 2*e.stringValue.length;case 6:return ls(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Kh(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return bs(i.fields,(s,a)=>{r+=s.length+Kh(a)}),r}(e.mapValue);default:throw Dt(13486,{value:e})}}function Qv(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function um(e){return!!e&&"integerValue"in e}function Vp(e){return!!e&&"arrayValue"in e}function Xv(e){return!!e&&"nullValue"in e}function Jv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zh(e){return!!e&&"mapValue"in e}function Gx(e){return(e?.mapValue?.fields||{})[_E]?.stringValue===gE}function Gl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return bs(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Gl(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gl(e.arrayValue.values[n]);return t}return{...e}}function Ux(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Fx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.value=t}static empty(){return new Nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Zh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gl(n)}setAll(t){let n=sn.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Gl(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Zh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){bs(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Nn(Gl(this.value))}}function vE(e){const t=[];return bs(e.fields,(n,i)=>{const r=new sn([n]);if(Zh(i)){const s=vE(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new jn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new mn(t,0,zt.min(),zt.min(),zt.min(),Nn.empty(),0)}static newFoundDocument(t,n,i,r){return new mn(t,1,n,zt.min(),i,r,0)}static newNoDocument(t,n){return new mn(t,2,n,zt.min(),zt.min(),Nn.empty(),0)}static newUnknownDocument(t,n){return new mn(t,3,n,zt.min(),zt.min(),Nn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,n){this.position=t,this.inclusive=n}}function ty(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=xt.comparator(xt.fromName(a.referenceValue),n.key):i=ga(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ey(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qi(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,n="asc"){this.field=t,this.dir=n}}function zx(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class je extends yE{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new $x(t,n,i):n==="array-contains"?new Hx(t,i):n==="in"?new Wx(t,i):n==="not-in"?new Kx(t,i):n==="array-contains-any"?new Zx(t,i):new je(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new jx(t,i):new qx(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ga(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(ga(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends yE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Ti(t,n)}matches(t){return wE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wE(e){return e.op==="and"}function EE(e){return Bx(e)&&wE(e)}function Bx(e){for(const t of e.filters)if(t instanceof Ti)return!1;return!0}function fm(e){if(e instanceof je)return e.field.canonicalString()+e.op.toString()+va(e.value);if(EE(e))return e.filters.map(t=>fm(t)).join(",");{const t=e.filters.map(n=>fm(n)).join(",");return`${e.op}(${t})`}}function bE(e,t){return e instanceof je?function(i,r){return r instanceof je&&i.op===r.op&&i.field.isEqual(r.field)&&qi(i.value,r.value)}(e,t):e instanceof Ti?function(i,r){return r instanceof Ti&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&bE(a,r.filters[l]),!0):!1}(e,t):void Dt(19439)}function TE(e){return e instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(e):e instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(TE).join(" ,")+"}"}(e):"Filter"}class $x extends je{constructor(t,n,i){super(t,n,i),this.key=xt.fromName(i.referenceValue)}matches(t){const n=xt.comparator(t.key,this.key);return this.matchesComparison(n)}}class jx extends je{constructor(t,n){super(t,"in",n),this.keys=PE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class qx extends je{constructor(t,n){super(t,"not-in",n),this.keys=PE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function PE(e,t){return(t.arrayValue?.values||[]).map(n=>xt.fromName(n.referenceValue))}class Hx extends je{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Vp(n)&&fc(n.arrayValue,this.value)}}class Wx extends je{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&fc(this.value.arrayValue,n)}}class Kx extends je{constructor(t,n){super(t,"not-in",n)}matches(t){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fc(this.value.arrayValue,n)}}class Zx extends je{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>fc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function ny(e,t=null,n=[],i=[],r=null,s=null,a=null){return new Yx(e,t,n,i,r,s,a)}function Fp(e){const t=Bt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>fm(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),wf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>va(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>va(i)).join(",")),t.Te=n}return t.Te}function Gp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zx(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ey(e.startAt,t.startAt)&&ey(e.endAt,t.endAt)}function dm(e){return xt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,h=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Qx(e,t,n,i,r,s,a,l){return new Cc(e,t,n,i,r,s,a,l)}function bf(e){return new Cc(e)}function iy(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function SE(e){return e.collectionGroup!==null}function Ul(e){const t=Bt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new We(sn.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Lu(s,i))}),n.has(sn.keyField().canonicalString())||t.Ie.push(new Lu(sn.keyField(),i))}return t.Ie}function Ui(e){const t=Bt(e);return t.Ee||(t.Ee=Xx(t,Ul(e))),t.Ee}function Xx(e,t){if(e.limitType==="F")return ny(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Lu(r.field,s)});const n=e.endAt?new Au(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Au(e.startAt.position,e.startAt.inclusive):null;return ny(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function mm(e,t){const n=e.filters.concat([t]);return new Cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pm(e,t,n){return new Cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tf(e,t){return Gp(Ui(e),Ui(t))&&e.limitType===t.limitType}function IE(e){return`${Fp(Ui(e))}|lt:${e.limitType}`}function Uo(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>TE(r)).join(", ")}]`),wf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>va(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>va(r)).join(",")),`Target(${i})`}(Ui(e))}; limitType=${e.limitType})`}function Pf(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):xt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Ul(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,h){const f=ty(a,l,h);return a.inclusive?f<=0:f<0}(i.startAt,Ul(i),r)||i.endAt&&!function(a,l,h){const f=ty(a,l,h);return a.inclusive?f>=0:f>0}(i.endAt,Ul(i),r))}(e,t)}function Jx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ME(e){return(t,n)=>{let i=!1;for(const r of Ul(e)){const s=tC(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function tC(e,t,n){const i=e.field.isKeyField()?xt.comparator(t.key,n.key):function(s,a,l){const h=a.data.field(s),f=l.data.field(s);return h!==null&&f!==null?ga(h,f):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){bs(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return hE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new Le(xt.comparator);function br(){return eC}const AE=new Le(xt.comparator);function vl(...e){let t=AE;for(const n of e)t=t.insert(n.key,n);return t}function LE(e){let t=AE;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Us(){return zl()}function xE(){return zl()}function zl(){return new oo(e=>e.toString(),(e,t)=>e.isEqual(t))}const nC=new Le(xt.comparator),iC=new We(xt.comparator);function ee(...e){let t=iC;for(const n of e)t=t.add(n);return t}const rC=new We(te);function sC(){return rC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(t)?"-0":t}}function CE(e){return{integerValue:""+e}}function oC(e,t){return Rx(t)?CE(t):Up(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function aC(e,t,n){return e instanceof xu?function(r,s){const a={fields:{[dE]:{stringValue:fE},[pE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Dp(s)&&(s=Ef(s)),s&&(a.fields[mE]=s),{mapValue:a}}(n,t):e instanceof dc?RE(e,t):e instanceof mc?OE(e,t):function(r,s){const a=kE(r,s),l=ry(a)+ry(r.Ae);return um(a)&&um(r.Ae)?CE(l):Up(r.serializer,l)}(e,t)}function lC(e,t,n){return e instanceof dc?RE(e,t):e instanceof mc?OE(e,t):n}function kE(e,t){return e instanceof Cu?function(i){return um(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class xu extends Sf{}class dc extends Sf{constructor(t){super(),this.elements=t}}function RE(e,t){const n=NE(t);for(const i of e.elements)n.some(r=>qi(r,i))||n.push(i);return{arrayValue:{values:n}}}class mc extends Sf{constructor(t){super(),this.elements=t}}function OE(e,t){let n=NE(t);for(const i of e.elements)n=n.filter(r=>!qi(r,i));return{arrayValue:{values:n}}}class Cu extends Sf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function ry(e){return Oe(e.integerValue||e.doubleValue)}function NE(e){return Vp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function cC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof dc&&r instanceof dc||i instanceof mc&&r instanceof mc?_a(i.elements,r.elements,qi):i instanceof Cu&&r instanceof Cu?qi(i.Ae,r.Ae):i instanceof xu&&r instanceof xu}(e.transform,t.transform)}class hC{constructor(t,n){this.version=t,this.transformResults=n}}class vi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new vi}static exists(t){return new vi(void 0,t)}static updateTime(t){return new vi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class If{}function DE(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zp(e.key,vi.none()):new kc(e.key,e.data,vi.none());{const n=e.data,i=Nn.empty();let r=new We(sn.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ts(e.key,i,new jn(r.toArray()),vi.none())}}function uC(e,t,n){e instanceof kc?function(r,s,a){const l=r.value.clone(),h=oy(r.fieldTransforms,s,a.transformResults);l.setAll(h),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ts?function(r,s,a){if(!Yh(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=oy(r.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(VE(r)),h.setAll(l),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Bl(e,t,n,i){return e instanceof kc?function(s,a,l,h){if(!Yh(s.precondition,a))return l;const f=s.value.clone(),m=ay(s.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,i):e instanceof Ts?function(s,a,l,h){if(!Yh(s.precondition,a))return l;const f=ay(s.fieldTransforms,h,a),m=a.data;return m.setAll(VE(s)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return Yh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function fC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=kE(i.transform,r||null);s!=null&&(n===null&&(n=Nn.empty()),n.set(i.field,s))}return n||null}function sy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_a(i,r,(s,a)=>cC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class kc extends If{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ts extends If{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VE(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function oy(e,t,n){const i=new Map;ce(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,lC(a,l,n[r]))}return i}function ay(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,aC(s,a,t))}return i}class zp extends If{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends If{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&uC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Bl(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Bl(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=xE();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const h=DE(a,l);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(zt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ee())}isEqual(t){return this.batchId===t.batchId&&_a(this.mutations,t.mutations,(n,i)=>sy(n,i))&&_a(this.baseMutations,t.baseMutations,(n,i)=>sy(n,i))}}class Bp{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ce(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return nC}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Bp(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,re;function gC(e){switch(e){case Q.OK:return Dt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function FE(e){if(e===void 0)return Er("GRPC error has no .code"),Q.UNKNOWN;switch(e){case Be.OK:return Q.OK;case Be.CANCELLED:return Q.CANCELLED;case Be.UNKNOWN:return Q.UNKNOWN;case Be.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Be.INTERNAL:return Q.INTERNAL;case Be.UNAVAILABLE:return Q.UNAVAILABLE;case Be.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Be.NOT_FOUND:return Q.NOT_FOUND;case Be.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Be.ABORTED:return Q.ABORTED;case Be.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Be.DATA_LOSS:return Q.DATA_LOSS;default:return Dt(39323,{code:e})}}(re=Be||(Be={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new es([4294967295,4294967295],0);function ly(e){const t=vC().encode(e),n=new Jw;return n.update(t),new Uint8Array(n.digest())}function cy(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new es([n,i],0),new es([r,s],0)]}class $p{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(i<0)throw new yl(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=es.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(es.fromNumber(i)));return r.compare(yC)===1&&(r=new es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=ly(t),[i,r]=cy(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new $p(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=ly(t),[i,r]=cy(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Rc.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Mf(zt.min(),r,new Le(te),br(),ee())}}class Rc{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Rc(i,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class GE{constructor(t,n){this.targetId=t,this.Ce=n}}class UE{constructor(t,n,i=an.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class hy{constructor(){this.ve=0,this.Fe=uy(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ee(),n=ee(),i=ee();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Dt(38017,{changeType:s})}}),new Rc(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=uy()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wC{constructor(t){this.Ge=t,this.ze=new Map,this.je=br(),this.Je=Lh(),this.He=Lh(),this.Ye=new Le(te)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(dm(s))if(i===0){const a=new xt(s.path);this.et(n,a,mn.newNoDocument(a,zt.min()))}else ce(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),h=l?this.ct(l,t,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=ls(i).toUint8Array()}catch(h){if(h instanceof uE)return pa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new $p(a,r,s)}catch(h){return pa(h instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&dm(l.target)){const h=new xt(l.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,mn.newNoDocument(h,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ee();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Mf(t,n,this.Ye,this.je,i);return this.je=br(),this.Je=Lh(),this.He=Lh(),this.Ye=new Le(te),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new hy,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new We(te),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new We(te),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||bt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new hy),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Lh(){return new Le(xt.comparator)}function uy(){return new Le(xt.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TC={and:"AND",or:"OR"};class PC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _m(e,t){return e.useProto3Json||wf(t)?t:{value:t}}function ku(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function SC(e,t){return ku(e,t.toTimestamp())}function zi(e){return ce(!!e,49232),zt.fromTimestamp(function(n){const i=as(n);return new we(i.seconds,i.nanos)}(e))}function jp(e,t){return gm(e,t).canonicalString()}function gm(e,t){const n=function(r){return new ye(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BE(e){const t=ye.fromString(e);return ce(WE(t),10190,{key:t.toString()}),t}function vm(e,t){return jp(e.databaseId,t.path)}function gd(e,t){const n=BE(t);if(n.get(1)!==e.databaseId.projectId)throw new yt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xt(jE(n))}function $E(e,t){return jp(e.databaseId,t)}function IC(e){const t=BE(e);return t.length===4?ye.emptyPath():jE(t)}function ym(e){return new ye(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jE(e){return ce(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function fy(e,t,n){return{name:vm(e,t),fields:n.value.mapValue.fields}}function MC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Dt(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(f,m){return f.useProto3Json?(ce(m===void 0||typeof m=="string",58123),an.fromBase64String(m||"")):(ce(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),an.fromUint8Array(m||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const m=f.code===void 0?Q.UNKNOWN:FE(f.code);return new yt(m,f.message||"")}(a);n=new UE(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=gd(e,i.document.name),s=zi(i.document.updateTime),a=i.document.createTime?zi(i.document.createTime):zt.min(),l=new Nn({mapValue:{fields:i.document.fields}}),h=mn.newFoundDocument(r,s,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Qh(f,m,h.key,h)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=gd(e,i.document),s=i.readTime?zi(i.readTime):zt.min(),a=mn.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Qh([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=gd(e,i.document),s=i.removedTargetIds||[];n=new Qh([],s,r,null)}else{if(!("filter"in t))return Dt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new _C(r,s),l=i.targetId;n=new GE(l,a)}}return n}function AC(e,t){let n;if(t instanceof kc)n={update:fy(e,t.key,t.value)};else if(t instanceof zp)n={delete:vm(e,t.key)};else if(t instanceof Ts)n={update:fy(e,t.key,t.data),updateMask:VC(t.fieldMask)};else{if(!(t instanceof dC))return Dt(16599,{Vt:t.type});n={verify:vm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof xu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof dc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Dt(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:SC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Dt(27497)}(e,t.precondition)),n}function LC(e,t){return e&&e.length>0?(ce(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?zi(r.updateTime):zi(s);return a.isEqual(zt.min())&&(a=zi(s)),new hC(a,r.transformResults||[])}(n,t))):[]}function xC(e,t){return{documents:[$E(e,t.path)]}}function CC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$E(e,r);const s=function(f){if(f.length!==0)return HE(Ti.create(f,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(m=>function(g){return{field:zo(g.field),direction:OC(g.dir)}}(m))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=_m(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:n,parent:r}}function kC(e){let t=IC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ce(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let s=[];n.where&&(s=function(p){const g=qE(p);return g instanceof Ti&&EE(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(T){return new Lu(Bo(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,wf(g)?null:g}(n.limit));let h=null;n.startAt&&(h=function(p){const g=!!p.before,E=p.values||[];return new Au(E,g)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const g=!p.before,E=p.values||[];return new Au(E,g)}(n.endAt)),Qx(t,r,a,s,l,"F",h,f)}function RC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qE(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Bo(n.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Bo(n.unaryFilter.field);return je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bo(n.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bo(n.unaryFilter.field);return je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return je.create(Bo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(i=>qE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function OC(e){return EC[e]}function NC(e){return bC[e]}function DC(e){return TC[e]}function zo(e){return{fieldPath:e.canonicalString()}}function Bo(e){return sn.fromServerFormat(e.fieldPath)}function HE(e){return e instanceof je?function(n){if(n.op==="=="){if(Jv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(Xv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(Xv(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:NC(n.op),value:n.value}}}(e):e instanceof Ti?function(n){const i=n.getFilters().map(r=>HE(r));return i.length===1?i[0]:{compositeFilter:{op:DC(n.op),filters:i}}}(e):Dt(54877,{filter:e})}function VC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function WE(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,n,i,r,s=zt.min(),a=zt.min(),l=an.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(t){return new Zr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t){this.yt=t}}function GC(e){const t=kC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Cn=new zC}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(os.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(os.min())}updateCollectionGroup(t,n,i){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class zC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new We(ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new We(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=41943040;class On{static withCacheSize(t){return new On(t,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(KE,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ya(0)}static cr(){return new ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LruGarbageCollector",BC=1048576;function py([e,t],[n,i]){const r=te(e,n);return r===0?te(t,i):r}class $C{constructor(t){this.Ir=t,this.buffer=new We(py),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();py(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){bt(my,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){La(n)?bt(my,"Ignoring IndexedDB error during garbage collection: ",n):await Aa(n)}await this.Vr(3e5)})}}class qC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return X.resolve(yf.ce);const i=new $C(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(dy)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dy):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,h,f;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(f=Date.now(),Go()<=Jt.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(h-l)+`ms
	Removed ${p} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function HC(e,t){return new qC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.changes=new oo(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?X.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&Bl(i.mutation,r,jn.empty(),we.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ee()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ee()){const r=Us();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=vl();return s.forEach((l,h)=>{a=a.insert(l,h.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Us();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ee()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=br();const a=zl(),l=function(){return zl()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Ts)?s=s.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Bl(m.mutation,f,m.mutation.getFieldMask(),we.now())):a.set(f.key,jn.empty())}),this.recalculateAndSaveOverlays(t,s).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>l.set(f,new KC(m,a.get(f)??null))),l))}recalculateAndSaveOverlays(t,n){const i=zl();let r=new Le((a,l)=>a-l),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||jn.empty();m=l.applyToLocalView(f,m),i.set(h,m);const p=(r.get(l.batchId)||ee()).add(h);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const h=l.getNext(),f=h.key,m=h.value,p=xE();m.forEach(g=>{if(!s.has(g)){const E=DE(n.get(g),i.get(g));E!==null&&p.set(g,E),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,p))}return X.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return xt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):SE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):X.resolve(Us());let l=cc,h=s;return a.next(f=>X.forEach(f,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(m)?X.resolve():this.remoteDocumentCache.getEntry(t,m).next(g=>{h=h.insert(m,g)}))).next(()=>this.populateOverlays(t,f,s)).next(()=>this.computeViews(t,h,f,ee())).next(m=>({batchId:l,changes:LE(m)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new xt(n)).next(i=>{let r=vl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=vl();return this.indexManager.getCollectionParents(t,s).next(l=>X.forEach(l,h=>{const f=function(p,g){return new Cc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next(m=>{m.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,mn.newInvalidDocument(m)))});let l=vl();return a.forEach((h,f)=>{const m=s.get(h);m!==void 0&&Bl(m.mutation,f,jn.empty(),we.now()),Pf(n,f)&&(l=l.insert(h,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:zi(r.createTime)}}(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:GC(r.bundledQuery),readTime:zi(r.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.overlays=new Le(xt.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Us();return X.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),X.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),X.resolve()}getOverlaysForCollection(t,n,i){const r=Us(),s=n.length+1,a=new xt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const h=l.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&h.largestBatchId>i&&r.set(h.getKey(),h)}return X.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Le((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=s.get(f.largestBatchId);m===null&&(m=Us(),s=s.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=Us(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return X.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new pC(n,i));let s=this.qr.get(n);s===void 0&&(s=ee(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Qr=new We(Je.$r),this.Ur=new We(Je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Je(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Je(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new xt(new ye([])),i=new Je(n,t),r=new Je(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new xt(new ye([])),i=new Je(n,t),r=new Je(n,t+1);let s=ee();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Je(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Je{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return xt.comparator(t.key,n.key)||te(t.Yr,n.Yr)}static Kr(t,n){return te(t.Yr,n.Yr)||xt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new We(Je.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new mC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return X.resolve(a)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Np:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Je(n,0),r=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new We(te);return n.forEach(r=>{const s=new Je(r,0),a=new Je(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),X.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;xt.isDocumentKey(s)||(s=s.child(""));const a=new Je(new xt(s),0);let l=new We(te);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(h.Yr)),!0)},a),X.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return X.forEach(n.mutations,r=>{const s=new Je(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Je(n,0),r=this.Zr.firstAfterOrEqual(i);return X.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(t){this.ri=t,this.docs=function(){return new Le(xt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return X.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(t,n){let i=br();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mn.newInvalidDocument(r))}),X.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=br();const a=n.path,l=new xt(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Lx(Ax(m),i)<=0||(r.has(m.key)||Pf(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Dt(9500)}ii(t,n){return X.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new ek(this)}getSize(t){return X.resolve(this.size)}}class ek extends WC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t){this.persistence=t,this.si=new oo(n=>Fp(n),Gp),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.oi=0,this._i=new qp,this.targetCount=0,this.ai=ya.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ya(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),X.waitFor(s).next(()=>r)}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return X.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),X.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),X.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return X.resolve(i)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n){this.ui={},this.overlays={},this.ci=new yf(0),this.li=!1,this.li=!0,this.hi=new XC,this.referenceDelegate=t(this),this.Pi=new nk(this),this.indexManager=new UC,this.remoteDocumentCache=function(r){return new tk(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new FC(n),this.Ii=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new JC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){bt("MemoryPersistence","Starting transaction:",t);const r=new ik(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return X.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class ik extends Cx{constructor(t){super(),this.currentSequenceNumber=t}}class Hp{constructor(t){this.persistence=t,this.Ri=new qp,this.Vi=null}static mi(t){return new Hp(t)}get fi(){if(this.Vi)return this.Vi;throw Dt(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),X.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,i=>{const r=xt.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,zt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ru{constructor(t,n){this.persistence=t,this.pi=new oo(i=>Ox(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=HC(this,n)}static mi(t,n){return new Ru(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return X.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?X.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,zt.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Kh(t.data.value)),n}br(t,n,i){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return X.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ee(),r=ee();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Wp(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return PI()?8:kx(vn())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rk;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(Go()<=Jt.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Go()<=Jt.DEBUG&&bt("QueryEngine","Query:",Uo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Go()<=Jt.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ui(n))):X.resolve())}ys(t,n){if(iy(n))return X.resolve(null);let i=Ui(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=pm(n,null,"F"),i=Ui(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ee(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(h=>{const f=this.Ds(n,l);return this.Cs(n,f,a,h.readTime)?this.ys(t,pm(n,null,"F")):this.vs(t,f,n,h)}))})))}ws(t,n,i,r){return iy(n)||r.isEqual(zt.min())?X.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?X.resolve(null):(Go()<=Jt.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Uo(n)),this.vs(t,a,n,Mx(r,cc)).next(l=>l))})}Ds(t,n){let i=new We(ME(t));return n.forEach((r,s)=>{Pf(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Go()<=Jt.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.ps.getDocumentsMatchingQuery(t,n,os.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",ok=3e8;class ak{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Le(te),this.xs=new oo(s=>Fp(s),Gp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ZC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function lk(e,t,n,i){return new ak(e,t,n,i)}async function YE(e,t){const n=Bt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let h=ee();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of s){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function ck(e,t){const n=Bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,h,f,m){const p=f.batch,g=p.keys();let E=X.resolve();return g.forEach(T=>{E=E.next(()=>m.getEntry(h,T)).next(P=>{const x=f.docVersions.get(T);ce(x!==null,48541),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),m.addEntry(P)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(h,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=ee();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(h=h.add(l.batch.mutations[f].key));return h}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function QE(e){const t=Bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function hk(e,t){const n=Bt(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((m,p)=>{const g=r.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(s,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,m.addedDocuments,p)));let E=g.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(an.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(p,E),function(P,x,O){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=ok?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,E,m)&&l.push(n.Pi.updateTargetData(s,E))});let h=br(),f=ee();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(uk(s,a,t.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(zt.min())){const m=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(m)}return X.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,f)).next(()=>h)}).then(s=>(n.Ms=r,s))}function uk(e,t,n){let i=ee(),r=ee();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=br();return n.forEach((l,h)=>{const f=s.get(l);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),h.isNoDocument()&&h.version.isEqual(zt.min())?(t.removeEntry(l,h.readTime),a=a.insert(l,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),a=a.insert(l,h)):bt(Kp,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function fk(e,t){const n=Bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Np),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function dk(e,t){const n=Bt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,X.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Zr(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function wm(e,t,n){const i=Bt(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!La(a))throw a;bt(Kp,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function _y(e,t,n){const i=Bt(e);let r=zt.min(),s=ee();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const p=Bt(h),g=p.xs.get(m);return g!==void 0?X.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,m)}(i,a,Ui(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(h=>{s=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:zt.min(),n?s:ee())).next(l=>(mk(i,Jx(t),l),{documents:l,Qs:s})))}function mk(e,t,n){let i=e.Os.get(t)||zt.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class gy{constructor(){this.activeTargetIds=sC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pk{constructor(){this.Mo=new gy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new gy,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="ConnectivityMonitor";class yy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){bt(vy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){bt(vy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function Em(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="RestConnection",gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vk{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Iu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=Em(),l=this.zo(t,n.toUriEncodedString());bt(vd,`Sending RPC '${t}' ${a}:`,l,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,s);const{host:f}=new URL(l),m=Pa(f);return this.Jo(t,l,h,i,m).then(p=>(bt(vd,`Received RPC '${t}' ${a}: `,p),p),p=>{throw pa(vd,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=gk[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class wk extends vk{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=Em();return new Promise((l,h)=>{const f=new tE;f.setWithCredentials(!0),f.listenOnce(eE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Wh.NO_ERROR:const p=f.getResponseJson();bt(cn,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Wh.TIMEOUT:bt(cn,`RPC '${t}' ${a} timed out`),h(new yt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const g=f.getStatus();if(bt(cn,`RPC '${t}' ${a} failed with status:`,g,"response text:",f.getResponseText()),g>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const P=function(O){const V=O.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(V)>=0?V:Q.UNKNOWN}(T.status);h(new yt(P,T.message))}else h(new yt(Q.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new yt(Q.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{bt(cn,`RPC '${t}' ${a} completed.`)}});const m=JSON.stringify(r);bt(cn,`RPC '${t}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(t,n,i){const r=Em(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=rE(),l=iE(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=s.join("");bt(cn,`Creating RPC '${t}' stream ${r}: ${m}`,h);const p=a.createWebChannel(m,h);this.I_(p);let g=!1,E=!1;const T=new yk({Yo:x=>{E?bt(cn,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(g||(bt(cn,`Opening RPC '${t}' stream ${r} transport.`),p.open(),g=!0),bt(cn,`RPC '${t}' stream ${r} sending:`,x),p.send(x))},Zo:()=>p.close()}),P=(x,O,V)=>{x.listen(O,U=>{try{V(U)}catch(q){setTimeout(()=>{throw q},0)}})};return P(p,gl.EventType.OPEN,()=>{E||(bt(cn,`RPC '${t}' stream ${r} transport opened.`),T.o_())}),P(p,gl.EventType.CLOSE,()=>{E||(E=!0,bt(cn,`RPC '${t}' stream ${r} transport closed`),T.a_(),this.E_(p))}),P(p,gl.EventType.ERROR,x=>{E||(E=!0,pa(cn,`RPC '${t}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),T.a_(new yt(Q.UNAVAILABLE,"The operation could not be completed")))}),P(p,gl.EventType.MESSAGE,x=>{if(!E){const O=x.data[0];ce(!!O,16349);const V=O,U=V?.error||V[0]?.error;if(U){bt(cn,`RPC '${t}' stream ${r} received error:`,U);const q=U.status;let J=function(I){const M=Be[I];if(M!==void 0)return FE(M)}(q),at=U.message;J===void 0&&(J=Q.INTERNAL,at="Unknown error status: "+q+" with message "+U.message),E=!0,T.a_(new yt(J,at)),p.close()}else bt(cn,`RPC '${t}' stream ${r} received:`,O),T.u_(O)}}),P(l,nE.STAT_EVENT,x=>{x.stat===lm.PROXY?bt(cn,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===lm.NOPROXY&&bt(cn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(e){return new PC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&bt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="PersistentStream";class JE{constructor(t,n,i,r,s,a,l,h){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XE(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new yt(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return bt(wy,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(bt(wy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ek extends JE{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=MC(this.serializer,t),i=function(s){if(!("targetChange"in s))return zt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?zt.min():a.readTime?zi(a.readTime):zt.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=ym(this.serializer),n.addTarget=function(s,a){let l;const h=a.target;if(l=dm(h)?{documents:xC(s,h)}:{query:CC(s,h).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=zE(s,a.resumeToken);const f=_m(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(zt.min())>0){l.readTime=ku(s,a.snapshotVersion.toTimestamp());const f=_m(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const i=RC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=ym(this.serializer),n.removeTarget=t,this.q_(n)}}class bk extends JE{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ce(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ce(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ce(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=LC(t.writeResults,t.commitTime),i=zi(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=ym(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>AC(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{}class Pk extends Tk{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new yt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,gm(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new yt(Q.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,gm(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new yt(Q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Sk{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Er(n),this.aa=!1):bt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class Ik{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ao(this)&&(bt(Js,"Restarting streams for network reachability change."),await async function(h){const f=Bt(h);f.Ea.add(4),await Oc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Lf(f)}(this))})}),this.Ra=new Sk(i,r)}}async function Lf(e){if(ao(e))for(const t of e.da)await t(!0)}async function Oc(e){for(const t of e.da)await t(!1)}function tb(e,t){const n=Bt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Xp(n)?Qp(n):xa(n).O_()&&Yp(n,t))}function Zp(e,t){const n=Bt(e),i=xa(n);n.Ia.delete(t),i.O_()&&eb(n,t),n.Ia.size===0&&(i.O_()?i.L_():ao(n)&&n.Ra.set("Unknown"))}function Yp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(zt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xa(e).Y_(t)}function eb(e,t){e.Va.Ue(t),xa(e).Z_(t)}function Qp(e){e.Va=new wC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),xa(e).start(),e.Ra.ua()}function Xp(e){return ao(e)&&!xa(e).x_()&&e.Ia.size>0}function ao(e){return Bt(e).Ea.size===0}function nb(e){e.Va=void 0}async function Mk(e){e.Ra.set("Online")}async function Ak(e){e.Ia.forEach((t,n)=>{Yp(e,t)})}async function Lk(e,t){nb(e),Xp(e)?(e.Ra.ha(t),Qp(e)):e.Ra.set("Unknown")}async function xk(e,t,n){if(e.Ra.set("Online"),t instanceof UE&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){bt(Js,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Ou(e,i)}else if(t instanceof Qh?e.Va.Ze(t):t instanceof GE?e.Va.st(t):e.Va.tt(t),!n.isEqual(zt.min()))try{const i=await QE(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=s.Ia.get(f);m&&s.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,f)=>{const m=s.Ia.get(h);if(!m)return;s.Ia.set(h,m.withResumeToken(an.EMPTY_BYTE_STRING,m.snapshotVersion)),eb(s,h);const p=new Zr(m.target,h,f,m.sequenceNumber);Yp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){bt(Js,"Failed to raise snapshot:",i),await Ou(e,i)}}async function Ou(e,t,n){if(!La(t))throw t;e.Ea.add(1),await Oc(e),e.Ra.set("Offline"),n||(n=()=>QE(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{bt(Js,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Lf(e)})}function ib(e,t){return t().catch(n=>Ou(e,n,t))}async function xf(e){const t=Bt(e),n=hs(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Np;for(;Ck(t);)try{const r=await fk(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,kk(t,r)}catch(r){await Ou(t,r)}rb(t)&&sb(t)}function Ck(e){return ao(e)&&e.Ta.length<10}function kk(e,t){e.Ta.push(t);const n=hs(e);n.O_()&&n.X_&&n.ea(t.mutations)}function rb(e){return ao(e)&&!hs(e).x_()&&e.Ta.length>0}function sb(e){hs(e).start()}async function Rk(e){hs(e).ra()}async function Ok(e){const t=hs(e);for(const n of e.Ta)t.ea(n.mutations)}async function Nk(e,t,n){const i=e.Ta.shift(),r=Bp.from(i,t,n);await ib(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await xf(e)}async function Dk(e,t){t&&hs(e).X_&&await async function(i,r){if(function(a){return gC(a)&&a!==Q.ABORTED}(r.code)){const s=i.Ta.shift();hs(i).B_(),await ib(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await xf(i)}}(e,t),rb(e)&&sb(e)}async function Ey(e,t){const n=Bt(e);n.asyncQueue.verifyOperationInProgress(),bt(Js,"RemoteStore received new credentials");const i=ao(n);n.Ea.add(3),await Oc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Lf(n)}async function Vk(e,t){const n=Bt(e);t?(n.Ea.delete(2),await Lf(n)):t||(n.Ea.add(2),await Oc(n),n.Ra.set("Unknown"))}function xa(e){return e.ma||(e.ma=function(n,i,r){const s=Bt(n);return s.sa(),new Ek(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:Mk.bind(null,e),t_:Ak.bind(null,e),r_:Lk.bind(null,e),H_:xk.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Xp(e)?Qp(e):e.Ra.set("Unknown")):(await e.ma.stop(),nb(e))})),e.ma}function hs(e){return e.fa||(e.fa=function(n,i,r){const s=Bt(n);return s.sa(),new bk(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Rk.bind(null,e),r_:Dk.bind(null,e),ta:Ok.bind(null,e),na:Nk.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await xf(e)):(await e.fa.stop(),e.Ta.length>0&&(bt(Js,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Jp(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t_(e,t){if(Er("AsyncQueue",`${t}: ${e}`),La(e))return new yt(Q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(t){return new oa(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||xt.comparator(n.key,i.key):(n,i)=>xt.comparator(n.key,i.key),this.keyedMap=vl(),this.sortedSet=new Le(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof oa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new oa;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.ga=new Le(xt.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Dt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class wa{constructor(t,n,i,r,s,a,l,h,f){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new wa(t,n,oa.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Gk{constructor(){this.queries=Ty(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Bt(n),s=r.queries;r.queries=Ty(),s.forEach((a,l)=>{for(const h of l.Sa)h.onError(i)})})(this,new yt(Q.ABORTED,"Firestore shutting down"))}}function Ty(){return new oo(e=>IE(e),Tf)}async function e_(e,t){const n=Bt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new Fk,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=t_(a,`Initialization of query '${Uo(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&i_(n)}async function n_(e,t){const n=Bt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Uk(e,t){const n=Bt(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&i_(n)}function zk(e,t,n){const i=Bt(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function i_(e){e.Ca.forEach(t=>{t.next()})}var bm,Py;(Py=bm||(bm={})).Ma="default",Py.Cache="cache";class r_{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new wa(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=wa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t){this.key=t}}class ab{constructor(t){this.key=t}}class Bk{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ee(),this.mutatedKeys=ee(),this.eu=ME(t),this.tu=new oa(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new by,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((m,p)=>{const g=r.get(m),E=Pf(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let x=!1;g&&E?g.data.isEqual(E.data)?T!==P&&(i.track({type:3,doc:E}),x=!0):this.su(g,E)||(i.track({type:2,doc:E}),x=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(l=!0)):!g&&E?(i.track({type:0,doc:E}),x=!0):g&&!E&&(i.track({type:1,doc:g}),x=!0,(h||f)&&(l=!0)),x&&(E?(a=a.add(E),s=P?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((m,p)=>function(E,T){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Rt:x})}};return P(E)-P(T)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new wa(this.query,t.tu,s,a,t.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new by,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ee(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new ab(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new ob(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ee();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const s_="SyncEngine";class $k{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class jk{constructor(t){this.key=t,this.hu=!1}}class qk{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new oo(l=>IE(l),Tf),this.Iu=new Map,this.Eu=new Set,this.du=new Le(xt.comparator),this.Au=new Map,this.Ru=new qp,this.Vu={},this.mu=new Map,this.fu=ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hk(e,t,n=!0){const i=db(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await lb(i,t,n,!0),r}async function Wk(e,t){const n=db(e);await lb(n,t,!0,!1)}async function lb(e,t,n,i){const r=await dk(e.localStore,Ui(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await Kk(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&tb(e.remoteStore,r),l}async function Kk(e,t,n,i,r){e.pu=(p,g,E)=>async function(P,x,O,V){let U=x.view.ru(O);U.Cs&&(U=await _y(P.localStore,x.query,!1).then(({documents:k})=>x.view.ru(k,U)));const q=V&&V.targetChanges.get(x.targetId),J=V&&V.targetMismatches.get(x.targetId)!=null,at=x.view.applyChanges(U,P.isPrimaryClient,q,J);return Iy(P,x.targetId,at.au),at.snapshot}(e,p,g,E);const s=await _y(e.localStore,t,!0),a=new Bk(t,s.Qs),l=a.ru(s.documents),h=Rc.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),f=a.applyChanges(l,e.isPrimaryClient,h);Iy(e,n,f.au);const m=new $k(t,n,a);return e.Tu.set(t,m),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function Zk(e,t,n){const i=Bt(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Tf(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await wm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Zp(i.remoteStore,r.targetId),Tm(i,r.targetId)}).catch(Aa)):(Tm(i,r.targetId),await wm(i.localStore,r.targetId,!0))}async function Yk(e,t){const n=Bt(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zp(n.remoteStore,i.targetId))}async function Qk(e,t,n){const i=rR(e);try{const r=await function(a,l){const h=Bt(a),f=we.now(),m=l.reduce((E,T)=>E.add(T.key),ee());let p,g;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=br(),P=ee();return h.Ns.getEntries(E,m).next(x=>{T=x,T.forEach((O,V)=>{V.isValidDocument()||(P=P.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,T)).next(x=>{p=x;const O=[];for(const V of l){const U=fC(V,p.get(V.key).overlayedDocument);U!=null&&O.push(new Ts(V.key,U,vE(U.value.mapValue),vi.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,O,l)}).next(x=>{g=x;const O=x.applyToLocalDocumentSet(p,P);return h.documentOverlayCache.saveOverlays(E,x.batchId,O)})}).then(()=>({batchId:g.batchId,changes:LE(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new Le(te)),f=f.insert(l,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await Nc(i,r.changes),await xf(i.remoteStore)}catch(r){const s=t_(r,"Failed to persist write");n.reject(s)}}async function cb(e,t){const n=Bt(e);try{const i=await hk(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ce(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ce(a.hu,14607):r.removedDocuments.size>0&&(ce(a.hu,42227),a.hu=!1))}),await Nc(n,i,t)}catch(i){await Aa(i)}}function Sy(e,t,n){const i=Bt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const h=Bt(a);h.onlineState=l;let f=!1;h.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(f=!0)}),f&&i_(h)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Xk(e,t,n){const i=Bt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Le(xt.comparator);a=a.insert(s,mn.newNoDocument(s,zt.min()));const l=ee().add(s),h=new Mf(zt.min(),new Map,new Le(te),a,l);await cb(i,h),i.du=i.du.remove(s),i.Au.delete(t),o_(i)}else await wm(i.localStore,t,!1).then(()=>Tm(i,t,n)).catch(Aa)}async function Jk(e,t){const n=Bt(e),i=t.batch.batchId;try{const r=await ck(n.localStore,t);ub(n,i,null),hb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nc(n,r)}catch(r){await Aa(r)}}async function tR(e,t,n){const i=Bt(e);try{const r=await function(a,l){const h=Bt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,l).next(p=>(ce(p!==null,37113),m=p.keys(),h.mutationQueue.removeMutationBatch(f,p))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,t);ub(i,t,n),hb(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Nc(i,r)}catch(r){await Aa(r)}}function hb(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function ub(e,t,n){const i=Bt(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Tm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||fb(e,i)})}function fb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Zp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),o_(e))}function Iy(e,t,n){for(const i of n)i instanceof ob?(e.Ru.addReference(i.key,t),eR(e,i)):i instanceof ab?(bt(s_,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||fb(e,i.key)):Dt(19791,{wu:i})}function eR(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(bt(s_,"New document in limbo: "+n),e.Eu.add(i),o_(e))}function o_(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new xt(ye.fromString(t)),i=e.fu.next();e.Au.set(i,new jk(n)),e.du=e.du.insert(n,i),tb(e.remoteStore,new Zr(Ui(bf(n.path)),i,"TargetPurposeLimboResolution",yf.ce))}}async function Nc(e,t,n){const i=Bt(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,h)=>{a.push(i.pu(h,t,n).then(f=>{if((f||n)&&i.isPrimaryClient){const m=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){r.push(f);const m=Wp.As(h.targetId,f);s.push(m)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Bt(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>X.forEach(f,g=>X.forEach(g.Es,E=>m.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>X.forEach(g.ds,E=>m.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!La(p))throw p;bt(Kp,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const E=m.Ms.get(g),T=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(T);m.Ms=m.Ms.insert(g,P)}}}(i.localStore,s))}async function nR(e,t){const n=Bt(e);if(!n.currentUser.isEqual(t)){bt(s_,"User change. New user:",t.toKey());const i=await YE(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(h=>{h.reject(new yt(Q.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Nc(n,i.Ls)}}function iR(e,t){const n=Bt(e),i=n.Au.get(t);if(i&&i.hu)return ee().add(i.key);{let r=ee();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function db(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xk.bind(null,t),t.Pu.H_=Uk.bind(null,t.eventManager),t.Pu.yu=zk.bind(null,t.eventManager),t}function rR(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tR.bind(null,t),t}class Nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Af(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return lk(this.persistence,new sk,t.initialUser,this.serializer)}Cu(t){return new ZE(Hp.mi,this.serializer)}Du(t){return new pk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nu.provider={build:()=>new Nu};class sR extends Nu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ce(this.persistence.referenceDelegate instanceof Ru,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new ZE(i=>Ru.mi(i,n),this.serializer)}}class Pm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Sy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nR.bind(null,this.syncEngine),await Vk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Gk}()}createDatastore(t){const n=Af(t.databaseInfo.databaseId),i=function(s){return new wk(s)}(t.databaseInfo);return function(s,a,l,h){return new Pk(s,a,l,h)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new Ik(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Sy(this.syncEngine,n,0),function(){return yy.v()?new yy:new _k}())}createSyncEngine(t,n){return function(r,s,a,l,h,f,m){const p=new qk(r,s,a,l,h,f);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const i=Bt(n);bt(Js,"RemoteStore shutting down."),i.Ea.add(5),await Oc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Er("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class oR{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=un.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{bt(us,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(bt(us,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=t_(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function wd(e,t){e.asyncQueue.verifyOperationInProgress(),bt(us,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await YE(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function My(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aR(e);bt(us,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Ey(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Ey(t.remoteStore,r)),e._onlineComponents=t}async function aR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bt(us,"Using user provided OfflineComponentProvider");try{await wd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await wd(e,new Nu)}}else bt(us,"Using default OfflineComponentProvider"),await wd(e,new sR(void 0));return e._offlineComponents}async function mb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bt(us,"Using user provided OnlineComponentProvider"),await My(e,e._uninitializedComponentsProvider._online)):(bt(us,"Using default OnlineComponentProvider"),await My(e,new Pm))),e._onlineComponents}function lR(e){return mb(e).then(t=>t.syncEngine)}async function Du(e){const t=await mb(e),n=t.eventManager;return n.onListen=Hk.bind(null,t.syncEngine),n.onUnlisten=Zk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Wk.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yk.bind(null,t.syncEngine),n}function cR(e,t,n={}){const i=new pr;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,f){const m=new a_({next:g=>{m.Nu(),a.enqueueAndForget(()=>n_(s,p));const E=g.docs.has(l);!E&&g.fromCache?f.reject(new yt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&h&&h.source==="server"?f.reject(new yt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new r_(bf(l.path),m,{includeMetadataChanges:!0,qa:!0});return e_(s,p)}(await Du(e),e.asyncQueue,t,n,i)),i.promise}function hR(e,t,n={}){const i=new pr;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,f){const m=new a_({next:g=>{m.Nu(),a.enqueueAndForget(()=>n_(s,p)),g.fromCache&&h.source==="server"?f.reject(new yt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new r_(l,m,{includeMetadataChanges:!0,qa:!0});return e_(s,p)}(await Du(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="firestore.googleapis.com",Ly=!0;class xy{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new yt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_b,this.ssl=Ly}else this.host=t.host,this.ssl=t.ssl??Ly;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=KE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<BC)throw new yt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ix("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pb(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new yt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new yt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new yt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cf{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new yt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xy(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _x;switch(i.type){case"firstParty":return new wx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new yt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Ay.get(n);i&&(bt("ComponentProvider","Removing Datastore"),Ay.delete(n),i.terminate())}(this),Promise.resolve()}}function uR(e,t,n,i={}){e=oi(e,Cf);const r=Pa(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(X1(`https://${l}`),J1("Firestore",!0)),s.host!==_b&&s.host!==l&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:l,ssl:r,emulatorOptions:i};if(!Ks(h,a)&&(e._setSettings(h),i.mockUserToken)){let f,m;if(typeof i.mockUserToken=="string")f=i.mockUserToken,m=un.MOCK_USER;else{f=pI(i.mockUserToken,e._app?.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new yt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new un(p)}e._authCredentials=new gx(new oE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new lo(this.firestore,t,this._query)}}class De{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new De(this.firestore,t,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(xc(n,De._jsonSchema))return new De(t,i||null,new xt(ye.fromString(n.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:qe("string",De._jsonSchemaVersion),referencePath:qe("string")};class ns extends lo{constructor(t,n,i){super(t,n,bf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new De(this.firestore,null,new xt(t))}withConverter(t){return new ns(this.firestore,t,this._path)}}function pc(e,t,...n){if(e=Ke(e),aE("collection","path",t),e instanceof Cf){const i=ye.fromString(t,...n);return $v(i),new ns(e,null,i)}{if(!(e instanceof De||e instanceof ns))throw new yt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ye.fromString(t,...n));return $v(i),new ns(e.firestore,null,i)}}function wl(e,t,...n){if(e=Ke(e),arguments.length===1&&(t=Op.newId()),aE("doc","path",t),e instanceof Cf){const i=ye.fromString(t,...n);return Bv(i),new De(e,null,new xt(i))}{if(!(e instanceof De||e instanceof ns))throw new yt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ye.fromString(t,...n));return Bv(i),new De(e.firestore,e instanceof ns?e.converter:null,new xt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="AsyncQueue";class ky{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XE(this,"async_queue_retry"),this._c=()=>{const i=yd();i&&bt(Cy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!La(t))throw t;bt(Cy,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Er("INTERNAL UNHANDLED ERROR: ",Ry(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Jp.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Dt(47125,{Pc:Ry(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Ry(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class fs extends Cf{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new ky,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ky(t),this._firestoreClient=void 0,await t}}}function $l(e,t){const n=iw(),i=Iu,r=bp(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=dI("firestore");s&&uR(r,...s)}return r}function kf(e){if(e._terminated)throw new yt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fR(e),e._firestoreClient}function fR(e){const t=e._freezeSettings(),n=function(r,s,a,l){return new Vx(r,s,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,pb(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new oR(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(r){const s=r?._online.build();return{_offline:r?._offline.build(s),_online:s}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ii(an.fromBase64String(t))}catch(n){throw new yt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ii(an.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(xc(t,ii._jsonSchema))return ii.fromBase64String(t.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:qe("string",ii._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new yt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new yt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return te(this._lat,t._lat)||te(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(t){if(xc(t,Bi._jsonSchema))return new Bi(t.latitude,t.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:qe("string",Bi._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(xc(t,$i._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new $i(t.vectorValues);throw new yt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:qe("string",$i._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=/^__.*__$/;class mR{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Ts(t,this.data,this.fieldMask,n,this.fieldTransforms):new kc(t,this.data,n,this.fieldTransforms)}}class gb{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Ts(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function vb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ac:e})}}class c_{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new c_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Vu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(vb(this.Ac)&&dR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class pR{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Af(t)}Cc(t,n,i,r=!1){return new c_({Ac:t,methodName:n,Dc:i,path:sn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function h_(e){const t=e._freezeSettings(),n=Af(e._databaseId);return new pR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _R(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);u_("Data must be an object, but it was:",a,i);const l=yb(i,a);let h,f;if(s.merge)h=new jn(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const p of s.mergeFields){const g=Sm(t,p,n);if(!a.contains(g))throw new yt(Q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Eb(m,g)||m.push(g)}h=new jn(m),f=a.fieldTransforms.filter(p=>h.covers(p.field))}else h=null,f=a.fieldTransforms;return new mR(new Nn(l),h,f)}class Of extends l_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Of}}function gR(e,t,n,i){const r=e.Cc(1,t,n);u_("Data must be an object, but it was:",r,i);const s=[],a=Nn.empty();bs(i,(h,f)=>{const m=f_(t,h,n);f=Ke(f);const p=r.yc(m);if(f instanceof Of)s.push(m);else{const g=Dc(f,p);g!=null&&(s.push(m),a.set(m,g))}});const l=new jn(s);return new gb(a,l,r.fieldTransforms)}function vR(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Sm(t,i,n)],h=[r];if(s.length%2!=0)throw new yt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Sm(t,s[g])),h.push(s[g+1]);const f=[],m=Nn.empty();for(let g=l.length-1;g>=0;--g)if(!Eb(f,l[g])){const E=l[g];let T=h[g];T=Ke(T);const P=a.yc(E);if(T instanceof Of)f.push(E);else{const x=Dc(T,P);x!=null&&(f.push(E),m.set(E,x))}}const p=new jn(f);return new gb(m,p,a.fieldTransforms)}function yR(e,t,n,i=!1){return Dc(n,e.Cc(i?4:3,t))}function Dc(e,t){if(wb(e=Ke(e)))return u_("Unsupported field value:",t,e),yb(e,t);if(e instanceof l_)return function(i,r){if(!vb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let h=Dc(l,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=we.fromDate(i);return{timestampValue:ku(r.serializer,s)}}if(i instanceof we){const s=new we(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ku(r.serializer,s)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ii)return{bytesValue:zE(r.serializer,i._byteString)};if(i instanceof De){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $i)return function(a,l){return{mapValue:{fields:{[_E]:{stringValue:gE},[Mu]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Up(l.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${vf(i)}`)}(e,t)}function yb(e,t){const n={};return hE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bs(e,(i,r)=>{const s=Dc(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function wb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof we||e instanceof Bi||e instanceof ii||e instanceof De||e instanceof l_||e instanceof $i)}function u_(e,t,n){if(!wb(n)||!lE(n)){const i=vf(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Sm(e,t,n){if((t=Ke(t))instanceof Rf)return t._internalPath;if(typeof t=="string")return f_(e,t);throw Vu("Field path arguments must be of type string or ",e,!1,void 0,n)}const wR=new RegExp("[~\\*/\\[\\]]");function f_(e,t,n){if(t.search(wR)>=0)throw Vu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Rf(...t.split("."))._internalPath}catch{throw Vu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vu(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new yt(Q.INVALID_ARGUMENT,l+e+h)}function Eb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ER(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(d_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ER extends bb{data(){return super.data()}}function d_(e,t){return typeof t=="string"?f_(e,t):t instanceof Rf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new yt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class bR extends m_{}function Pb(e,t,...n){let i=[];t instanceof m_&&i.push(t),i=i.concat(n),function(s){const a=s.filter(h=>h instanceof p_).length,l=s.filter(h=>h instanceof Nf).length;if(a>1||a>0&&l>0)throw new yt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Nf extends bR{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Nf(t,n,i)}_apply(t){const n=this._parse(t);return Sb(t._query,n),new lo(t.firestore,t.converter,mm(t._query,n))}_parse(t){const n=h_(t.firestore);return function(s,a,l,h,f,m,p){let g;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new yt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Dy(p,m);const T=[];for(const P of p)T.push(Ny(h,s,P));g={arrayValue:{values:T}}}else g=Ny(h,s,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Dy(p,m),g=yR(l,a,p,m==="in"||m==="not-in");return je.create(f,m,g)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function TR(e,t,n){const i=t,r=d_("where",e);return Nf._create(r,i,n)}class p_ extends m_{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new p_(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const h of l)Sb(a,h),a=mm(a,h)}(t._query,n),new lo(t.firestore,t.converter,mm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ny(e,t,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new yt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SE(t)&&n.indexOf("/")!==-1)throw new yt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(ye.fromString(n));if(!xt.isDocumentKey(i))throw new yt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qv(e,new xt(i))}if(n instanceof De)return Qv(e,n._key);throw new yt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(n)}.`)}function Dy(e,t){if(!Array.isArray(e)||e.length===0)throw new yt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Sb(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new yt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new yt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class PR{convertValue(t,n="none"){switch(cs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ls(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return bs(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){const n=t.fields?.[Mu].arrayValue?.values?.map(i=>Oe(i.doubleValue));return new $i(n)}convertGeoPoint(t){return new Bi(Oe(t.latitude),Oe(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Ef(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(hc(t));default:return null}}convertTimestamp(t){const n=as(t);return new we(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ye.fromString(t);ce(WE(i),9688,{name:t});const r=new uc(i.get(1),i.get(3)),s=new xt(i.popFirst(5));return r.isEqual(n)||Er(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class El{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hs extends bb{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(d_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:qe("string",Hs._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class Xh extends Hs{data(t={}){return super.data(t)}}class Ws{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new El(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Xh(this._firestore,this._userDataWriter,i.key,i,new El(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new yt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const h=new Xh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new El(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const h=new Xh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new El(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:IR(l.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ws._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function IR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(e){e=oi(e,De);const t=oi(e.firestore,fs);return cR(kf(t),e._key).then(n=>Ab(t,e,n))}Ws._jsonSchemaVersion="firestore/querySnapshot/1.0",Ws._jsonSchema={type:qe("string",Ws._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class __ extends PR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ii(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new De(this.firestore,null,n)}}function Ib(e){e=oi(e,lo);const t=oi(e.firestore,fs),n=kf(t),i=new __(t);return Tb(e._query),hR(n,e._query).then(r=>new Ws(t,i,e,r))}function Vy(e,t,n,...i){e=oi(e,De);const r=oi(e.firestore,fs),s=h_(r);let a;return a=typeof(t=Ke(t))=="string"||t instanceof Rf?vR(s,"updateDoc",e._key,t,n,i):gR(s,"updateDoc",e._key,t),g_(r,[a.toMutation(e._key,vi.exists(!0))])}function AR(e){return g_(oi(e.firestore,fs),[new zp(e._key,vi.none())])}function Mb(e,t){const n=oi(e.firestore,fs),i=wl(e),r=SR(e.converter,t);return g_(n,[_R(h_(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,vi.exists(!1))]).then(()=>i)}function LR(e,...t){e=Ke(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Oy(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Oy(t[i])){const h=t[i];t[i]=h.next?.bind(h),t[i+1]=h.error?.bind(h),t[i+2]=h.complete?.bind(h)}let s,a,l;if(e instanceof De)a=oi(e.firestore,fs),l=bf(e._key.path),s={next:h=>{t[i]&&t[i](Ab(a,e,h))},error:t[i+1],complete:t[i+2]};else{const h=oi(e,lo);a=oi(h.firestore,fs),l=h._query;const f=new __(a);s={next:m=>{t[i]&&t[i](new Ws(a,f,h,m))},error:t[i+1],complete:t[i+2]},Tb(e._query)}return function(f,m,p,g){const E=new a_(g),T=new r_(m,E,p);return f.asyncQueue.enqueueAndForget(async()=>e_(await Du(f),T)),()=>{E.Nu(),f.asyncQueue.enqueueAndForget(async()=>n_(await Du(f),T))}}(kf(a),l,r,s)}function g_(e,t){return function(i,r){const s=new pr;return i.asyncQueue.enqueueAndForget(async()=>Qk(await lR(i),r,s)),s.promise}(kf(e),t)}function Ab(e,t,n){const i=n.docs.get(t._key),r=new __(e);return new Hs(e,r,t._key,i,new El(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){Ma=r})(Sa),fa(new Zs("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new fs(new vx(i.getProvider("auth-internal")),new Ex(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new yt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(f.options.projectId,m)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ts(Fv,Gv,t),ts(Fv,Gv,"esm2020")})();const Kr=ue(null),xR={setup(){const e=ue(""),t=ue([]),n=$l();async function i(){if(!(e.value.trim()===""||!Kr.value))try{const s=await Mb(pc(n,"projects"),{name:e.value,owner:Kr.value.uid});e.value="",r()}catch(s){console.error("Error adding document: ",s)}}async function r(){if(!Kr.value){t.value=[];return}const s=Pb(pc(n,"projects"),TR("owner","==",Kr.value.uid)),a=await Ib(s);t.value=a.docs.map(l=>({id:l.id,...l.data()}))}return dr(Kr,(s,a)=>{r()},{immediate:!0}),{newProjectName:e,projects:t,createProject:i}}},CR={class:"dashboard-container"},kR={class:"dashboard-card"},RR={key:0},OR={key:1,class:"no-projects-message"};function NR(e,t,n,i,r,s){const a=dp("router-link");return pe(),ke("div",CR,[dt("div",kR,[t[3]||(t[3]=dt("h2",null,"Gestor de Proyectos",-1)),dt("form",{onSubmit:t[1]||(t[1]=uf((...l)=>i.createProject&&i.createProject(...l),["prevent"]))},[fu(dt("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>i.newProjectName=l),placeholder:"Nombre del nuevo proyecto...",required:""},null,512),[[_u,i.newProjectName]]),t[2]||(t[2]=dt("button",{type:"submit"},"Crear Proyecto",-1))],32),i.projects.length>0?(pe(),ke("ul",RR,[(pe(!0),ke(zn,null,af(i.projects,l=>(pe(),ke("li",{key:l.id},[on(a,{to:{name:"MapView",params:{id:l.id}}},{default:_1(()=>[nc(Ce(l.name),1)]),_:2},1032,["to"])]))),128))])):(pe(),ke("p",OR," Aún no tienes proyectos. ¡Crea uno para empezar! "))])])}const DR=so(xR,[["render",NR],["__scopeId","data-v-30391fde"]]);function VR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var FR=bl.exports,Fy;function GR(){return Fy||(Fy=1,function(e,t){(function(n,i){i(t)})(FR,function(n){var i="1.9.4";function r(o){var c,d,_,y;for(d=1,_=arguments.length;d<_;d++){y=arguments[d];for(c in y)o[c]=y[c]}return o}var s=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function a(o,c){var d=Array.prototype.slice;if(o.bind)return o.bind.apply(o,d.call(arguments,1));var _=d.call(arguments,2);return function(){return o.apply(c,_.length?_.concat(d.call(arguments)):arguments)}}var l=0;function h(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function f(o,c,d){var _,y,b,N;return N=function(){_=!1,y&&(b.apply(d,y),y=!1)},b=function(){_?y=arguments:(o.apply(d,arguments),setTimeout(N,c),_=!0)},b}function m(o,c,d){var _=c[1],y=c[0],b=_-y;return o===_&&d?o:((o-y)%b+b)%b+y}function p(){return!1}function g(o,c){if(c===!1)return o;var d=Math.pow(10,c===void 0?6:c);return Math.round(o*d)/d}function E(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function T(o){return E(o).split(/\s+/)}function P(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var d in c)o.options[d]=c[d];return o.options}function x(o,c,d){var _=[];for(var y in o)_.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(o[y]));return(!c||c.indexOf("?")===-1?"?":"&")+_.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function V(o,c){return o.replace(O,function(d,_){var y=c[_];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(c)),y})}var U=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function q(o,c){for(var d=0;d<o.length;d++)if(o[d]===c)return d;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function at(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var k=0;function I(o){var c=+new Date,d=Math.max(0,16-(c-k));return k=c+d,window.setTimeout(o,d)}var M=window.requestAnimationFrame||at("RequestAnimationFrame")||I,F=window.cancelAnimationFrame||at("CancelAnimationFrame")||at("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function D(o,c,d){if(d&&M===I)o.call(c);else return M.call(window,a(o,c))}function G(o){o&&F.call(window,o)}var C={__proto__:null,extend:r,create:s,bind:a,get lastId(){return l},stamp:h,throttle:f,wrapNum:m,falseFn:p,formatNum:g,trim:E,splitWords:T,setOptions:P,getParamString:x,template:V,isArray:U,indexOf:q,emptyImageUrl:J,requestFn:M,cancelFn:F,requestAnimFrame:D,cancelAnimFrame:G};function fe(){}fe.extend=function(o){var c=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=c.__super__=this.prototype,_=s(d);_.constructor=c,c.prototype=_;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(c[y]=this[y]);return o.statics&&r(c,o.statics),o.includes&&(ln(o.includes),r.apply(null,[_].concat(o.includes))),r(_,o),delete _.statics,delete _.includes,_.options&&(_.options=d.options?s(d.options):{},r(_.options,o.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,N=_._initHooks.length;b<N;b++)_._initHooks[b].call(this)}},c},fe.include=function(o){var c=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},fe.mergeOptions=function(o){return r(this.prototype.options,o),this},fe.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),d=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ln(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=U(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Zt={on:function(o,c,d){if(typeof o=="object")for(var _ in o)this._on(_,o[_],c);else{o=T(o);for(var y=0,b=o.length;y<b;y++)this._on(o[y],c,d)}return this},off:function(o,c,d){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var _ in o)this._off(_,o[_],c);else{o=T(o);for(var y=arguments.length===1,b=0,N=o.length;b<N;b++)y?this._off(o[b]):this._off(o[b],c,d)}return this},_on:function(o,c,d,_){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,d)===!1){d===this&&(d=void 0);var y={fn:c,ctx:d};_&&(y.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(y)}},_off:function(o,c,d){var _,y,b;if(this._events&&(_=this._events[o],!!_)){if(arguments.length===1){if(this._firingCount)for(y=0,b=_.length;y<b;y++)_[y].fn=p;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var N=this._listens(o,c,d);if(N!==!1){var $=_[N];this._firingCount&&($.fn=p,this._events[o]=_=_.slice()),_.splice(N,1)}}},fire:function(o,c,d){if(!this.listens(o,d))return this;var _=r({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var y=this._events[o];if(y){this._firingCount=this._firingCount+1||1;for(var b=0,N=y.length;b<N;b++){var $=y[b],H=$.fn;$.once&&this.off(o,H,$.ctx),H.call($.ctx||this,_)}this._firingCount--}}return d&&this._propagateEvent(_),this},listens:function(o,c,d,_){typeof o!="string"&&console.warn('"string" type argument expected');var y=c;typeof c!="function"&&(_=!!c,y=void 0,d=void 0);var b=this._events&&this._events[o];if(b&&b.length&&this._listens(o,y,d)!==!1)return!0;if(_){for(var N in this._eventParents)if(this._eventParents[N].listens(o,c,d,_))return!0}return!1},_listens:function(o,c,d){if(!this._events)return!1;var _=this._events[o]||[];if(!c)return!!_.length;d===this&&(d=void 0);for(var y=0,b=_.length;y<b;y++)if(_[y].fn===c&&_[y].ctx===d)return y;return!1},once:function(o,c,d){if(typeof o=="object")for(var _ in o)this._on(_,o[_],c,!0);else{o=T(o);for(var y=0,b=o.length;y<b;y++)this._on(o[y],c,d,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[h(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[h(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};Zt.addEventListener=Zt.on,Zt.removeEventListener=Zt.clearAllEventListeners=Zt.off,Zt.addOneTimeEventListener=Zt.once,Zt.fireEvent=Zt.fire,Zt.hasEventListeners=Zt.listens;var qt=fe.extend(Zt);function ft(o,c,d){this.x=d?Math.round(o):o,this.y=d?Math.round(c):c}var Ze=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ft.prototype={clone:function(){return new ft(this.x,this.y)},add:function(o){return this.clone()._add(It(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(It(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ft(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ft(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ze(this.x),this.y=Ze(this.y),this},distanceTo:function(o){o=It(o);var c=o.x-this.x,d=o.y-this.y;return Math.sqrt(c*c+d*d)},equals:function(o){return o=It(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=It(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function It(o,c,d){return o instanceof ft?o:U(o)?new ft(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ft(o.x,o.y):new ft(o,c,d)}function Ht(o,c){if(o)for(var d=c?[o,c]:o,_=0,y=d.length;_<y;_++)this.extend(d[_])}Ht.prototype={extend:function(o){var c,d;if(!o)return this;if(o instanceof ft||typeof o[0]=="number"||"x"in o)c=d=It(o);else if(o=rt(o),c=o.min,d=o.max,!c||!d)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=d.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(o){return It((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return It(this.min.x,this.max.y)},getTopRight:function(){return It(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,d;return typeof o[0]=="number"||o instanceof ft?o=It(o):o=rt(o),o instanceof Ht?(c=o.min,d=o.max):c=d=o,c.x>=this.min.x&&d.x<=this.max.x&&c.y>=this.min.y&&d.y<=this.max.y},intersects:function(o){o=rt(o);var c=this.min,d=this.max,_=o.min,y=o.max,b=y.x>=c.x&&_.x<=d.x,N=y.y>=c.y&&_.y<=d.y;return b&&N},overlaps:function(o){o=rt(o);var c=this.min,d=this.max,_=o.min,y=o.max,b=y.x>c.x&&_.x<d.x,N=y.y>c.y&&_.y<d.y;return b&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,d=this.max,_=Math.abs(c.x-d.x)*o,y=Math.abs(c.y-d.y)*o;return rt(It(c.x-_,c.y-y),It(d.x+_,d.y+y))},equals:function(o){return o?(o=rt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function rt(o,c){return!o||o instanceof Ht?o:new Ht(o,c)}function ht(o,c){if(o)for(var d=c?[o,c]:o,_=0,y=d.length;_<y;_++)this.extend(d[_])}ht.prototype={extend:function(o){var c=this._southWest,d=this._northEast,_,y;if(o instanceof mt)_=o,y=o;else if(o instanceof ht){if(_=o._southWest,y=o._northEast,!_||!y)return this}else return o?this.extend(Tt(o)||Pt(o)):this;return!c&&!d?(this._southWest=new mt(_.lat,_.lng),this._northEast=new mt(y.lat,y.lng)):(c.lat=Math.min(_.lat,c.lat),c.lng=Math.min(_.lng,c.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(o){var c=this._southWest,d=this._northEast,_=Math.abs(c.lat-d.lat)*o,y=Math.abs(c.lng-d.lng)*o;return new ht(new mt(c.lat-_,c.lng-y),new mt(d.lat+_,d.lng+y))},getCenter:function(){return new mt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new mt(this.getNorth(),this.getWest())},getSouthEast:function(){return new mt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof mt||"lat"in o?o=Tt(o):o=Pt(o);var c=this._southWest,d=this._northEast,_,y;return o instanceof ht?(_=o.getSouthWest(),y=o.getNorthEast()):_=y=o,_.lat>=c.lat&&y.lat<=d.lat&&_.lng>=c.lng&&y.lng<=d.lng},intersects:function(o){o=Pt(o);var c=this._southWest,d=this._northEast,_=o.getSouthWest(),y=o.getNorthEast(),b=y.lat>=c.lat&&_.lat<=d.lat,N=y.lng>=c.lng&&_.lng<=d.lng;return b&&N},overlaps:function(o){o=Pt(o);var c=this._southWest,d=this._northEast,_=o.getSouthWest(),y=o.getNorthEast(),b=y.lat>c.lat&&_.lat<d.lat,N=y.lng>c.lng&&_.lng<d.lng;return b&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=Pt(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Pt(o,c){return o instanceof ht?o:new ht(o,c)}function mt(o,c,d){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,d!==void 0&&(this.alt=+d)}mt.prototype={equals:function(o,c){if(!o)return!1;o=Tt(o);var d=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return d<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return it.distance(this,Tt(o))},wrap:function(){return it.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,d=c/Math.cos(Math.PI/180*this.lat);return Pt([this.lat-c,this.lng-d],[this.lat+c,this.lng+d])},clone:function(){return new mt(this.lat,this.lng,this.alt)}};function Tt(o,c,d){return o instanceof mt?o:U(o)&&typeof o[0]!="object"?o.length===3?new mt(o[0],o[1],o[2]):o.length===2?new mt(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new mt(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new mt(o,c,d)}var j={latLngToPoint:function(o,c){var d=this.projection.project(o),_=this.scale(c);return this.transformation._transform(d,_)},pointToLatLng:function(o,c){var d=this.scale(c),_=this.transformation.untransform(o,d);return this.projection.unproject(_)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,d=this.scale(o),_=this.transformation.transform(c.min,d),y=this.transformation.transform(c.max,d);return new Ht(_,y)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?m(o.lng,this.wrapLng,!0):o.lng,d=this.wrapLat?m(o.lat,this.wrapLat,!0):o.lat,_=o.alt;return new mt(d,c,_)},wrapLatLngBounds:function(o){var c=o.getCenter(),d=this.wrapLatLng(c),_=c.lat-d.lat,y=c.lng-d.lng;if(_===0&&y===0)return o;var b=o.getSouthWest(),N=o.getNorthEast(),$=new mt(b.lat-_,b.lng-y),H=new mt(N.lat-_,N.lng-y);return new ht($,H)}},it=r({},j,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var d=Math.PI/180,_=o.lat*d,y=c.lat*d,b=Math.sin((c.lat-o.lat)*d/2),N=Math.sin((c.lng-o.lng)*d/2),$=b*b+Math.cos(_)*Math.cos(y)*N*N,H=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*H}}),pt=6378137,Et={R:pt,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,d=this.MAX_LATITUDE,_=Math.max(Math.min(d,o.lat),-d),y=Math.sin(_*c);return new ft(this.R*o.lng*c,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(o){var c=180/Math.PI;return new mt((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=pt*Math.PI;return new Ht([-o,-o],[o,o])}()};function Wt(o,c,d,_){if(U(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=d,this._d=_}Wt.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new ft((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function A(o,c,d,_){return new Wt(o,c,d,_)}var R=r({},it,{code:"EPSG:3857",projection:Et,transformation:function(){var o=.5/(Math.PI*Et.R);return A(o,.5,-o,.5)}()}),z=r({},R,{code:"EPSG:900913"});function Z(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Y(o,c){var d="",_,y,b,N,$,H;for(_=0,b=o.length;_<b;_++){for($=o[_],y=0,N=$.length;y<N;y++)H=$[y],d+=(y?"L":"M")+H.x+" "+H.y;d+=c?At.svg?"z":"x":""}return d||"M0 0"}var K=document.documentElement.style,ct="ActiveXObject"in window,lt=ct&&!document.addEventListener,ot="msLaunchUri"in navigator&&!("documentMode"in document),et=Hn("webkit"),Mt=Hn("android"),_t=Hn("android 2")||Hn("android 3"),St=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kt=Mt&&Hn("Google")&&St<537&&!("AudioNode"in window),Lt=!!window.opera,Ut=!ot&&Hn("chrome"),Yt=Hn("gecko")&&!et&&!Lt&&!ct,He=!Ut&&Hn("safari"),Fe=Hn("phantom"),wn="OTransition"in K,Ye=navigator.platform.indexOf("Win")===0,li=ct&&"transition"in K,Wi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_t,Ge="MozPerspective"in K,Ln=!window.L_DISABLE_3D&&(li||Wi||Ge)&&!wn&&!Fe,Si=typeof orientation<"u"||Hn("mobile"),Lr=Si&&et,qc=Si&&Wi,Ra=!window.PointerEvent&&window.MSPointerEvent,xr=!!(window.PointerEvent||Ra),co="ontouchstart"in window||!!window.TouchEvent,Oa=!window.L_NO_TOUCH&&(co||xr),Ki=Si&&Lt,Hc=Si&&Yt,ho=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wc=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",p,c),window.removeEventListener("testPassiveEventSupport",p,c)}catch{}return o}(),Ss=function(){return!!document.createElement("canvas").getContext}(),uo=!!(document.createElementNS&&Z("svg").createSVGRect),tn=!!uo&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kc=!uo&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Is=navigator.platform.indexOf("Mac")===0,Ms=navigator.platform.indexOf("Linux")===0;function Hn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var At={ie:ct,ielt9:lt,edge:ot,webkit:et,android:Mt,android23:_t,androidStock:kt,opera:Lt,chrome:Ut,gecko:Yt,safari:He,phantom:Fe,opera12:wn,win:Ye,ie3d:li,webkit3d:Wi,gecko3d:Ge,any3d:Ln,mobile:Si,mobileWebkit:Lr,mobileWebkit3d:qc,msPointer:Ra,pointer:xr,touch:Oa,touchNative:co,mobileOpera:Ki,mobileGecko:Hc,retina:ho,passiveEvents:Wc,canvas:Ss,svg:uo,vml:Kc,inlineSvg:tn,mac:Is,linux:Ms},Zi=At.msPointer?"MSPointerDown":"pointerdown",Zc=At.msPointer?"MSPointerMove":"pointermove",Yc=At.msPointer?"MSPointerUp":"pointerup",As=At.msPointer?"MSPointerCancel":"pointercancel",fo={touchstart:Zi,touchmove:Zc,touchend:Yc,touchcancel:As},mo={touchstart:_o,touchmove:po,touchend:po,touchcancel:po},ci={},hi=!1;function Qc(o,c,d){return c==="touchstart"&&Jc(),mo[c]?(d=mo[c].bind(this,d),o.addEventListener(fo[c],d,!1),d):(console.warn("wrong event specified:",c),p)}function Xc(o,c,d){if(!fo[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(fo[c],d,!1)}function Na(o){ci[o.pointerId]=o}function Da(o){ci[o.pointerId]&&(ci[o.pointerId]=o)}function Va(o){delete ci[o.pointerId]}function Jc(){hi||(document.addEventListener(Zi,Na,!0),document.addEventListener(Zc,Da,!0),document.addEventListener(Yc,Va,!0),document.addEventListener(As,Va,!0),hi=!0)}function po(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var d in ci)c.touches.push(ci[d]);c.changedTouches=[c],o(c)}}function _o(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Se(c),po(o,c)}function th(o){var c={},d,_;for(_ in o)d=o[_],c[_]=d&&d.bind?d.bind(o):d;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Fa=200;function Ls(o,c){o.addEventListener("dblclick",c);var d=0,_;function y(b){if(b.detail!==1){_=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var N=Ya(b);if(!(N.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!N.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Fa?(_++,_===2&&c(th(b))):_=1,d=$}}}return o.addEventListener("click",y),{dblclick:c,simDblclick:y}}function Yi(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var xs=Xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Cs=Xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ga=Cs==="webkitTransition"||Cs==="OTransition"?Cs+"End":"transitionend";function Ua(o){return typeof o=="string"?document.getElementById(o):o}function Cr(o,c){var d=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!d||d==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(o,null);d=_?_[c]:null}return d==="auto"?null:d}function Xt(o,c,d){var _=document.createElement(o);return _.className=c||"",d&&d.appendChild(_),_}function _e(o){var c=o.parentNode;c&&c.removeChild(o)}function ks(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Qi(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function kr(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function za(o,c){if(o.classList!==void 0)return o.classList.contains(c);var d=Wn(o);return d.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(d)}function $t(o,c){if(o.classList!==void 0)for(var d=T(c),_=0,y=d.length;_<y;_++)o.classList.add(d[_]);else if(!za(o,c)){var b=Wn(o);Ba(o,(b?b+" ":"")+c)}}function be(o,c){o.classList!==void 0?o.classList.remove(c):Ba(o,E((" "+Wn(o)+" ").replace(" "+c+" "," ")))}function Ba(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function Wn(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function xe(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&go(o,c)}function go(o,c){var d=!1,_="DXImageTransform.Microsoft.Alpha";try{d=o.filters.item(_)}catch{if(c===1)return}c=Math.round(c*100),d?(d.Enabled=c!==100,d.Opacity=c):o.style.filter+=" progid:"+_+"(opacity="+c+")"}function Xi(o){for(var c=document.documentElement.style,d=0;d<o.length;d++)if(o[d]in c)return o[d];return!1}function Ii(o,c,d){var _=c||new ft(0,0);o.style[xs]=(At.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(d?" scale("+d+")":"")}function Ft(o,c){o._leaflet_pos=c,At.any3d?Ii(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Kn(o){return o._leaflet_pos||new ft(0,0)}var ui,fi,$a;if("onselectstart"in document)ui=function(){Rt(window,"selectstart",Se)},fi=function(){de(window,"selectstart",Se)};else{var Rr=Xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ui=function(){if(Rr){var o=document.documentElement.style;$a=o[Rr],o[Rr]="none"}},fi=function(){Rr&&(document.documentElement.style[Rr]=$a,$a=void 0)}}function ja(){Rt(window,"dragstart",Se)}function qa(){de(window,"dragstart",Se)}var vo,Ha;function Ji(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Fn(),vo=o,Ha=o.style.outlineStyle,o.style.outlineStyle="none",Rt(window,"keydown",Fn))}function Fn(){vo&&(vo.style.outlineStyle=Ha,vo=void 0,Ha=void 0,de(window,"keydown",Fn))}function Wa(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function yo(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var eh={__proto__:null,TRANSFORM:xs,TRANSITION:Cs,TRANSITION_END:Ga,get:Ua,getStyle:Cr,create:Xt,remove:_e,empty:ks,toFront:Qi,toBack:kr,hasClass:za,addClass:$t,removeClass:be,setClass:Ba,getClass:Wn,setOpacity:xe,testProp:Xi,setTransform:Ii,setPosition:Ft,getPosition:Kn,get disableTextSelection(){return ui},get enableTextSelection(){return fi},disableImageDrag:ja,enableImageDrag:qa,preventOutline:Ji,restoreOutline:Fn,getSizedParentNode:Wa,getScale:yo};function Rt(o,c,d,_){if(c&&typeof c=="object")for(var y in c)Ka(o,y,c[y],d);else{c=T(c);for(var b=0,N=c.length;b<N;b++)Ka(o,c[b],d,_)}return this}var Zn="_leaflet_events";function de(o,c,d,_){if(arguments.length===1)nh(o),delete o[Zn];else if(c&&typeof c=="object")for(var y in c)Za(o,y,c[y],d);else if(c=T(c),arguments.length===2)nh(o,function($){return q(c,$)!==-1});else for(var b=0,N=c.length;b<N;b++)Za(o,c[b],d,_);return this}function nh(o,c){for(var d in o[Zn]){var _=d.split(/\d/)[0];(!c||c(_))&&Za(o,_,null,null,d)}}var Yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ka(o,c,d,_){var y=c+h(d)+(_?"_"+h(_):"");if(o[Zn]&&o[Zn][y])return this;var b=function($){return d.call(_||o,$||window.event)},N=b;!At.touchNative&&At.pointer&&c.indexOf("touch")===0?b=Qc(o,c,b):At.touch&&c==="dblclick"?b=Ls(o,b):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(Yn[c]||c,b,At.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(b=function($){$=$||window.event,Qa(o,$)&&N($)},o.addEventListener(Yn[c],b,!1)):o.addEventListener(c,N,!1):o.attachEvent("on"+c,b),o[Zn]=o[Zn]||{},o[Zn][y]=b}function Za(o,c,d,_,y){y=y||c+h(d)+(_?"_"+h(_):"");var b=o[Zn]&&o[Zn][y];if(!b)return this;!At.touchNative&&At.pointer&&c.indexOf("touch")===0?Xc(o,c,b):At.touch&&c==="dblclick"?Yi(o,b):"removeEventListener"in o?o.removeEventListener(Yn[c]||c,b,!1):o.detachEvent("on"+c,b),o[Zn][y]=null}function Qn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Or(o){return Ka(o,"wheel",Qn),this}function Nr(o){return Rt(o,"mousedown touchstart dblclick contextmenu",Qn),o._leaflet_disable_click=!0,this}function Se(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Gn(o){return Se(o),Qn(o),this}function Ya(o){if(o.composedPath)return o.composedPath();for(var c=[],d=o.target;d;)c.push(d),d=d.parentNode;return c}function wo(o,c){if(!c)return new ft(o.clientX,o.clientY);var d=yo(c),_=d.boundingClientRect;return new ft((o.clientX-_.left)/d.x-c.clientLeft,(o.clientY-_.top)/d.y-c.clientTop)}var Te=At.linux&&At.chrome?window.devicePixelRatio:At.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ih(o){return At.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Te:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Qa(o,c){var d=c.relatedTarget;if(!d)return!0;try{for(;d&&d!==o;)d=d.parentNode}catch{return!1}return d!==o}var rh={__proto__:null,on:Rt,off:de,stopPropagation:Qn,disableScrollPropagation:Or,disableClickPropagation:Nr,preventDefault:Se,stop:Gn,getPropagationPath:Ya,getMousePosition:wo,getWheelDelta:ih,isExternalTarget:Qa,addListener:Rt,removeListener:de},Xa=qt.extend({run:function(o,c,d,_){this.stop(),this._el=o,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Kn(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,d=this._duration*1e3;c<d?this._runFrame(this._easeOut(c/d),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var d=this._startPos.add(this._offset.multiplyBy(o));c&&d._round(),Ft(this._el,d),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Qt=qt.extend({options:{crs:R,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=P(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Tt(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Cs&&At.any3d&&!At.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Rt(this._proxy,Ga,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,d){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(Tt(o),c,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var _=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,d.zoom):this._tryAnimatedPan(o,d.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,d.pan&&d.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(At.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(At.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,d){var _=this.getZoomScale(c),y=this.getSize().divideBy(2),b=o instanceof ft?o:this.latLngToContainerPoint(o),N=b.subtract(y).multiplyBy(1-1/_),$=this.containerPointToLatLng(y.add(N));return this.setView($,c,{zoom:d})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():Pt(o);var d=It(c.paddingTopLeft||c.padding||[0,0]),_=It(c.paddingBottomRight||c.padding||[0,0]),y=this.getBoundsZoom(o,!1,d.add(_));if(y=typeof c.maxZoom=="number"?Math.min(c.maxZoom,y):y,y===1/0)return{center:o.getCenter(),zoom:y};var b=_.subtract(d).divideBy(2),N=this.project(o.getSouthWest(),y),$=this.project(o.getNorthEast(),y),H=this.unproject(N.add($).divideBy(2).add(b),y);return{center:H,zoom:y}},fitBounds:function(o,c){if(o=Pt(o),!o.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(o,c);return this.setView(d.center,d.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=It(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){$t(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,d,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,d){if(d=d||{},d.animate===!1||!At.any3d)return this.setView(o,c,d);this._stop();var _=this.project(this.getCenter()),y=this.project(o),b=this.getSize(),N=this._zoom;o=Tt(o),c=c===void 0?N:c;var $=Math.max(b.x,b.y),H=$*this.getZoomScale(N,c),tt=y.distanceTo(_)||1,wt=1.42,Ot=wt*wt;function Kt(ze){var wh=ze?-1:1,xP=ze?H:$,CP=H*H-$*$+wh*Ot*Ot*tt*tt,kP=2*xP*Ot*tt,Kf=CP/kP,cg=Math.sqrt(Kf*Kf+1)-Kf,RP=cg<1e-9?-18:Math.log(cg);return RP}function bn(ze){return(Math.exp(ze)-Math.exp(-ze))/2}function Xe(ze){return(Math.exp(ze)+Math.exp(-ze))/2}function Jn(ze){return bn(ze)/Xe(ze)}var Cn=Kt(0);function Ro(ze){return $*(Xe(Cn)/Xe(Cn+wt*ze))}function IP(ze){return $*(Xe(Cn)*Jn(Cn+wt*ze)-bn(Cn))/Ot}function MP(ze){return 1-Math.pow(1-ze,1.5)}var AP=Date.now(),ag=(Kt(1)-Cn)/wt,LP=d.duration?1e3*d.duration:1e3*ag*.8;function lg(){var ze=(Date.now()-AP)/LP,wh=MP(ze)*ag;ze<=1?(this._flyToFrame=D(lg,this),this._move(this.unproject(_.add(y.subtract(_).multiplyBy(IP(wh)/tt)),N),this.getScaleZoom($/Ro(wh),N),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),lg.call(this),this},flyToBounds:function(o,c){var d=this._getBoundsCenterZoom(o,c);return this.flyTo(d.center,d.zoom,c)},setMaxBounds:function(o){return o=Pt(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var d=this.getCenter(),_=this._limitCenter(d,this._zoom,Pt(o));return d.equals(_)||this.panTo(_,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var d=It(c.paddingTopLeft||c.padding||[0,0]),_=It(c.paddingBottomRight||c.padding||[0,0]),y=this.project(this.getCenter()),b=this.project(o),N=this.getPixelBounds(),$=rt([N.min.add(d),N.max.subtract(_)]),H=$.getSize();if(!$.contains(b)){this._enforcingBounds=!0;var tt=b.subtract($.getCenter()),wt=$.extend(b).getSize().subtract(H);y.x+=tt.x<0?-wt.x:wt.x,y.y+=tt.y<0?-wt.y:wt.y,this.panTo(this.unproject(y),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),_=c.divideBy(2).round(),y=d.divideBy(2).round(),b=_.subtract(y);return!b.x&&!b.y?this:(o.animate&&o.pan?this.panBy(b):(o.pan&&this._rawPanBy(b),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,d,o):navigator.geolocation.getCurrentPosition(c,d,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,d=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,d=o.coords.longitude,_=new mt(c,d),y=_.toBounds(o.coords.accuracy*2),b=this._locateOptions;if(b.setView){var N=this.getBoundsZoom(y);this.setView(_,b.maxZoom?Math.min(N,b.maxZoom):N)}var $={latlng:_,bounds:y,timestamp:o.timestamp};for(var H in o.coords)typeof o.coords[H]=="number"&&($[H]=o.coords[H]);this.fire("locationfound",$)}},addHandler:function(o,c){if(!c)return this;var d=this[o]=new c(this);return this._handlers.push(d),this.options[o]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)_e(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var d="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),_=Xt("div",d,c||this._mapPane);return o&&(this._panes[o]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),d=this.unproject(o.getTopRight());return new ht(c,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,d){o=Pt(o),d=It(d||[0,0]);var _=this.getZoom()||0,y=this.getMinZoom(),b=this.getMaxZoom(),N=o.getNorthWest(),$=o.getSouthEast(),H=this.getSize().subtract(d),tt=rt(this.project($,_),this.project(N,_)).getSize(),wt=At.any3d?this.options.zoomSnap:1,Ot=H.x/tt.x,Kt=H.y/tt.y,bn=c?Math.max(Ot,Kt):Math.min(Ot,Kt);return _=this.getScaleZoom(bn,_),wt&&(_=Math.round(_/(wt/100))*(wt/100),_=c?Math.ceil(_/wt)*wt:Math.floor(_/wt)*wt),Math.max(y,Math.min(b,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ft(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var d=this._getTopLeftPoint(o,c);return new Ht(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var d=this.options.crs;return c=c===void 0?this._zoom:c,d.scale(o)/d.scale(c)},getScaleZoom:function(o,c){var d=this.options.crs;c=c===void 0?this._zoom:c;var _=d.zoom(o*d.scale(c));return isNaN(_)?1/0:_},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Tt(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(It(o),c)},layerPointToLatLng:function(o){var c=It(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(Tt(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Tt(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Pt(o))},distance:function(o,c){return this.options.crs.distance(Tt(o),Tt(c))},containerPointToLayerPoint:function(o){return It(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return It(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(It(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Tt(o)))},mouseEventToContainerPoint:function(o){return wo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=Ua(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Rt(c,"scroll",this._onScroll,this),this._containerId=h(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&At.any3d,$t(o,"leaflet-container"+(At.touch?" leaflet-touch":"")+(At.retina?" leaflet-retina":"")+(At.ielt9?" leaflet-oldie":"")+(At.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Cr(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ft(this._mapPane,new ft(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||($t(o.markerPane,"leaflet-zoom-hide"),$t(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,d){Ft(this._mapPane,new ft(0,0));var _=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var y=this._zoom!==c;this._moveStart(y,d)._move(o,c)._moveEnd(y),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,d,_){c===void 0&&(c=this._zoom);var y=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),_?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ft(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[h(this._container)]=this;var c=o?de:Rt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),At.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var d=[],_,y=c==="mouseout"||c==="mouseover",b=o.target||o.srcElement,N=!1;b;){if(_=this._targets[h(b)],_&&(c==="click"||c==="preclick")&&this._draggableMoved(_)){N=!0;break}if(_&&_.listens(c,!0)&&(y&&!Qa(b,o)||(d.push(_),y))||b===this._container)break;b=b.parentNode}return!d.length&&!N&&!y&&this.listens(c,!0)&&(d=[this]),d},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var d=o.type;d==="mousedown"&&Ji(c),this._fireDOMEvent(o,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,d){if(o.type==="click"){var _=r({},o);_.type="preclick",this._fireDOMEvent(_,_.type,d)}var y=this._findEventTargets(o,c);if(d){for(var b=[],N=0;N<d.length;N++)d[N].listens(c,!0)&&b.push(d[N]);y=b.concat(y)}if(y.length){c==="contextmenu"&&Se(o);var $=y[0],H={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var tt=$.getLatLng&&(!$._radius||$._radius<=10);H.containerPoint=tt?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(o),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=tt?$.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(N=0;N<y.length;N++)if(y[N].fire(c,H,!0),H.originalEvent._stopped||y[N].options.bubblingMouseEvents===!1&&q(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Kn(this._mapPane)||new ft(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var d=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var d=this.getSize()._divideBy(2);return this.project(o,c)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,d){var _=this._getNewPixelOrigin(d,c);return this.project(o,c)._subtract(_)},_latLngBoundsToNewLayerBounds:function(o,c,d){var _=this._getNewPixelOrigin(d,c);return rt([this.project(o.getSouthWest(),c)._subtract(_),this.project(o.getNorthWest(),c)._subtract(_),this.project(o.getSouthEast(),c)._subtract(_),this.project(o.getNorthEast(),c)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,d){if(!d)return o;var _=this.project(o,c),y=this.getSize().divideBy(2),b=new Ht(_.subtract(y),_.add(y)),N=this._getBoundsOffset(b,d,c);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?o:this.unproject(_.add(N),c)},_limitOffset:function(o,c){if(!c)return o;var d=this.getPixelBounds(),_=new Ht(d.min.add(o),d.max.add(o));return o.add(this._getBoundsOffset(_,c))},_getBoundsOffset:function(o,c,d){var _=rt(this.project(c.getNorthEast(),d),this.project(c.getSouthWest(),d)),y=_.min.subtract(o.min),b=_.max.subtract(o.max),N=this._rebound(y.x,-b.x),$=this._rebound(y.y,-b.y);return new ft(N,$)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),d=this.getMaxZoom(),_=At.any3d?this.options.zoomSnap:1;return _&&(o=Math.round(o/_)*_),Math.max(c,Math.min(d,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var d=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,c),!0)},_createAnimProxy:function(){var o=this._proxy=Xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var d=xs,_=this._proxy.style[d];Ii(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),_===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Ii(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(c),y=this._getCenterOffset(o)._divideBy(1-1/_);return d.animate!==!0&&!this.getSize().contains(y)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,d,_){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,$t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Eo(o,c){return new Qt(o,c)}var xn=fe.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),d=this.getPosition(),_=o._controlCorners[d];return $t(c,"leaflet-control"),d.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),En=function(o){return new xn(o)};Qt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",d=this._controlContainer=Xt("div",c+"control-container",this._container);function _(y,b){var N=c+y+" "+c+b;o[y+b]=Xt("div",N,d)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)_e(this._controlCorners[o]);_e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ja=xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,d,_){return d<_?-1:_<d?1:0}},initialize:function(o,c,d){P(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in o)this._addLayer(o[_],_);for(_ in c)this._addLayer(c[_],_,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return xn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(h(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){$t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?($t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=Xt("div",o),d=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Nr(c),Or(c);var _=this._section=Xt("section",o+"-list");d&&(this._map.on("click",this.collapse,this),Rt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Xt("a",o+"-toggle",c);y.href="#",y.title="Layers",y.setAttribute("role","button"),Rt(y,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){Se(b),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Xt("div",o+"-base",_),this._separator=Xt("div",o+"-separator",_),this._overlaysList=Xt("div",o+"-overlays",_),c.appendChild(_)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&h(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,d){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(_,y){return this.options.sortFunction(_.layer,y.layer,_.name,y.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ks(this._baseLayersList),ks(this._overlaysList),this._layerControlInputs=[];var o,c,d,_,y=0;for(d=0;d<this._layers.length;d++)_=this._layers[d],this._addItem(_),c=c||_.overlay,o=o||!_.overlay,y+=_.overlay?0:1;return this.options.hideSingleBase&&(o=o&&y>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(h(o.target)),d=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;d&&this._map.fire(d,c)},_createRadioElement:function(o,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=d,_.firstChild},_addItem:function(o){var c=document.createElement("label"),d=this._map.hasLayer(o.layer),_;o.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=d):_=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(_),_.layerId=h(o.layer),Rt(_,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+o.name;var b=document.createElement("span");c.appendChild(b),b.appendChild(_),b.appendChild(y);var N=o.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,d,_=[],y=[];this._handlingClick=!0;for(var b=o.length-1;b>=0;b--)c=o[b],d=this._getLayer(c.layerId).layer,c.checked?_.push(d):c.checked||y.push(d);for(b=0;b<y.length;b++)this._map.hasLayer(y[b])&&this._map.removeLayer(y[b]);for(b=0;b<_.length;b++)this._map.hasLayer(_[b])||this._map.addLayer(_[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,d,_=this._map.getZoom(),y=o.length-1;y>=0;y--)c=o[y],d=this._getLayer(c.layerId).layer,c.disabled=d.options.minZoom!==void 0&&_<d.options.minZoom||d.options.maxZoom!==void 0&&_>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Rt(o,"click",Se),this.expand();var c=this;setTimeout(function(){de(o,"click",Se),c._preventClick=!1})}}),Bf=function(o,c,d){return new Ja(o,c,d)},tr=xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",d=Xt("div",c+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,c+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,c+"-out",d,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,d,_,y){var b=Xt("a",d,_);return b.innerHTML=o,b.href="#",b.title=c,b.setAttribute("role","button"),b.setAttribute("aria-label",c),Nr(b),Rt(b,"click",Gn),Rt(b,"click",y,this),Rt(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";be(this._zoomInButton,c),be(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&($t(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&($t(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qt.mergeOptions({zoomControl:!0}),Qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tr,this.addControl(this.zoomControl))});var sh=function(o){return new tr(o)},bo=xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",d=Xt("div",c),_=this.options;return this._addScales(_,c+"-line",d),o.on(_.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),d},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,d){o.metric&&(this._mScale=Xt("div",c,d)),o.imperial&&(this._iScale=Xt("div",c,d))},_update:function(){var o=this._map,c=o.getSize().y/2,d=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(d)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),d=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,d,c/o)},_updateImperial:function(o){var c=o*3.2808399,d,_,y;c>5280?(d=c/5280,_=this._getRoundNum(d),this._updateScale(this._iScale,_+" mi",_/d)):(y=this._getRoundNum(c),this._updateScale(this._iScale,y+" ft",y/c))},_updateScale:function(o,c,d){o.style.width=Math.round(this.options.maxWidth*d)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),d=o/c;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,c*d}}),To=function(o){return new bo(o)},oh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Dr=xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(At.inlineSvg?oh+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Xt("div","leaflet-control-attribution"),Nr(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var d=[];this.options.prefix&&d.push(this.options.prefix),o.length&&d.push(o.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Qt.mergeOptions({attributionControl:!0}),Qt.addInitHook(function(){this.options.attributionControl&&new Dr().addTo(this)});var $f=function(o){return new Dr(o)};xn.Layers=Ja,xn.Zoom=tr,xn.Scale=bo,xn.Attribution=Dr,En.layers=Bf,En.zoom=sh,En.scale=To,En.attribution=$f;var Un=fe.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Un.addTo=function(o,c){return o.addHandler(c,this),this};var Rs={Events:Zt},tl=At.touch?"touchstart mousedown":"mousedown",di=qt.extend({options:{clickTolerance:3},initialize:function(o,c,d,_){P(this,_),this._element=o,this._dragStartTarget=c||o,this._preventOutline=d},enable:function(){this._enabled||(Rt(this._dragStartTarget,tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(di._dragging===this&&this.finishDrag(!0),de(this._dragStartTarget,tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!za(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){di._dragging===this&&this.finishDrag();return}if(!(di._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(di._dragging=this,this._preventOutline&&Ji(this._element),ja(),ui(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,d=Wa(this._element);this._startPoint=new ft(c.clientX,c.clientY),this._startPos=Kn(this._element),this._parentScale=yo(d);var _=o.type==="mousedown";Rt(document,_?"mousemove":"touchmove",this._onMove,this),Rt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,d=new ft(c.clientX,c.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Se(o),this._moved||(this.fire("dragstart"),this._moved=!0,$t(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),$t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ft(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),de(document,"mousemove touchmove",this._onMove,this),de(document,"mouseup touchend touchcancel",this._onUp,this),qa(),fi();var c=this._moved&&this._moving;this._moving=!1,di._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Po(o,c,d){var _,y=[1,4,2,8],b,N,$,H,tt,wt,Ot,Kt;for(b=0,wt=o.length;b<wt;b++)o[b]._code=Mi(o[b],c);for($=0;$<4;$++){for(Ot=y[$],_=[],b=0,wt=o.length,N=wt-1;b<wt;N=b++)H=o[b],tt=o[N],H._code&Ot?tt._code&Ot||(Kt=Qe(tt,H,Ot,c,d),Kt._code=Mi(Kt,c),_.push(Kt)):(tt._code&Ot&&(Kt=Qe(tt,H,Ot,c,d),Kt._code=Mi(Kt,c),_.push(Kt)),_.push(H));o=_}return o}function So(o,c){var d,_,y,b,N,$,H,tt,wt;if(!o||o.length===0)throw new Error("latlngs not passed");u(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ot=Tt([0,0]),Kt=Pt(o),bn=Kt.getNorthWest().distanceTo(Kt.getSouthWest())*Kt.getNorthEast().distanceTo(Kt.getNorthWest());bn<1700&&(Ot=Io(o));var Xe=o.length,Jn=[];for(d=0;d<Xe;d++){var Cn=Tt(o[d]);Jn.push(c.project(Tt([Cn.lat-Ot.lat,Cn.lng-Ot.lng])))}for($=H=tt=0,d=0,_=Xe-1;d<Xe;_=d++)y=Jn[d],b=Jn[_],N=y.y*b.x-b.y*y.x,H+=(y.x+b.x)*N,tt+=(y.y+b.y)*N,$+=N*3;$===0?wt=Jn[0]:wt=[H/$,tt/$];var Ro=c.unproject(It(wt));return Tt([Ro.lat+Ot.lat,Ro.lng+Ot.lng])}function Io(o){for(var c=0,d=0,_=0,y=0;y<o.length;y++){var b=Tt(o[y]);c+=b.lat,d+=b.lng,_++}return Tt([c/_,d/_])}var Mo={__proto__:null,clipPolygon:Po,polygonCenter:So,centroid:Io};function el(o,c){if(!c||!o.length)return o.slice();var d=c*c;return o=lh(o,d),o=ah(o,d),o}function nl(o,c,d){return Math.sqrt(Xn(o,c,d,!0))}function er(o,c,d){return Xn(o,c,d)}function ah(o,c){var d=o.length,_=typeof Uint8Array<"u"?Uint8Array:Array,y=new _(d);y[0]=y[d-1]=1,Ao(o,y,c,0,d-1);var b,N=[];for(b=0;b<d;b++)y[b]&&N.push(o[b]);return N}function Ao(o,c,d,_,y){var b=0,N,$,H;for($=_+1;$<=y-1;$++)H=Xn(o[$],o[_],o[y],!0),H>b&&(N=$,b=H);b>d&&(c[N]=1,Ao(o,c,d,_,N),Ao(o,c,d,N,y))}function lh(o,c){for(var d=[o[0]],_=1,y=0,b=o.length;_<b;_++)ch(o[_],o[y])>c&&(d.push(o[_]),y=_);return y<b-1&&d.push(o[b-1]),d}var il;function Os(o,c,d,_,y){var b=_?il:Mi(o,d),N=Mi(c,d),$,H,tt;for(il=N;;){if(!(b|N))return[o,c];if(b&N)return!1;$=b||N,H=Qe(o,c,$,d,y),tt=Mi(H,d),$===b?(o=H,b=tt):(c=H,N=tt)}}function Qe(o,c,d,_,y){var b=c.x-o.x,N=c.y-o.y,$=_.min,H=_.max,tt,wt;return d&8?(tt=o.x+b*(H.y-o.y)/N,wt=H.y):d&4?(tt=o.x+b*($.y-o.y)/N,wt=$.y):d&2?(tt=H.x,wt=o.y+N*(H.x-o.x)/b):d&1&&(tt=$.x,wt=o.y+N*($.x-o.x)/b),new ft(tt,wt,y)}function Mi(o,c){var d=0;return o.x<c.min.x?d|=1:o.x>c.max.x&&(d|=2),o.y<c.min.y?d|=4:o.y>c.max.y&&(d|=8),d}function ch(o,c){var d=c.x-o.x,_=c.y-o.y;return d*d+_*_}function Xn(o,c,d,_){var y=c.x,b=c.y,N=d.x-y,$=d.y-b,H=N*N+$*$,tt;return H>0&&(tt=((o.x-y)*N+(o.y-b)*$)/H,tt>1?(y=d.x,b=d.y):tt>0&&(y+=N*tt,b+=$*tt)),N=o.x-y,$=o.y-b,_?N*N+$*$:new ft(y,b)}function u(o){return!U(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function v(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(o)}function w(o,c){var d,_,y,b,N,$,H,tt;if(!o||o.length===0)throw new Error("latlngs not passed");u(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var wt=Tt([0,0]),Ot=Pt(o),Kt=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());Kt<1700&&(wt=Io(o));var bn=o.length,Xe=[];for(d=0;d<bn;d++){var Jn=Tt(o[d]);Xe.push(c.project(Tt([Jn.lat-wt.lat,Jn.lng-wt.lng])))}for(d=0,_=0;d<bn-1;d++)_+=Xe[d].distanceTo(Xe[d+1])/2;if(_===0)tt=Xe[0];else for(d=0,b=0;d<bn-1;d++)if(N=Xe[d],$=Xe[d+1],y=N.distanceTo($),b+=y,b>_){H=(b-_)/y,tt=[$.x-H*($.x-N.x),$.y-H*($.y-N.y)];break}var Cn=c.unproject(It(tt));return Tt([Cn.lat+wt.lat,Cn.lng+wt.lng])}var S={__proto__:null,simplify:el,pointToSegmentDistance:nl,closestPointOnSegment:er,clipSegment:Os,_getEdgeIntersection:Qe,_getBitCode:Mi,_sqClosestPointOnSegment:Xn,isFlat:u,_flat:v,polylineCenter:w},B={project:function(o){return new ft(o.lng,o.lat)},unproject:function(o){return new mt(o.y,o.x)},bounds:new Ht([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ht([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,d=this.R,_=o.lat*c,y=this.R_MINOR/d,b=Math.sqrt(1-y*y),N=b*Math.sin(_),$=Math.tan(Math.PI/4-_/2)/Math.pow((1-N)/(1+N),b/2);return _=-d*Math.log(Math.max($,1e-10)),new ft(o.lng*c*d,_)},unproject:function(o){for(var c=180/Math.PI,d=this.R,_=this.R_MINOR/d,y=Math.sqrt(1-_*_),b=Math.exp(-o.y/d),N=Math.PI/2-2*Math.atan(b),$=0,H=.1,tt;$<15&&Math.abs(H)>1e-7;$++)tt=y*Math.sin(N),tt=Math.pow((1-tt)/(1+tt),y/2),H=Math.PI/2-2*Math.atan(b*tt)-N,N+=H;return new mt(N*c,o.x*c/d)}},ut={__proto__:null,LonLat:B,Mercator:W,SphericalMercator:Et},he=r({},it,{code:"EPSG:3395",projection:W,transformation:function(){var o=.5/(Math.PI*W.R);return A(o,.5,-o,.5)}()}),Ue=r({},it,{code:"EPSG:4326",projection:B,transformation:A(1/180,1,-1/180,.5)}),ie=r({},j,{projection:B,transformation:A(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var d=c.lng-o.lng,_=c.lat-o.lat;return Math.sqrt(d*d+_*_)},infinite:!0});j.Earth=it,j.EPSG3395=he,j.EPSG3857=R,j.EPSG900913=z,j.EPSG4326=Ue,j.Simple=ie;var me=qt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[h(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[h(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var d=this.getEvents();c.on(d,this),this.once("remove",function(){c.off(d,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Qt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=h(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=h(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return h(o)in this._layers},eachLayer:function(o,c){for(var d in this._layers)o.call(c,this._layers[d]);return this},_addLayers:function(o){o=o?U(o)?o:[o]:[];for(var c=0,d=o.length;c<d;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[h(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=h(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,d=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var y=this._zoomBoundLayers[_].options;o=y.minZoom===void 0?o:Math.min(o,y.minZoom),c=y.maxZoom===void 0?c:Math.max(c,y.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ie=me.extend({initialize:function(o,c){P(this,c),this._layers={};var d,_;if(o)for(d=0,_=o.length;d<_;d++)this.addLayer(o[d])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),d,_;for(d in this._layers)_=this._layers[d],_[o]&&_[o].apply(_,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var d in this._layers)o.call(c,this._layers[d]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return h(o)}}),Vr=function(o,c){return new Ie(o,c)},Re=Ie.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ie.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ie.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ht;for(var c in this._layers){var d=this._layers[c];o.extend(d.getBounds?d.getBounds():d.getLatLng())}return o}}),Lo=function(o,c){return new Re(o,c)},Ai=fe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var d=this._getIconUrl(o);if(!d){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(d,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(_,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(o,c){var d=this.options,_=d[c+"Size"];typeof _=="number"&&(_=[_,_]);var y=It(_),b=It(c==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(d.className||""),b&&(o.style.marginLeft=-b.x+"px",o.style.marginTop=-b.y+"px"),y&&(o.style.width=y.x+"px",o.style.height=y.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return At.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function aP(o){return new Ai(o)}var rl=Ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof rl.imagePath!="string"&&(rl.imagePath=this._detectIconPath()),(this.options.imagePath||rl.imagePath)+Ai.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(d,_,y){var b=_.exec(d);return b&&b[y]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Xt("div","leaflet-default-icon-path",document.body),c=Cr(o,"background-image")||Cr(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),B_=Un.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new di(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),$t(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,d=c._map,_=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,b=Kn(c._icon),N=d.getPixelBounds(),$=d.getPixelOrigin(),H=rt(N.min._subtract($).add(y),N.max._subtract($).subtract(y));if(!H.contains(b)){var tt=It((Math.max(H.max.x,b.x)-H.max.x)/(N.max.x-H.max.x)-(Math.min(H.min.x,b.x)-H.min.x)/(N.min.x-H.min.x),(Math.max(H.max.y,b.y)-H.max.y)/(N.max.y-H.max.y)-(Math.min(H.min.y,b.y)-H.min.y)/(N.min.y-H.min.y)).multiplyBy(_);d.panBy(tt,{animate:!1}),this._draggable._newPos._add(tt),this._draggable._startPos._add(tt),Ft(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=D(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,d=c._shadow,_=Kn(c._icon),y=c._map.layerPointToLatLng(_);d&&Ft(d,_),c._latlng=y,o.latlng=y,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),hh=me.extend({options:{icon:new rl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){P(this,c),this._latlng=Tt(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=Tt(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=o.icon.createIcon(this._icon),_=!1;d!==this._icon&&(this._icon&&this._removeIcon(),_=!0,o.title&&(d.title=o.title),d.tagName==="IMG"&&(d.alt=o.alt||"")),$t(d,c),o.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(d,"focus",this._panOnFocus,this);var y=o.icon.createShadow(this._shadow),b=!1;y!==this._shadow&&(this._removeShadow(),b=!0),y&&($t(y,c),y.alt=""),this._shadow=y,o.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&b&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(this._icon,"focus",this._panOnFocus,this),_e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_e(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ft(this._icon,o),this._shadow&&Ft(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&($t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),B_)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new B_(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&xe(this._icon,o),this._shadow&&xe(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,d=c.iconSize?It(c.iconSize):It(0,0),_=c.iconAnchor?It(c.iconAnchor):It(0,0);o.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:d.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lP(o,c){return new hh(o,c)}var Fr=me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),uh=Fr.extend({options:{fill:!0,radius:10},initialize:function(o,c){P(this,c),this._latlng=Tt(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=Tt(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return Fr.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,d=this._clickTolerance(),_=[o+d,c+d];this._pxBounds=new Ht(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cP(o,c){return new uh(o,c)}var jf=uh.extend({initialize:function(o,c,d){if(typeof c=="number"&&(c=r({},d,{radius:c})),P(this,c),this._latlng=Tt(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ht(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Fr.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,d=this._map,_=d.options.crs;if(_.distance===it.distance){var y=Math.PI/180,b=this._mRadius/it.R/y,N=d.project([c+b,o]),$=d.project([c-b,o]),H=N.add($).divideBy(2),tt=d.unproject(H).lat,wt=Math.acos((Math.cos(b*y)-Math.sin(c*y)*Math.sin(tt*y))/(Math.cos(c*y)*Math.cos(tt*y)))/y;(isNaN(wt)||wt===0)&&(wt=b/Math.cos(Math.PI/180*c)),this._point=H.subtract(d.getPixelOrigin()),this._radius=isNaN(wt)?0:H.x-d.project([tt,o-wt]).x,this._radiusY=H.y-N.y}else{var Ot=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ot).x}this._updateBounds()}});function hP(o,c,d){return new jf(o,c,d)}var nr=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){P(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,d=null,_=Xn,y,b,N=0,$=this._parts.length;N<$;N++)for(var H=this._parts[N],tt=1,wt=H.length;tt<wt;tt++){y=H[tt-1],b=H[tt];var Ot=_(o,y,b,!0);Ot<c&&(c=Ot,d=_(o,y,b))}return d&&(d.distance=Math.sqrt(c)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=Tt(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ht,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],d=u(o),_=0,y=o.length;_<y;_++)d?(c[_]=Tt(o[_]),this._bounds.extend(c[_])):c[_]=this._convertLatLngs(o[_]);return c},_project:function(){var o=new Ht;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new ft(o,o);this._rawPxBounds&&(this._pxBounds=new Ht([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,d){var _=o[0]instanceof mt,y=o.length,b,N;if(_){for(N=[],b=0;b<y;b++)N[b]=this._map.latLngToLayerPoint(o[b]),d.extend(N[b]);c.push(N)}else for(b=0;b<y;b++)this._projectLatlngs(o[b],c,d)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,d,_,y,b,N,$,H;for(d=0,y=0,b=this._rings.length;d<b;d++)for(H=this._rings[d],_=0,N=H.length;_<N-1;_++)$=Os(H[_],H[_+1],o,_,!0),$&&(c[y]=c[y]||[],c[y].push($[0]),($[1]!==H[_+1]||_===N-2)&&(c[y].push($[1]),y++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,d=0,_=o.length;d<_;d++)o[d]=el(o[d],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var d,_,y,b,N,$,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(d=0,b=this._parts.length;d<b;d++)for($=this._parts[d],_=0,N=$.length,y=N-1;_<N;y=_++)if(!(!c&&_===0)&&nl(o,$[y],$[_])<=H)return!0;return!1}});function uP(o,c){return new nr(o,c)}nr._flat=v;var xo=nr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return So(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=nr.prototype._convertLatLngs.call(this,o),d=c.length;return d>=2&&c[0]instanceof mt&&c[0].equals(c[d-1])&&c.pop(),c},_setLatLngs:function(o){nr.prototype._setLatLngs.call(this,o),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,d=new ft(c,c);if(o=new Ht(o.min.subtract(d),o.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,y=this._rings.length,b;_<y;_++)b=Po(this._rings[_],o,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,d,_,y,b,N,$,H,tt;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(b=0,H=this._parts.length;b<H;b++)for(d=this._parts[b],N=0,tt=d.length,$=tt-1;N<tt;$=N++)_=d[N],y=d[$],_.y>o.y!=y.y>o.y&&o.x<(y.x-_.x)*(o.y-_.y)/(y.y-_.y)+_.x&&(c=!c);return c||nr.prototype._containsPoint.call(this,o,!0)}});function fP(o,c){return new xo(o,c)}var ir=Re.extend({initialize:function(o,c){P(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=U(o)?o:o.features,d,_,y;if(c){for(d=0,_=c.length;d<_;d++)y=c[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var b=this.options;if(b.filter&&!b.filter(o))return this;var N=fh(o,b);return N?(N.feature=ph(o),N.defaultOptions=N.options,this.resetStyle(N),b.onEachFeature&&b.onEachFeature(o,N),this.addLayer(N)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function fh(o,c){var d=o.type==="Feature"?o.geometry:o,_=d?d.coordinates:null,y=[],b=c&&c.pointToLayer,N=c&&c.coordsToLatLng||qf,$,H,tt,wt;if(!_&&!d)return null;switch(d.type){case"Point":return $=N(_),$_(b,o,$,c);case"MultiPoint":for(tt=0,wt=_.length;tt<wt;tt++)$=N(_[tt]),y.push($_(b,o,$,c));return new Re(y);case"LineString":case"MultiLineString":return H=dh(_,d.type==="LineString"?0:1,N),new nr(H,c);case"Polygon":case"MultiPolygon":return H=dh(_,d.type==="Polygon"?1:2,N),new xo(H,c);case"GeometryCollection":for(tt=0,wt=d.geometries.length;tt<wt;tt++){var Ot=fh({geometry:d.geometries[tt],type:"Feature",properties:o.properties},c);Ot&&y.push(Ot)}return new Re(y);case"FeatureCollection":for(tt=0,wt=d.features.length;tt<wt;tt++){var Kt=fh(d.features[tt],c);Kt&&y.push(Kt)}return new Re(y);default:throw new Error("Invalid GeoJSON object.")}}function $_(o,c,d,_){return o?o(c,d):new hh(d,_&&_.markersInheritOptions&&_)}function qf(o){return new mt(o[1],o[0],o[2])}function dh(o,c,d){for(var _=[],y=0,b=o.length,N;y<b;y++)N=c?dh(o[y],c-1,d):(d||qf)(o[y]),_.push(N);return _}function Hf(o,c){return o=Tt(o),o.alt!==void 0?[g(o.lng,c),g(o.lat,c),g(o.alt,c)]:[g(o.lng,c),g(o.lat,c)]}function mh(o,c,d,_){for(var y=[],b=0,N=o.length;b<N;b++)y.push(c?mh(o[b],u(o[b])?0:c-1,d,_):Hf(o[b],_));return!c&&d&&y.length>0&&y.push(y[0].slice()),y}function Co(o,c){return o.feature?r({},o.feature,{geometry:c}):ph(c)}function ph(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Wf={toGeoJSON:function(o){return Co(this,{type:"Point",coordinates:Hf(this.getLatLng(),o)})}};hh.include(Wf),jf.include(Wf),uh.include(Wf),nr.include({toGeoJSON:function(o){var c=!u(this._latlngs),d=mh(this._latlngs,c?1:0,!1,o);return Co(this,{type:(c?"Multi":"")+"LineString",coordinates:d})}}),xo.include({toGeoJSON:function(o){var c=!u(this._latlngs),d=c&&!u(this._latlngs[0]),_=mh(this._latlngs,d?2:c?1:0,!0,o);return c||(_=[_]),Co(this,{type:(d?"Multi":"")+"Polygon",coordinates:_})}}),Ie.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(d){c.push(d.toGeoJSON(o).geometry.coordinates)}),Co(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var d=c==="GeometryCollection",_=[];return this.eachLayer(function(y){if(y.toGeoJSON){var b=y.toGeoJSON(o);if(d)_.push(b.geometry);else{var N=ph(b);N.type==="FeatureCollection"?_.push.apply(_,N.features):_.push(N)}}}),d?Co(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function j_(o,c){return new ir(o,c)}var dP=j_,_h=me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,d){this._url=o,this._bounds=Pt(c),P(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&($t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Qi(this._image),this},bringToBack:function(){return this._map&&kr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Pt(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:Xt("img");if($t(c,"leaflet-image-layer"),this._zoomAnimated&&$t(c,"leaflet-zoom-animated"),this.options.className&&$t(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onload=a(this.fire,this,"load"),c.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Ii(this._image,d,c)},_reset:function(){var o=this._image,c=new Ht(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=c.getSize();Ft(o,c.min),o.style.width=d.x+"px",o.style.height=d.y+"px"},_updateOpacity:function(){xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),mP=function(o,c,d){return new _h(o,c,d)},q_=_h.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:Xt("video");if($t(c,"leaflet-image-layer"),this._zoomAnimated&&$t(c,"leaflet-zoom-animated"),this.options.className&&$t(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onloadeddata=a(this.fire,this,"load"),o){for(var d=c.getElementsByTagName("source"),_=[],y=0;y<d.length;y++)_.push(d[y].src);this._url=d.length>0?_:[c.src];return}U(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var N=Xt("source");N.src=this._url[b],c.appendChild(N)}}});function pP(o,c,d){return new q_(o,c,d)}var H_=_h.extend({_initImage:function(){var o=this._image=this._url;$t(o,"leaflet-image-layer"),this._zoomAnimated&&$t(o,"leaflet-zoom-animated"),this.options.className&&$t(o,this.options.className),o.onselectstart=p,o.onmousemove=p}});function _P(o,c,d){return new H_(o,c,d)}var Li=me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof mt||U(o))?(this._latlng=Tt(o),P(this,c)):(P(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&xe(this._container,1),this.bringToFront(),this.options.interactive&&($t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(xe(this._container,0),this._removeTimeout=setTimeout(a(_e,void 0,this._container),200)):_e(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Tt(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qi(this._container),this},bringToBack:function(){return this._map&&kr(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof Re){c=null;var d=this._source._layers;for(var _ in d)if(d[_]._map){c=d[_];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=It(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ft(this._container,o.add(d)):c=c.add(o).add(d);var _=this._containerBottom=-c.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=_+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Qt.include({_initOverlay:function(o,c,d,_){var y=c;return y instanceof o||(y=new o(_).setContent(c)),d&&y.setLatLng(d),y}}),me.include({_initOverlay:function(o,c,d,_){var y=d;return y instanceof o?(P(y,_),y._source=this):(y=c&&!_?c:new o(_,this),y.setContent(d)),y}});var gh=Li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Li.prototype.openOn.call(this,o)},onAdd:function(o){Li.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",Qn))},onRemove:function(o){Li.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",Qn))},getEvents:function(){var o=Li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=Xt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Xt("div",o+"-content-wrapper",c);if(this._contentNode=Xt("div",o+"-content",d),Nr(c),Or(this._contentNode),Rt(c,"contextmenu",Qn),this._tipContainer=Xt("div",o+"-tip-container",c),this._tip=Xt("div",o+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Xt("a",o+"-close-button",c);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Rt(_,"click",function(y){Se(y),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var d=o.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),c.width=d+1+"px",c.whiteSpace="",c.height="";var _=o.offsetHeight,y=this.options.maxHeight,b="leaflet-popup-scrolled";y&&_>y?(c.height=y+"px",$t(o,b)):be(o,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),d=this._getAnchor();Ft(this._container,c.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(Cr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+c,_=this._containerWidth,y=new ft(this._containerLeft,-d-this._containerBottom);y._add(Kn(this._container));var b=o.layerPointToContainerPoint(y),N=It(this.options.autoPanPadding),$=It(this.options.autoPanPaddingTopLeft||N),H=It(this.options.autoPanPaddingBottomRight||N),tt=o.getSize(),wt=0,Ot=0;b.x+_+H.x>tt.x&&(wt=b.x+_-tt.x+H.x),b.x-wt-$.x<0&&(wt=b.x-$.x),b.y+d+H.y>tt.y&&(Ot=b.y+d-tt.y+H.y),b.y-Ot-$.y<0&&(Ot=b.y-$.y),(wt||Ot)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([wt,Ot]))}},_getAnchor:function(){return It(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),gP=function(o,c){return new gh(o,c)};Qt.mergeOptions({closePopupOnClick:!0}),Qt.include({openPopup:function(o,c,d){return this._initOverlay(gh,o,c,d).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),me.include({bindPopup:function(o,c){return this._popup=this._initOverlay(gh,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Re||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Gn(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var vh=Li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Li.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Li.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Li.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Xt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,d,_=this._map,y=this._container,b=_.latLngToContainerPoint(_.getCenter()),N=_.layerPointToContainerPoint(o),$=this.options.direction,H=y.offsetWidth,tt=y.offsetHeight,wt=It(this.options.offset),Ot=this._getAnchor();$==="top"?(c=H/2,d=tt):$==="bottom"?(c=H/2,d=0):$==="center"?(c=H/2,d=tt/2):$==="right"?(c=0,d=tt/2):$==="left"?(c=H,d=tt/2):N.x<b.x?($="right",c=0,d=tt/2):($="left",c=H+(wt.x+Ot.x)*2,d=tt/2),o=o.subtract(It(c,d,!0)).add(wt).add(Ot),be(y,"leaflet-tooltip-right"),be(y,"leaflet-tooltip-left"),be(y,"leaflet-tooltip-top"),be(y,"leaflet-tooltip-bottom"),$t(y,"leaflet-tooltip-"+$),Ft(y,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&xe(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return It(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),vP=function(o,c){return new vh(o,c)};Qt.include({openTooltip:function(o,c,d){return this._initOverlay(vh,o,c,d).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),me.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vh,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[c](d),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Re||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(Rt(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Rt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,d,_;this._tooltip.options.sticky&&o.originalEvent&&(d=this._map.mouseEventToContainerPoint(o.originalEvent),_=this._map.containerPointToLayerPoint(d),c=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(c)}});var W_=Ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ks(c),c.appendChild(d.html)):c.innerHTML=d.html!==!1?d.html:"",d.bgPos){var _=It(d.bgPos);c.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function yP(o){return new W_(o)}Ai.Default=rl;var sl=me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:At.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),_e(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(kr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ft?o:new ft(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,d=-o(-1/0,1/0),_=0,y=c.length,b;_<y;_++)b=c[_].style.zIndex,c[_]!==this._container&&b&&(d=o(d,+b));isFinite(d)&&(this.options.zIndex=d+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!At.ielt9){xe(this._container,this.options.opacity);var o=+new Date,c=!1,d=!1;for(var _ in this._tiles){var y=this._tiles[_];if(!(!y.current||!y.loaded)){var b=Math.min(1,(o-y.loaded)/200);xe(y.el,b),b<1?c=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),c&&(G(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===o?(this._levels[d].el.style.zIndex=c-Math.abs(o-d),this._onUpdateLevel(d)):(_e(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var _=this._levels[o],y=this._map;return _||(_=this._levels[o]={},_.el=Xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=c,_.origin=y.project(y.unproject(y.getPixelOrigin()),o).round(),_.zoom=o,this._setZoomTransform(_,y.getCenter(),y.getZoom()),p(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var o,c,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var _=c.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)_e(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,d,_){var y=Math.floor(o/2),b=Math.floor(c/2),N=d-1,$=new ft(+y,+b);$.z=+N;var H=this._tileCoordsToKey($),tt=this._tiles[H];return tt&&tt.active?(tt.retain=!0,!0):(tt&&tt.loaded&&(tt.retain=!0),N>_?this._retainParent(y,b,N,_):!1)},_retainChildren:function(o,c,d,_){for(var y=2*o;y<2*o+2;y++)for(var b=2*c;b<2*c+2;b++){var N=new ft(y,b);N.z=d+1;var $=this._tileCoordsToKey(N),H=this._tiles[$];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);d+1<_&&this._retainChildren(y,b,d+1,_)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,d,_){var y=Math.round(c);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var b=this.options.updateWhenZooming&&y!==this._tileZoom;(!_||b)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(o),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var d in this._levels)this._setZoomTransform(this._levels[d],o,c)},_setZoomTransform:function(o,c,d){var _=this._map.getZoomScale(d,o.zoom),y=o.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(c,d)).round();At.any3d?Ii(o.el,y,_):Ft(o.el,y)},_resetGrid:function(){var o=this._map,c=o.options.crs,d=this._tileSize=this.getTileSize(),_=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],_).x/d.x),Math.ceil(o.project([0,c.wrapLng[1]],_).x/d.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],_).y/d.x),Math.ceil(o.project([c.wrapLat[1],0],_).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,d=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),_=c.getZoomScale(d,this._tileZoom),y=c.project(o,this._tileZoom).floor(),b=c.getSize().divideBy(_*2);return new Ht(y.subtract(b),y.add(b))},_update:function(o){var c=this._map;if(c){var d=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(o),y=this._pxBoundsToTileRange(_),b=y.getCenter(),N=[],$=this.options.keepBuffer,H=new Ht(y.getBottomLeft().subtract([$,-$]),y.getTopRight().add([$,-$]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var tt in this._tiles){var wt=this._tiles[tt].coords;(wt.z!==this._tileZoom||!H.contains(new ft(wt.x,wt.y)))&&(this._tiles[tt].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(o,d);return}for(var Ot=y.min.y;Ot<=y.max.y;Ot++)for(var Kt=y.min.x;Kt<=y.max.x;Kt++){var bn=new ft(Kt,Ot);if(bn.z=this._tileZoom,!!this._isValidTile(bn)){var Xe=this._tiles[this._tileCoordsToKey(bn)];Xe?Xe.current=!0:N.push(bn)}}if(N.sort(function(Cn,Ro){return Cn.distanceTo(b)-Ro.distanceTo(b)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Jn=document.createDocumentFragment();for(Kt=0;Kt<N.length;Kt++)this._addTile(N[Kt],Jn);this._level.el.appendChild(Jn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var d=this._globalTileRange;if(!c.wrapLng&&(o.x<d.min.x||o.x>d.max.x)||!c.wrapLat&&(o.y<d.min.y||o.y>d.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(o);return Pt(this.options.bounds).overlaps(_)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,d=this.getTileSize(),_=o.scaleBy(d),y=_.add(d),b=c.unproject(_,o.z),N=c.unproject(y,o.z);return[b,N]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),d=new ht(c[0],c[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),d=new ft(+c[0],+c[1]);return d.z=+c[2],d},_removeTile:function(o){var c=this._tiles[o];c&&(_e(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){$t(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=p,o.onmousemove=p,At.ielt9&&this.options.opacity<1&&xe(o,this.options.opacity)},_addTile:function(o,c){var d=this._getTilePos(o),_=this._tileCoordsToKey(o),y=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(y),this.createTile.length<2&&D(a(this._tileReady,this,o,null,y)),Ft(y,d),this._tiles[_]={el:y,coords:o,current:!0},c.appendChild(y),this.fire("tileloadstart",{tile:y,coords:o})},_tileReady:function(o,c,d){c&&this.fire("tileerror",{error:c,tile:d,coords:o});var _=this._tileCoordsToKey(o);d=this._tiles[_],d&&(d.loaded=+new Date,this._map._fadeAnimated?(xe(d.el,0),G(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),c||($t(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),At.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new ft(this._wrapX?m(o.x,this._wrapX):o.x,this._wrapY?m(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new Ht(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function wP(o){return new sl(o)}var ko=sl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=P(this,c),c.detectRetina&&At.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var d=document.createElement("img");return Rt(d,"load",a(this._tileOnLoad,this,c,d)),Rt(d,"error",a(this._tileOnError,this,c,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(o),d},getTileUrl:function(o){var c={r:At.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=d),c["-y"]=d}return V(this._url,r(c,this.options))},_tileOnLoad:function(o,c){At.ielt9?setTimeout(a(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,d){var _=this.options.errorTileUrl;_&&c.getAttribute("src")!==_&&(c.src=_),o(d,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,d=this.options.zoomReverse,_=this.options.zoomOffset;return d&&(o=c-o),o+_},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=p,c.onerror=p,!c.complete)){c.src=J;var d=this._tiles[o].coords;_e(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:d})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",J),sl.prototype._removeTile.call(this,o)},_tileReady:function(o,c,d){if(!(!this._map||d&&d.getAttribute("src")===J))return sl.prototype._tileReady.call(this,o,c,d)}});function K_(o,c){return new ko(o,c)}var Z_=ko.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var d=r({},this.defaultWmsParams);for(var _ in c)_ in this.options||(d[_]=c[_]);c=P(this,c);var y=c.detectRetina&&At.retina?2:1,b=this.getTileSize();d.width=b.x*y,d.height=b.y*y,this.wmsParams=d},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,ko.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),d=this._crs,_=rt(d.project(c[0]),d.project(c[1])),y=_.min,b=_.max,N=(this._wmsVersion>=1.3&&this._crs===Ue?[y.y,y.x,b.y,b.x]:[y.x,y.y,b.x,b.y]).join(","),$=ko.prototype.getTileUrl.call(this,o);return $+x(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(o,c){return r(this.wmsParams,o),c||this.redraw(),this}});function EP(o,c){return new Z_(o,c)}ko.WMS=Z_,K_.wms=EP;var rr=me.extend({options:{padding:.1},initialize:function(o){P(this,o),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),$t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var d=this._map.getZoomScale(c,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,c),b=_.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(o,c));At.any3d?Ii(this._container,b,d):Ft(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),d=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new Ht(d,d.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Y_=rr.extend({options:{tolerance:0},getEvents:function(){var o=rr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Rt(o,"mousemove",this._onMouseMove,this),Rt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Rt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,_e(this._container),de(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rr.prototype._update.call(this);var o=this._bounds,c=this._container,d=o.getSize(),_=At.retina?2:1;Ft(c,o.min),c.width=_*d.x,c.height=_*d.y,c.style.width=d.x+"px",c.style.height=d.y+"px",At.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){rr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[h(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,d=c.next,_=c.prev;d?d.prev=_:this._drawLast=_,_?_.next=d:this._drawFirst=d,delete o._order,delete this._layers[h(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),d=[],_,y;for(y=0;y<c.length;y++){if(_=Number(c[y]),isNaN(_))return;d.push(_)}o.options._dashArray=d}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ht,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var d=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)o=_.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var d,_,y,b,N=o._parts,$=N.length,H=this._ctx;if($){for(H.beginPath(),d=0;d<$;d++){for(_=0,y=N[d].length;_<y;_++)b=N[d][_],H[_?"lineTo":"moveTo"](b.x,b.y);c&&H.closePath()}this._fillStroke(H,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,d=this._ctx,_=Math.max(Math.round(o._radius),1),y=(Math.max(Math.round(o._radiusY),1)||_)/_;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(c.x,c.y/y,_,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,o)}},_fillStroke:function(o,c){var d=c.options;d.fill&&(o.globalAlpha=d.fillOpacity,o.fillStyle=d.fillColor||d.color,o.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=d.opacity,o.lineWidth=d.weight,o.strokeStyle=d.color,o.lineCap=d.lineCap,o.lineJoin=d.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),d,_,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(d))&&(_=d);this._fireEvent(_?[_]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(be(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var d,_,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(c)&&(_=d);_!==this._hoveredLayer&&(this._handleMouseOut(o),_&&($t(this._container,"leaflet-interactive"),this._fireEvent([_],o,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,d){this._map._fireDOMEvent(c,d||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var d=c.next,_=c.prev;if(d)d.prev=_;else return;_?_.next=d:d&&(this._drawFirst=d),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var d=c.next,_=c.prev;if(_)_.next=d;else return;d?d.prev=_:_&&(this._drawLast=_),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Q_(o){return At.canvas?new Y_(o):null}var ol=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bP={_initContainer:function(){this._container=Xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=ol("shape");$t(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=ol("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;_e(c),o.removeInteractiveTarget(c),delete this._layers[h(o)]},_updateStyle:function(o){var c=o._stroke,d=o._fill,_=o.options,y=o._container;y.stroked=!!_.stroke,y.filled=!!_.fill,_.stroke?(c||(c=o._stroke=ol("stroke")),y.appendChild(c),c.weight=_.weight+"px",c.color=_.color,c.opacity=_.opacity,_.dashArray?c.dashStyle=U(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=_.lineCap.replace("butt","flat"),c.joinstyle=_.lineJoin):c&&(y.removeChild(c),o._stroke=null),_.fill?(d||(d=o._fill=ol("fill")),y.appendChild(d),d.color=_.fillColor||_.color,d.opacity=_.fillOpacity):d&&(y.removeChild(d),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),d=Math.round(o._radius),_=Math.round(o._radiusY||d);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+d+","+_+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){Qi(o._container)},_bringToBack:function(o){kr(o._container)}},yh=At.vml?ol:Z,al=rr.extend({_initContainer:function(){this._container=yh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_e(this._container),de(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rr.prototype._update.call(this);var o=this._bounds,c=o.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,d.setAttribute("width",c.x),d.setAttribute("height",c.y)),Ft(d,o.min),d.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=yh("path");o.options.className&&$t(c,o.options.className),o.options.interactive&&$t(c,"leaflet-interactive"),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){_e(o._path),o.removeInteractiveTarget(o._path),delete this._layers[h(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,d=o.options;c&&(d.stroke?(c.setAttribute("stroke",d.color),c.setAttribute("stroke-opacity",d.opacity),c.setAttribute("stroke-width",d.weight),c.setAttribute("stroke-linecap",d.lineCap),c.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?c.setAttribute("stroke-dasharray",d.dashArray):c.removeAttribute("stroke-dasharray"),d.dashOffset?c.setAttribute("stroke-dashoffset",d.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),d.fill?(c.setAttribute("fill",d.fillColor||d.color),c.setAttribute("fill-opacity",d.fillOpacity),c.setAttribute("fill-rule",d.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Y(o._parts,c))},_updateCircle:function(o){var c=o._point,d=Math.max(Math.round(o._radius),1),_=Math.max(Math.round(o._radiusY),1)||d,y="a"+d+","+_+" 0 1,0 ",b=o._empty()?"M0 0":"M"+(c.x-d)+","+c.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(o,b)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){Qi(o._path)},_bringToBack:function(o){kr(o._path)}});At.vml&&al.include(bP);function X_(o){return At.svg||At.vml?new al(o):null}Qt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Q_(o)||X_(o)}});var J_=xo.extend({initialize:function(o,c){xo.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Pt(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function TP(o,c){return new J_(o,c)}al.create=yh,al.pointsToPath=Y,ir.geometryToLayer=fh,ir.coordsToLatLng=qf,ir.coordsToLatLngs=dh,ir.latLngToCoords=Hf,ir.latLngsToCoords=mh,ir.getFeature=Co,ir.asFeature=ph,Qt.mergeOptions({boxZoom:!0});var tg=Un.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ui(),ja(),this._startPoint=this._map.mouseEventToContainerPoint(o),Rt(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Xt("div","leaflet-zoom-box",this._container),$t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new Ht(this._point,this._startPoint),d=c.getSize();Ft(this._box,c.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(_e(this._box),be(this._container,"leaflet-crosshair")),fi(),qa(),de(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var c=new ht(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qt.addInitHook("addHandler","boxZoom",tg),Qt.mergeOptions({doubleClickZoom:!0});var eg=Un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,d=c.getZoom(),_=c.options.zoomDelta,y=o.originalEvent.shiftKey?d-_:d+_;c.options.doubleClickZoom==="center"?c.setZoom(y):c.setZoomAround(o.containerPoint,y)}});Qt.addInitHook("addHandler","doubleClickZoom",eg),Qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ng=Un.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new di(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}$t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Pt(this._map.options.maxBounds);this._offsetLimit=rt(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),d=this._initialWorldOffset,_=this._draggable._newPos.x,y=(_-c+d)%o+c-d,b=(_+c+d)%o-c-d,N=Math.abs(y+d)<Math.abs(b+d)?y:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(o){var c=this._map,d=c.options,_=!d.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),_)c.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,N=d.easeLinearity,$=y.multiplyBy(N/b),H=$.distanceTo([0,0]),tt=Math.min(d.inertiaMaxSpeed,H),wt=$.multiplyBy(tt/H),Ot=tt/(d.inertiaDeceleration*N),Kt=wt.multiplyBy(-Ot/2).round();!Kt.x&&!Kt.y?c.fire("moveend"):(Kt=c._limitOffset(Kt,c.options.maxBounds),D(function(){c.panBy(Kt,{duration:Ot,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Qt.addInitHook("addHandler","dragging",ng),Qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ig=Un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Rt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),de(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,d=o.scrollTop||c.scrollTop,_=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(_,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},d=this.keyCodes,_,y;for(_=0,y=d.left.length;_<y;_++)c[d.left[_]]=[-1*o,0];for(_=0,y=d.right.length;_<y;_++)c[d.right[_]]=[o,0];for(_=0,y=d.down.length;_<y;_++)c[d.down[_]]=[0,o];for(_=0,y=d.up.length;_<y;_++)c[d.up[_]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},d=this.keyCodes,_,y;for(_=0,y=d.zoomIn.length;_<y;_++)c[d.zoomIn[_]]=o;for(_=0,y=d.zoomOut.length;_<y;_++)c[d.zoomOut[_]]=-o},_addHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){de(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,d=this._map,_;if(c in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(_=this._panKeys[c],o.shiftKey&&(_=It(_).multiplyBy(3)),d.options.maxBounds&&(_=d._limitOffset(It(_),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(_)));d.panTo(y)}else d.panBy(_)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Gn(o)}}});Qt.addInitHook("addHandler","keyboard",ig),Qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rg=Un.extend({addHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=ih(o),d=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var _=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),_),Gn(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),d=this._map.options.zoomSnap||0;o._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,b=d?Math.ceil(y/d)*d:y,N=o._limitZoom(c+(this._delta>0?b:-b))-c;this._delta=0,this._startTime=null,N&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+N):o.setZoomAround(this._lastMousePos,c+N))}});Qt.addInitHook("addHandler","scrollWheelZoom",rg);var PP=600;Qt.mergeOptions({tapHold:At.touchNative&&At.safari&&At.mobile,tapTolerance:15});var sg=Un.extend({addHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new ft(c.clientX,c.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Rt(document,"touchend",Se),Rt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),PP),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){de(document,"touchend",Se),de(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new ft(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var d=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});d._simulated=!0,c.target.dispatchEvent(d)}});Qt.addInitHook("addHandler","tapHold",sg),Qt.mergeOptions({touchZoom:At.touch,bounceAtZoomLimits:!0});var og=Un.extend({addHooks:function(){$t(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var d=c.mouseEventToContainerPoint(o.touches[0]),_=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(d.add(_)._divideBy(2))),this._startDist=d.distanceTo(_),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),Se(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,d=c.mouseEventToContainerPoint(o.touches[0]),_=c.mouseEventToContainerPoint(o.touches[1]),y=d.distanceTo(_)/this._startDist;if(this._zoom=c.getScaleZoom(y,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&y<1||this._zoom>c.getMaxZoom()&&y>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var b=d._add(_)._divideBy(2)._subtract(this._centerPoint);if(y===1&&b.x===0&&b.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var N=a(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(N,this,!0),Se(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qt.addInitHook("addHandler","touchZoom",og),Qt.BoxZoom=tg,Qt.DoubleClickZoom=eg,Qt.Drag=ng,Qt.Keyboard=ig,Qt.ScrollWheelZoom=rg,Qt.TapHold=sg,Qt.TouchZoom=og,n.Bounds=Ht,n.Browser=At,n.CRS=j,n.Canvas=Y_,n.Circle=jf,n.CircleMarker=uh,n.Class=fe,n.Control=xn,n.DivIcon=W_,n.DivOverlay=Li,n.DomEvent=rh,n.DomUtil=eh,n.Draggable=di,n.Evented=qt,n.FeatureGroup=Re,n.GeoJSON=ir,n.GridLayer=sl,n.Handler=Un,n.Icon=Ai,n.ImageOverlay=_h,n.LatLng=mt,n.LatLngBounds=ht,n.Layer=me,n.LayerGroup=Ie,n.LineUtil=S,n.Map=Qt,n.Marker=hh,n.Mixin=Rs,n.Path=Fr,n.Point=ft,n.PolyUtil=Mo,n.Polygon=xo,n.Polyline=nr,n.Popup=gh,n.PosAnimation=Xa,n.Projection=ut,n.Rectangle=J_,n.Renderer=rr,n.SVG=al,n.SVGOverlay=H_,n.TileLayer=ko,n.Tooltip=vh,n.Transformation=Wt,n.Util=C,n.VideoOverlay=q_,n.bind=a,n.bounds=rt,n.canvas=Q_,n.circle=hP,n.circleMarker=cP,n.control=En,n.divIcon=yP,n.extend=r,n.featureGroup=Lo,n.geoJSON=j_,n.geoJson=dP,n.gridLayer=wP,n.icon=aP,n.imageOverlay=mP,n.latLng=Tt,n.latLngBounds=Pt,n.layerGroup=Vr,n.map=Eo,n.marker=lP,n.point=It,n.polygon=fP,n.polyline=uP,n.popup=gP,n.rectangle=TP,n.setOptions=P,n.stamp=h,n.svg=X_,n.svgOverlay=_P,n.tileLayer=K_,n.tooltip=vP,n.transformation=A,n.version=i,n.videoOverlay=pP;var SP=window.L;n.noConflict=function(){return window.L=SP,this},window.L=n})}(bl,bl.exports)),bl.exports}var ei=GR();const Me=VR(ei),v_=OP({__proto__:null,default:Me},[ei]);(function(e,t,n){function i(r,s){for(;(r=r.parentElement)&&!r.classList.contains(s););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,s){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,s&&s.shapeOptions&&(s.shapeOptions=L.Util.extend({},this.options.shapeOptions,s.shapeOptions)),L.setOptions(this,s);var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),s=this._poly,a=s.getLatLngs(),l=a.splice(-1,1)[0];this._poly.setLatLngs(a),this._markerGroup.removeLayer(r),s.getLatLngs().length<2&&this._map.removeLayer(s),this._vertexChanged(l,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),s=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&s||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var s=this._map.mouseEventToLayerPoint(r.originalEvent),a=this._map.layerPointToLatLng(s);this._currentLatLng=a,this._updateTooltip(a),this._updateGuide(s),this._mouseMarker.setLatLng(a),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,s){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,s),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var s=r.originalEvent,a=s.clientX,l=s.clientY;this._startPoint.call(this,a,l)}},_startPoint:function(r,s){this._mouseDownOrigin=L.point(r,s)},_onMouseUp:function(r){var s=r.originalEvent,a=s.clientX,l=s.clientY;this._endPoint.call(this,a,l,r),this._clickHandled=null},_endPoint:function(r,s,a){if(this._mouseDownOrigin){var l=L.point(r,s).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(a.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(a.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(l)<9*(e.devicePixelRatio||1)&&this.addVertex(a.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var s,a,l=r.originalEvent;!l.touches||!l.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(s=l.touches[0].clientX,a=l.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,s,a),this._endPoint.call(this,s,a,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var s;if(this._markers.length>0){var a;if(this.type===L.Draw.Polyline.TYPE)a=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;a=this._markers[0]}var l=this._map.latLngToContainerPoint(a.getLatLng()),h=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),f=this._map.latLngToContainerPoint(h.getLatLng());s=l.distanceTo(f)}else s=1/0;return s},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var s=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(s),s},_updateGuide:function(r){var s=this._markers?this._markers.length:0;s>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[s-1].getLatLng()),r))},_updateTooltip:function(r){var s=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(s)},_drawGuide:function(r,s){var a,l,h,f=Math.floor(Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2))),m=this.options.guidelineDistance,p=this.options.maxGuideLineLength,g=f>p?f-p:m;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));g<f;g+=this.options.guidelineDistance)a=g/f,l={x:Math.floor(r.x*(1-a)+a*s.x),y:Math.floor(r.y*(1-a)+a*s.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,l)},_updateGuideColor:function(r){if(this._guidesContainer)for(var s=0,a=this._guidesContainer.childNodes.length;s<a;s++)this._guidesContainer.childNodes[s].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,s,a=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(s=a?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:s}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:s}),r},_updateRunningMeasure:function(r,s){var a,l,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(a=h-(s?2:1),l=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[a].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[a].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=l*(s?1:-1))},_getMeasurementString:function(){var r,s=this._currentLatLng,a=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?a&&s&&s.distanceTo?this._measurementRunningTotal+s.distanceTo(a)*(this.options.factor||1):this._measurementRunningTotal||0:a&&s?this._measurementRunningTotal+this._map.distance(s,a)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,s){L.Draw.Polyline.prototype.initialize.call(this,r,s),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,s;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,s=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,s=this._getMeasurementString()),{text:r,subtext:s}},_getMeasurementString:function(){var r=this._area,s="";return r||this.options.showLength?(this.options.showLength&&(s=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(s+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),s):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,s){var a;!this.options.allowIntersection&&this.options.showArea&&(a=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(a)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,s)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,s){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var s=r.latlng;this._tooltip.updatePosition(s),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(s))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,s){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,s)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,s,a,l=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,f=this.options.showArea;return h&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=L.GeometryUtil.geodesicArea(r),a=f?L.GeometryUtil.readableArea(s,this.options.metric):""),{text:l.text,subtext:a}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,s){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var s=r.latlng;this._tooltip.updatePosition(s),this._mouseMarker.setLatLng(s),this._marker?(s=this._mouseMarker.getLatLng(),this._marker.setLatLng(s)):(this._marker=this._createMarker(s),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,s){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,s)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,s){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,s)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var s=this._startLatLng.distanceTo(r);else var s=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(s):(this._shape=new L.Circle(this._startLatLng,s,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var s,a=r.latlng,l=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(a),this._isDrawing){this._drawShape(a),s=this._shape.getRadius().toFixed(1);var f="";l&&(f=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(s,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:f})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,s){this._marker=r,L.setOptions(this,s)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var s=r.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,s){var a=parseInt(r.style.marginTop,10)-s,l=parseInt(r.style.marginLeft,10)-s;r.style.marginTop=a+"px",r.style.marginLeft=l+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var s=0;s<this._verticesHandlers.length;s++)r(this._verticesHandlers[s])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this._latlngs=s,L.setOptions(this,a)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,s=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),s&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(a){L.DomUtil.removeClass(s,a)}),r.options.editing.className.split(" ").forEach(function(a){L.DomUtil.addClass(s,a)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,s=r._path;s&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(a){L.DomUtil.removeClass(s,a)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(a){L.DomUtil.addClass(s,a)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,s,a,l,h=this._defaultShape();for(r=0,a=h.length;r<a;r++)l=this._createMarker(h[r],r),l.on("click",this._onMarkerClick,this),l.on("contextmenu",this._onContextMenu,this),this._markers.push(l);var f,m;for(r=0,s=a-1;r<a;s=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[s],m=this._markers[r],this._createMiddleMarker(f,m),this._updatePrevNext(f,m))},_createMarker:function(r,s){var a=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return a._origLatLng=r,a._index=s,a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(a),a},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),s=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),s},_removeMarker:function(r){var s=r._index;this._markerGroup.removeLayer(r),this._markers.splice(s,1),this._spliceLatLngs(s,1),this._updateIndexes(s,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var s=r.target,a=this._poly,l=L.LatLngUtil.cloneLatLng(s._origLatLng);if(L.extend(s._origLatLng,s._latlng),a.options.poly){var h=a._map._editTooltip;if(!a.options.poly.allowIntersection&&a.intersects()){L.extend(s._origLatLng,l),s.setLatLng(l);var f=a.options.color;a.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){a.setStyle({color:f}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var m=this._poly.getLatLngs();this._poly._convertLatLngs(m,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var s=L.Polygon&&this._poly instanceof L.Polygon?4:3,a=r.target;this._defaultShape().length<s||(this._removeMarker(a),this._updatePrevNext(a._prev,a._next),a._middleLeft&&this._markerGroup.removeLayer(a._middleLeft),a._middleRight&&this._markerGroup.removeLayer(a._middleRight),a._prev&&a._next?this._createMiddleMarker(a._prev,a._next):a._prev?a._next||(a._prev._middleRight=null):a._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var s=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:s,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var s=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),a=this._map.layerPointToLatLng(s),l=r.target;L.extend(l._origLatLng,a),l._middleLeft&&l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev,l)),l._middleRight&&l._middleRight.setLatLng(this._getMiddleLatLng(l,l._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,s){this._markerGroup.eachLayer(function(a){a._index>r&&(a._index+=s)})},_createMiddleMarker:function(r,s){var a,l,h,f=this._getMiddleLatLng(r,s),m=this._createMarker(f);m.setOpacity(.6),r._middleRight=s._middleLeft=m,l=function(){m.off("touchmove",l,this);var p=s._index;m._index=p,m.off("click",a,this).on("click",this._onMarkerClick,this),f.lat=m.getLatLng().lat,f.lng=m.getLatLng().lng,this._spliceLatLngs(p,0,f),this._markers.splice(p,0,m),m.setOpacity(1),this._updateIndexes(p,1),s._index++,this._updatePrevNext(r,m),this._updatePrevNext(m,s),this._poly.fire("editstart")},h=function(){m.off("dragstart",l,this),m.off("dragend",h,this),m.off("touchmove",l,this),this._createMiddleMarker(r,m),this._createMiddleMarker(m,s)},a=function(){l.call(this),h.call(this),this._fireEdit()},m.on("click",a,this).on("dragstart",l,this).on("dragend",h,this).on("touchmove",l,this),this._markerGroup.addLayer(m)},_updatePrevNext:function(r,s){r&&(r._next=s),s&&(s._prev=r)},_getMiddleLatLng:function(r,s){var a=this._poly._map,l=a.project(r.getLatLng()),h=a.project(s.getLatLng());return a.unproject(l._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,s){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,s)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var s=0,a=this._resizeMarkers.length;s<a;s++)this._unbindMarker(this._resizeMarkers[s]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,s){var a=new L.Marker.Touch(r,{draggable:!0,icon:s,zIndexOffset:10});return this._bindMarker(a),this._markerGroup.addLayer(a),a},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var s=r.target,a=s.getLatLng();s===this._moveMarker?this._move(a):this._resize(a),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var s=this._getCorners(),a=r.target,l=a._cornerIndex;a.setOpacity(0),this._oppositeCorner=s[(l+2)%4],this._toggleCornerMarkers(0,l)}this._shape.fire("editstart")},_onTouchMove:function(r){var s=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),a=this._map.layerPointToLatLng(s);return r.target===this._moveMarker?this._move(a):this._resize(a),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),s=r.getCenter();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var s=0,a=r.length;s<a;s++)this._resizeMarkers.push(this._createMarker(r[s],this.options.resizeIcon)),this._resizeMarkers[s]._cornerIndex=s},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var s=this._getCorners(),a=r.target,l=a._cornerIndex;this._oppositeCorner=s[(l+2)%4],this._toggleCornerMarkers(0,l)},_onMarkerDragEnd:function(r){var s,a,l=r.target;l===this._moveMarker&&(s=this._shape.getBounds(),a=s.getCenter(),l.setLatLng(a)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var s,a=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),l=this._shape.getBounds(),h=l.getCenter(),f=[],m=0,p=a.length;m<p;m++)s=[a[m].lat-h.lat,a[m].lng-h.lng],f.push([r.lat+s[0],r.lng+s[1]]);this._shape.setLatLngs(f),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var s;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),s=this._shape.getBounds(),this._moveMarker.setLatLng(s.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var s=0,a=this._resizeMarkers.length;s<a;s++)this._resizeMarkers[s].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),s=0,a=this._resizeMarkers.length;s<a;s++)this._resizeMarkers[s].setLatLng(r[s])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var s=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(s)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),s=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(s,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var s=this._shape._radius*Math.cos(Math.PI/4),a=this._map.project(r);return this._map.unproject([a.x+s,a.y-s])},_resize:function(r){var s=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=s.distanceTo(r):radius=this._map.distance(s,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,s){var a={};if(r.touches!==void 0){if(!r.touches.length)return;a=r.touches[0]}else if(r.pointerType!=="touch"||(a=r,!this._filterClick(r)))return;var l=this._map.mouseEventToContainerPoint(a),h=this._map.mouseEventToLayerPoint(a),f=this._map.layerPointToLatLng(h);this._map.fire(s,{latlng:f,layerPoint:h,containerPoint:l,pageX:a.pageX,pageY:a.pageY,originalEvent:r})},_filterClick:function(r){var s=r.timeStamp||r.originalEvent.timeStamp,a=L.DomEvent._lastClick&&s-L.DomEvent._lastClick;return a&&a>100&&a<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=s,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var s="touchcancel";this._detectIE()&&(s="pointercancel"),this._touchEvent(r,s)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=e.navigator.userAgent,s=r.indexOf("MSIE ");if(s>0)return parseInt(r.substring(s+5,r.indexOf(".",s)),10);if(r.indexOf("Trident/")>0){var a=r.indexOf("rv:");return parseInt(r.substring(a+3,r.indexOf(".",a)),10)}var l=r.indexOf("Edge/");return l>0&&parseInt(r.substring(l+5,r.indexOf(".",l)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,s=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?s.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):s.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var a=0;a<s.length;a++)L.DomEvent.on(r,s[a],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=e.navigator.userAgent,s=r.indexOf("MSIE ");if(s>0)return parseInt(r.substring(s+5,r.indexOf(".",s)),10);if(r.indexOf("Trident/")>0){var a=r.indexOf("rv:");return parseInt(r.substring(a+3,r.indexOf(".",a)),10)}var l=r.indexOf("Edge/");return l>0&&parseInt(r.substring(l+5,r.indexOf(".",l)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var s=[],a=0,l=r.length;a<l;a++)Array.isArray(r[a])?s.push(L.LatLngUtil.cloneLatLngs(r[a])):s.push(this.cloneLatLng(r[a]));return s},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(s){var a,l,h=s.length,f=0,m=Math.PI/180;if(h>2){for(var p=0;p<h;p++)a=s[p],l=s[(p+1)%h],f+=(l.lng-a.lng)*m*(2+Math.sin(a.lat*m)+Math.sin(l.lat*m));f=6378137*f*6378137/2}return Math.abs(f)},formattedNumber:function(s,a){var l=parseFloat(s).toFixed(a),h=L.drawLocal.format&&L.drawLocal.format.numeric,f=h&&h.delimiters,m=f&&f.thousands,p=f&&f.decimal;if(m||p){var g=l.split(".");l=m?g[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m):g[0],p=p||".",g.length>1&&(l=l+p+g[1])}return l},readableArea:function(s,a,m){var h,f,m=L.Util.extend({},r,m);return a?(f=["ha","m"],type=typeof a,type==="string"?f=[a]:type!=="boolean"&&(f=a),h=s>=1e6&&f.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*s,m.km)+" km²":s>=1e4&&f.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*s,m.ha)+" ha":L.GeometryUtil.formattedNumber(s,m.m)+" m²"):(s/=.836127,h=s>=3097600?L.GeometryUtil.formattedNumber(s/3097600,m.mi)+" mi²":s>=4840?L.GeometryUtil.formattedNumber(s/4840,m.ac)+" acres":L.GeometryUtil.formattedNumber(s,m.yd)+" yd²"),h},readableDistance:function(s,a,l,h,p){var m,p=L.Util.extend({},r,p);switch(a?typeof a=="string"?a:"metric":l?"feet":h?"nauticalMile":"yards"){case"metric":m=s>1e3?L.GeometryUtil.formattedNumber(s/1e3,p.km)+" km":L.GeometryUtil.formattedNumber(s,p.m)+" m";break;case"feet":s*=3.28083,m=L.GeometryUtil.formattedNumber(s,p.ft)+" ft";break;case"nauticalMile":s*=.53996,m=L.GeometryUtil.formattedNumber(s/1e3,p.nm)+" nm";break;case"yards":default:s*=1.09361,m=s>1760?L.GeometryUtil.formattedNumber(s/1760,p.mi)+" miles":L.GeometryUtil.formattedNumber(s,p.yd)+" yd"}return m},isVersion07x:function(){var s=L.version.split(".");return parseInt(s[0],10)===0&&parseInt(s[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,s,a,l){return this._checkCounterclockwise(r,a,l)!==this._checkCounterclockwise(s,a,l)&&this._checkCounterclockwise(r,s,a)!==this._checkCounterclockwise(r,s,l)},_checkCounterclockwise:function(r,s,a){return(a.y-r.y)*(s.x-r.x)>(s.y-r.y)*(a.x-r.x)}}),L.Polyline.include({intersects:function(){var r,s,a,l=this._getProjectedPoints(),h=l?l.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=h-1;r>=3;r--)if(s=l[r-1],a=l[r],this._lineSegmentsIntersectsRange(s,a,r-2))return!0;return!1},newLatLngIntersects:function(r,s){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),s)},newPointIntersects:function(r,s){var a=this._getProjectedPoints(),l=a?a.length:0,h=a?a[l-1]:null,f=l-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,r,f,s?1:0)},_tooFewPointsForIntersection:function(r){var s=this._getProjectedPoints(),a=s?s.length:0;return a+=r||0,!s||a<=3},_lineSegmentsIntersectsRange:function(r,s,a,l){var h,f,m=this._getProjectedPoints();l=l||0;for(var p=a;p>l;p--)if(h=m[p-1],f=m[p],L.LineUtil.segmentsIntersect(r,s,h,f))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],s=this._defaultShape(),a=0;a<s.length;a++)r.push(this._map.latLngToLayerPoint(s[a]));return r}}),L.Polygon.include({intersects:function(){var r,s,a,l,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=h.length,s=h[0],a=h[r-1],l=r-2,this._lineSegmentsIntersectsRange(a,s,l,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var s;this._toolbars={},L.DrawToolbar&&this.options.draw&&(s=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=s,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(s=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=s,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var s,a=L.DomUtil.create("div","leaflet-draw"),l=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(s=this._toolbars[h].addToolbar(r))&&(l||(L.DomUtil.hasClass(s,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(s.childNodes[0],"leaflet-draw-toolbar-top"),l=!0),a.appendChild(s));return a},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var s in this._toolbars)this._toolbars[s]instanceof L.DrawToolbar&&this._toolbars[s].setOptions(r)},_toolbarEnabled:function(r){var s=r.target;for(var a in this._toolbars)this._toolbars[a]!==s&&this._toolbars[a].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var s,a=L.DomUtil.create("div","leaflet-draw-section"),l=0,h=this._toolbarClass||"",f=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,s=0;s<f.length;s++)f[s].enabled&&this._initModeHandler(f[s].handler,this._toolbarContainer,l++,h,f[s].title);if(l)return this._lastButtonIndex=--l,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),a.appendChild(this._toolbarContainer),a.appendChild(this._actionsContainer),a},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var s=0,a=this._actionButtons.length;s<a;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,s,a,l,h){var f=r.type;this._modes[f]={},this._modes[f].handler=r,this._modes[f].button=this._createButton({type:f,title:h,className:l+"-"+f,container:s,callback:this._modes[f].handler.enable,context:this._modes[f].handler}),this._modes[f].buttonIndex=a,this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(r){var s=L.DomUtil.create("a",r.className||"",r.container),a=L.DomUtil.create("span","sr-only",r.container);s.href="#",s.appendChild(a),r.title&&(s.title=r.title,a.innerHTML=r.title),r.text&&(s.innerHTML=r.text,a.innerHTML=r.text);var l=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(s,"click",L.DomEvent.stopPropagation).on(s,"mousedown",L.DomEvent.stopPropagation).on(s,"dblclick",L.DomEvent.stopPropagation).on(s,"touchstart",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.preventDefault).on(s,l,r.callback,r.context),s},_disposeButton:function(r,s){var a=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,a,s)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var s,a,l,h,f=this._actionsContainer,m=this.getActions(r),p=m.length;for(a=0,l=this._actionButtons.length;a<l;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback);for(this._actionButtons=[];f.firstChild;)f.removeChild(f.firstChild);for(var g=0;g<p;g++)"enabled"in m[g]&&!m[g].enabled||(s=L.DomUtil.create("li","",f),h=this._createButton({title:m[g].title,text:m[g].text,container:s,callback:m[g].callback,context:m[g].context}),this._actionButtons.push({button:h,callback:m[g].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,s=this._lastButtonIndex,a=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=a+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===s&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var s=this._map.latLngToLayerPoint(r),a=this._container;return this._container&&(this._visible&&(a.style.visibility="inherit"),L.DomUtil.setPosition(a,s)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var s in this.options)this.options.hasOwnProperty(s)&&r[s]&&(r[s]=L.extend({},this.options[s],r[s]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var s in this._modes)this._modes.hasOwnProperty(s)&&r.hasOwnProperty(s)&&this._modes[s].handler.setOptions(r[s])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var s=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:s,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:s}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var s=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&s.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),s},addToolbar:function(r){var s=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),s},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,s=this.options.featureGroup,a=s.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,a?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,a?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,s){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,s),this._featureGroup=s.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(s){s.edited&&(r.addLayer(s),s.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var s=L.Util.stamp(r);this._uneditedLayerProps[s]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[s]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var s=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(s)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[s].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[s].latlng),r.setRadius(this._uneditedLayerProps[s].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[s].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var s,a,l=r.layer||r.target||r;this._backupLayer(l),this.options.poly&&(a=L.Util.extend({},this.options.poly),l.options.poly=a),this.options.selectedPathOptions&&(s=L.Util.extend({},this.options.selectedPathOptions),s.maintainColor&&(s.color=l.options.color,s.fillColor=l.options.fillColor),l.options.original=L.extend({},l.options),l.options.editing=s),l instanceof L.Marker?(l.editing&&l.editing.enable(),l.dragging.enable(),l.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):l.editing.enable()},_disableLayerEdit:function(r){var s=r.layer||r.target||r;s.edited=!1,s.editing&&s.editing.disable(),delete s.options.editing,delete s.options.original,this._selectedPathOptions&&(s instanceof L.Marker?this._toggleMarkerHighlight(s):(s.setStyle(s.options.previousOptions),delete s.options.previousOptions)),s instanceof L.Marker?(s.dragging.disable(),s.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var s=r.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_onTouchMove:function(r){var s=r.originalEvent.changedTouches[0],a=this._map.mouseEventToLayerPoint(s),l=this._map.layerPointToLatLng(a);r.target.setLatLng(l)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,s){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,s),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var s=r.layer||r.target||r;s.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(s)},_removeLayer:function(r){var s=r.layer||r.target||r;this._deletableLayers.removeLayer(s),this._deletedLayers.addLayer(s),s.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zs.apply(this,arguments)}function UR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Fu(e,t)}function Fu(e,t){return Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Fu(e,t)}function zR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Im(e,t,n){return Im=zR()?Reflect.construct.bind():function(i,r,s){var a=[null];a.push.apply(a,r);var l=new(Function.bind.apply(i,a));return s&&Fu(l,s.prototype),l},Im.apply(null,arguments)}function _r(e,t,n,i){t===void 0&&(t=""),i===void 0&&(i={});var r=document.createElement(e);return t&&(r.className=t),Object.keys(i).forEach(function(s){if(typeof i[s]=="function"){var a=s.indexOf("on")===0?s.substr(2).toLowerCase():s;r.addEventListener(a,i[s])}else s==="html"?r.innerHTML=i[s]:s==="text"?r.innerText=i[s]:r.setAttribute(s,i[s])}),n&&n.appendChild(r),r}function ul(e){e.preventDefault(),e.stopPropagation()}var Jh=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function Bs(e,t){e&&e.classList&&(Array.isArray(t)?t:[t]).forEach(function(n){e.classList.contains(n)||e.classList.add(n)})}function Oi(e,t){e&&e.classList&&(Array.isArray(t)?t:[t]).forEach(function(n){e.classList.contains(n)&&e.classList.remove(n)})}var Gu,Uu=13,Mm=40,Lb=38,BR=[Uu,27,Mm,Lb,37,39],$R=function(){function e(n){var i=this,r=n.handleSubmit,s=n.searchLabel,a=n.classNames,l=a===void 0?{}:a;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=_r("div",Jh("geosearch",l.container)),this.form=_r("form",["",l.form].join(" "),this.container,{autocomplete:"none",onClick:ul,onDblClick:ul,touchStart:ul,touchEnd:ul}),this.input=_r("input",["glass",l.input].join(" "),this.form,{type:"text",placeholder:s||"search",onInput:this.onInput,onKeyUp:function(h){return i.onKeyUp(h)},onKeyPress:function(h){return i.onKeyPress(h)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){i.input.focus(),i.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=r}var t=e.prototype;return t.onFocus=function(){Bs(this.form,"active")},t.onBlur=function(){Oi(this.form,"active")},t.onSubmit=function(n){try{var i=this;return ul(n),Oi(r=i.container,"error"),Bs(r,"pending"),Promise.resolve(i.handleSubmit({query:i.input.value})).then(function(){Oi(i.container,"pending")})}catch(s){return Promise.reject(s)}var r},t.onInput=function(){this.hasError&&(Oi(this.container,"error"),this.hasError=!1)},t.onKeyUp=function(n){n.keyCode===27&&(Oi(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},t.onKeyPress=function(n){n.keyCode===Uu&&this.onSubmit(n)},t.setQuery=function(n){this.input.value=n},e}(),jR=function(){function e(n){var i=this,r=n.handleClick,s=n.classNames,a=s===void 0?{}:s,l=n.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(h){if(typeof i.handleClick=="function"){var f=h.target;if(f&&i.container.contains(f)&&f.hasAttribute("data-key")){var m=Number(f.getAttribute("data-key"));i.handleClick({result:i.results[m]})}}},this.handleClick=r,this.notFoundMessage=l?_r("div",Jh(a.notfound),void 0,{html:l}):void 0,this.container=_r("div",Jh("results",a.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=_r("div",Jh(a.item))}var t=e.prototype;return t.render=function(n,i){var r=this;n===void 0&&(n=[]),this.clear(),n.forEach(function(s,a){var l=r.resultItem.cloneNode(!0);l.setAttribute("data-key",""+a),l.innerHTML=i({result:s}),r.container.appendChild(l)}),n.length>0?(Bs(this.container.parentElement,"open"),Bs(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),Bs(this.container.parentElement,"open")),this.results=n},t.select=function(n){return Array.from(this.container.children).forEach(function(i,r){return r===n?Bs(i,"active"):Oi(i,"active")}),this.selected=n,this.results[n]},t.count=function(){return this.results?this.results.length:0},t.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);Oi(this.container.parentElement,"open"),Oi(this.container,"active")},e}(),Ed={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(e){return""+e.result.label},resultFormat:function(e){return""+e.result.label},marker:{icon:v_&&ei.Icon?new ei.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0,resetButton:"×"},xb="Leaflet must be loaded before instantiating the GeoSearch control",qR={options:zs({},Ed),classNames:zs({},Ed.classNames),initialize:function(e){var t,n,i,r,s=this;if(!v_)throw new Error(xb);if(!e.provider)throw new Error("Provider is missing from options");this.options=zs({},Ed,e),this.classNames=zs({},this.classNames,e.classNames),this.markers=new ei.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new $R({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(a){return s.onSubmit(a)}}),this.button=_r("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(a){return s.onClick(a)}}),ei.DomEvent.disableClickPropagation(this.button),this.resetButton=_r("button",this.classNames.resetButton,this.searchElement.form,{text:this.options.resetButton,"aria-label":this.options.clearSearchLabel,onClick:function(){s.searchElement.input.value===""?s.close():s.clearResults(null,!0)}}),ei.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new jR({handleClick:function(a){var l=a.result;s.searchElement.input.value=l.label,s.onSubmit({query:l.label,data:l})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(t=function(a){return s.autoSearch(a)},(n=this.options.autoCompleteDelay)===void 0&&(n=250),i===void 0&&(i=!1),function(){var a=[].slice.call(arguments);r&&clearTimeout(r),r=setTimeout(function(){r=null,i||t.apply(void 0,a)},n),i&&!r&&t.apply(void 0,a)}),!0),this.searchElement.input.addEventListener("keydown",function(a){return s.selectResult(a)},!0),this.searchElement.input.addEventListener("keydown",function(a){return s.clearResults(a,!0)},!0)),this.searchElement.form.addEventListener("click",function(a){a.preventDefault()},!1)},onAdd:function(e){var t=this.options,n=t.showMarker,i=t.style;if(this.map=e,n&&this.markers.addTo(e),i==="bar"){var r=e.getContainer().querySelector(".leaflet-control-container");this.container=_r("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),r.appendChild(this.container)}return ei.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var e;return(e=this.container)==null||e.remove(),this},open:function(){var e=this.searchElement,t=e.input;Bs(e.container,"active"),t.focus()},close:function(){Oi(this.searchElement.container,"active"),this.clearResults()},onClick:function(e){e.preventDefault(),e.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(e){if([Uu,Mm,Lb].indexOf(e.keyCode)!==-1)if(e.preventDefault(),e.keyCode!==Uu){var t=this.resultList.count()-1;if(!(t<0)){var n=this.resultList.selected,i=e.keyCode===Mm?n+1:n-1,r=this.resultList.select(i<0?t:i>t?0:i);this.searchElement.input.value=r.label}}else{var s=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:s})}},clearResults:function(e,t){if(t===void 0&&(t=!1),!e||e.keyCode===27){var n=this.options,i=n.autoComplete;!t&&n.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),i&&this.resultList.clear()}},autoSearch:function(e){try{var t=this;if(BR.indexOf(e.keyCode)>-1)return Promise.resolve();var n=e.target.value,i=t.options.provider,r=function(){if(n.length)return Promise.resolve(i.search({query:n})).then(function(s){s=s.slice(0,t.options.maxSuggestions),t.resultList.render(s,t.options.resultFormat)});t.resultList.clear()}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(s){return Promise.reject(s)}},onSubmit:function(e){try{var t=this;return t.resultList.clear(),Promise.resolve(t.options.provider.search(e)).then(function(n){n&&n.length>0&&t.showResult(n[0],e)})}catch(n){return Promise.reject(n)}},showResult:function(e,t){var n=this.options,i=n.autoClose,r=n.updateMap,s=this.markers.getLayers();s.length>=this.options.maxMarkers&&this.markers.removeLayer(s[0]);var a=this.addMarker(e,t);r&&this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:a}),i&&this.closeResults()},closeResults:function(){var e=this.searchElement.container;e.classList.contains("active")&&Oi(e,"active"),this.clearResults()},addMarker:function(e,t){var n=this,i=this.options,r=i.marker,s=i.showPopup,a=i.popupFormat,l=new ei.Marker([e.y,e.x],r),h=e.label;return typeof a=="function"&&(h=a({query:t,result:e})),l.bindPopup(h),this.markers.addLayer(l),s&&l.openPopup(),r.draggable&&l.on("dragend",function(f){n.map.fireEvent("geosearch/marker/dragend",{location:l.getLatLng(),event:f})}),l},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,i=t.animateZoom,r=e.bounds?new ei.LatLngBounds(e.bounds):new ei.LatLng(e.y,e.x).toBounds(10),s=r.isValid()?r:this.markers.getBounds();!n&&r.isValid()&&!e.bounds||n||!r.isValid()?this.map.setView(s.getCenter(),this.getZoom(),{animate:i}):this.map.fitBounds(s,{animate:i})},getZoom:function(){var e=this.options,t=e.zoomLevel;return e.retainZoomLevel?this.map.getZoom():t}};function HR(){if(!v_)throw new Error(xb);var e=ei.Control.extend(qR);return Im(e,[].slice.call(arguments))}(function(e){e[e.SEARCH=0]="SEARCH",e[e.REVERSE=1]="REVERSE"})(Gu||(Gu={}));var WR=function(){function e(n){n===void 0&&(n={}),this.options=void 0,this.options=n}var t=e.prototype;return t.getParamString=function(n){n===void 0&&(n={});var i=zs({},this.options.params,n);return Object.keys(i).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(i[r])}).join("&")},t.getUrl=function(n,i){return n+"?"+this.getParamString(i)},t.search=function(n){try{var i=this,r=i.endpoint({query:n.query,type:Gu.SEARCH});return Promise.resolve(fetch(r)).then(function(s){return Promise.resolve(s.json()).then(function(a){return i.parse({data:a})})})}catch(s){return Promise.reject(s)}},e}();var Gy;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Gy||(Gy={}));var KR=function(e){function t(i){var r;i===void 0&&(i={}),(r=e.call(this,i)||this).searchUrl=void 0,r.reverseUrl=void 0;var s="https://nominatim.openstreetmap.org";return r.searchUrl=i.searchUrl||s+"/search",r.reverseUrl=i.reverseUrl||s+"/reverse",r}UR(t,e);var n=t.prototype;return n.endpoint=function(i){var r=i.query,s=i.type,a=typeof r=="string"?{q:r}:r;return a.format="json",this.getUrl(s===Gu.REVERSE?this.reverseUrl:this.searchUrl,a)},n.parse=function(i){return(Array.isArray(i.data)?i.data:[i.data]).map(function(r){return{x:Number(r.lon),y:Number(r.lat),label:r.display_name,bounds:[[parseFloat(r.boundingbox[0]),parseFloat(r.boundingbox[2])],[parseFloat(r.boundingbox[1]),parseFloat(r.boundingbox[3])]],raw:r}})},t}(WR),Pn=63710088e-1,ZR={centimeters:Pn*100,centimetres:Pn*100,degrees:360/(2*Math.PI),feet:Pn*3.28084,inches:Pn*39.37,kilometers:Pn/1e3,kilometres:Pn/1e3,meters:Pn,metres:Pn,miles:Pn/1609.344,millimeters:Pn*1e3,millimetres:Pn*1e3,nauticalmiles:Pn/1852,radians:1,yards:Pn*1.0936};function Am(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function YR(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Am({type:"LineString",coordinates:e},t,n)}function QR(e,t="kilometers"){const n=ZR[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Ch(e){return e%360*Math.PI/180}function Ea(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kh(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function aa(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function XR(e,t,n={}){var i=Ea(e),r=Ea(t),s=Ch(r[1]-i[1]),a=Ch(r[0]-i[0]),l=Ch(i[1]),h=Ch(r[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(h);return QR(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}function Cb(e,t,n){if(e!==null)for(var i,r,s,a,l,h,f,m=0,p=0,g,E=e.type,T=E==="FeatureCollection",P=E==="Feature",x=T?e.features.length:1,O=0;O<x;O++){f=T?e.features[O].geometry:P?e.geometry:e,g=f?f.type==="GeometryCollection":!1,l=g?f.geometries.length:1;for(var V=0;V<l;V++){var U=0,q=0;if(a=g?f.geometries[V]:f,a!==null){h=a.coordinates;var J=a.type;switch(m=0,J){case null:break;case"Point":if(t(h,p,O,U,q)===!1)return!1;p++,U++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(t(h[i],p,O,U,q)===!1)return!1;p++,J==="MultiPoint"&&U++}J==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(r=0;r<h[i].length-m;r++){if(t(h[i][r],p,O,U,q)===!1)return!1;p++}J==="MultiLineString"&&U++,J==="Polygon"&&q++}J==="Polygon"&&U++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(q=0,r=0;r<h[i].length;r++){for(s=0;s<h[i][r].length-m;s++){if(t(h[i][r][s],p,O,U,q)===!1)return!1;p++}q++}U++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(Cb(a.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function kb(e,t){var n,i,r,s,a,l,h,f,m,p,g=0,E=e.type==="FeatureCollection",T=e.type==="Feature",P=E?e.features.length:1;for(n=0;n<P;n++){for(l=E?e.features[n].geometry:T?e.geometry:e,f=E?e.features[n].properties:T?e.properties:{},m=E?e.features[n].bbox:T?e.bbox:void 0,p=E?e.features[n].id:T?e.id:void 0,h=l?l.type==="GeometryCollection":!1,a=h?l.geometries.length:1,r=0;r<a;r++){if(s=h?l.geometries[r]:l,s===null){if(t(null,g,f,m,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,g,f,m,p)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],g,f,m,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function JR(e,t,n){var i=n;return kb(e,function(r,s,a,l,h){i=t(i,r,s,a,l,h)}),i}function t3(e,t){kb(e,function(n,i,r,s,a){var l=n===null?null:n.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Am(n,r,{bbox:s,id:a}),i,0)===!1?!1:void 0}var h;switch(l){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var f=0;f<n.coordinates.length;f++){var m=n.coordinates[f],p={type:h,coordinates:m};if(t(Am(p,r),i,f)===!1)return!1}})}function e3(e,t){t3(e,function(n,i,r){var s=0;if(n.geometry){var a=n.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var l,h=0,f=0,m=0;if(Cb(n,function(p,g,E,T,P){if(l===void 0||i>h||T>f||P>m){l=p,h=i,f=T,m=P,s=0;return}var x=YR([l,p],n.properties);if(t(x,i,r,P,s)===!1)return!1;s++,l=p})===!1)return!1}}})}function n3(e,t,n){var i=n,r=!1;return e3(e,function(s,a,l,h,f){r===!1&&n===void 0?i=s:i=t(i,s,a,l,h,f),r=!0}),i}function y_(e){return JR(e,(t,n)=>t+i3(n),0)}function i3(e){let t=0,n;switch(e.type){case"Polygon":return Uy(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=Uy(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Uy(e){let t=0;if(e&&e.length>0){t+=Math.abs(zy(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(zy(e[n]))}return t}var r3=Pn*Pn/2,bd=Math.PI/180;function zy(e){const t=e.length-1;if(t<=2)return 0;let n=0,i=0;for(;i<t;){const r=e[i],s=e[i+1===t?0:i+1],a=e[i+2>=t?(i+2)%t:i+2],l=r[0]*bd,h=s[1]*bd,f=a[0]*bd;n+=(f-l)*Math.sin(h),i++}return n*r3}function w_(e,t={}){return n3(e,(n,i)=>{const r=i.geometry.coordinates;return n+XR(r[0],r[1],t)},0)}function s3(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var to=1,eo=2,la=3,o3=4,Lm=5,By=6378137,a3=6356752314e-3,$y=.0066943799901413165,jl=484813681109536e-20,nt=Math.PI/2,l3=.16666666666666666,c3=.04722222222222222,h3=.022156084656084655,gt=1e-10,en=.017453292519943295,Ni=57.29577951308232,ae=Math.PI/4,_c=Math.PI*2,Ne=3.14159265359,Vn={};Vn.greenwich=0;Vn.lisbon=-9.131906111111;Vn.paris=2.337229166667;Vn.bogota=-74.080916666667;Vn.madrid=-3.687938888889;Vn.rome=12.452333333333;Vn.bern=7.439583333333;Vn.jakarta=106.807719444444;Vn.ferro=-17.666666666667;Vn.brussels=4.367975;Vn.stockholm=18.058277777778;Vn.athens=23.7163375;Vn.oslo=10.722916666667;const u3={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var jy=/[\s_\-\/\(\)]/g;function ds(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(jy,""),r=-1,s,a;++r<n.length;)if(s=n[r],a=s.toLowerCase().replace(jy,""),a===i)return e[s]}function xm(e){var t={},n=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,h){var f=h.split("=");return f.push(!0),l[f[0].toLowerCase()]=f[1],l},{}),i,r,s,a={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*en},lat_1:function(l){t.lat1=l*en},lat_2:function(l){t.lat2=l*en},lat_ts:function(l){t.lat_ts=l*en},lon_0:function(l){t.long0=l*en},lon_1:function(l){t.long1=l*en},lon_2:function(l){t.long2=l*en},alpha:function(l){t.alpha=parseFloat(l)*en},gamma:function(l){t.rectified_grid_angle=parseFloat(l)*en},lonc:function(l){t.longc=l*en},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r:function(l){t.a=t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(h){return parseFloat(h)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var h=ds(u3,l);h&&(t.to_meter=h.to_meter)},from_greenwich:function(l){t.from_greenwich=l*en},pm:function(l){var h=ds(Vn,l);t.from_greenwich=(h||parseFloat(l))*en},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var h="ewnsud";l.length===3&&h.indexOf(l.substr(0,1))!==-1&&h.indexOf(l.substr(1,1))!==-1&&h.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(i in n)r=n[i],i in a?(s=a[i],typeof s=="function"?s(r):t[s]=r):t[i]=r;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}class Rb{static getId(t){const n=t.find(i=>Array.isArray(i)&&i[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(t,n="unit"){if(!t||t.length<3)return{type:n,name:"unknown",conversion_factor:null};const i=t[1],r=parseFloat(t[2])||null,s=t.find(l=>Array.isArray(l)&&l[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:i,conversion_factor:r,id:a}}static convertAxis(t){const n=t[1]||"Unknown";let i;const r=n.match(/^\((.)\)$/);if(r){const f=r[1].toUpperCase();if(f==="E")i="east";else if(f==="N")i="north";else if(f==="U")i="up";else throw new Error(`Unknown axis abbreviation: ${f}`)}else i=t[2]?t[2].toLowerCase():"unknown";const s=t.find(f=>Array.isArray(f)&&f[0]==="ORDER"),a=s?parseInt(s[1],10):null,l=t.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT")),h=this.convertUnit(l);return{name:n,direction:i,unit:h,order:a}}static extractAxes(t){return t.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,i)=>(n.order||0)-(i.order||0))}static convert(t,n={}){switch(t[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=t[1],n.base_crs=t.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(t.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,n.conversion=t.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(t.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const i=t.find(g=>Array.isArray(g)&&g[0]==="CS");i&&(n.coordinate_system={type:i[1],axis:this.extractAxes(t)});const r=t.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(r){const g=this.convertUnit(r);n.coordinate_system.unit=g}n.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=t[1];const s=t.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=g:n.datum=g;const E=t.find(T=>Array.isArray(T)&&T[0]==="PRIMEM");E&&E[1]!=="Greenwich"&&(g.prime_meridian={name:E[1],longitude:parseFloat(E[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},n.id=this.getId(t);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=t[1],n.ellipsoid=t.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(t.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=t[1],n.members=t.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=t.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(n.accuracy=parseFloat(a[1]));const l=t.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");l&&(n.ellipsoid=this.convert(l)),n.id=this.getId(t);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=t[1],n.semi_major_axis=parseFloat(t[2]),n.inverse_flattening=parseFloat(t[3]),t.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(t.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=t[1],n.method=t.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(t.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,n.parameters=t.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":n.type="Method",n.name=t[1],n.id=this.getId(t);break;case"PARAMETER":n.type="Parameter",n.name=t[1],n.value=parseFloat(t[2]),n.unit=this.convertUnit(t.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),n.id=this.getId(t);break;case"BOUNDCRS":n.type="BoundCRS";const h=t.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(h){const g=h.find(E=>Array.isArray(E));n.source_crs=g?this.convert(g):null}const f=t.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(f){const g=f.find(E=>Array.isArray(E));n.target_crs=g?this.convert(g):null}const m=t.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");m?n.transformation=this.convert(m):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=t[1],n.method=t.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(t.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,n.parameters=t.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const g=n.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}n.id=this.getId(t);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const p=this.convertUnit(t,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=p)}),p.conversion_factor&&p.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:p});break;default:n.keyword=t[0];break}return n}}class f3 extends Rb{static convert(t,n={}){return super.convert(t,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class d3 extends Rb{static convert(t,n={}){super.convert(t,n);const i=t.find(s=>Array.isArray(s)&&s[0]==="CS");i&&(n.coordinate_system={subtype:i[1],axis:this.extractAxes(t)});const r=t.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(r){const s=r.find(h=>Array.isArray(h)&&h[0]==="SCOPE"),a=r.find(h=>Array.isArray(h)&&h[0]==="AREA"),l=r.find(h=>Array.isArray(h)&&h[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),a&&(n.usage.area=a[1]),l&&(n.usage.bbox=l.slice(1))}return n}}function m3(e){return e.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(e.find(t=>Array.isArray(t)&&t[0]==="CS")||e[0]==="BOUNDCRS"||e[0]==="PROJCRS"||e[0]==="GEOGCRS","2015")}function p3(e){return(m3(e)==="2019"?d3:f3).convert(e)}function _3(e){const t=e.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var gc=1,Ob=2,Nb=3,zu=4,Db=5,E_=-1,g3=/\s/,v3=/[A-Za-z]/,y3=/[A-Za-z84_]/,Df=/[,\]]/,Vb=/[\d\.E\-\+]/;function Mr(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=gc}Mr.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==zu)for(;g3.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case gc:return this.neutral(e);case Ob:return this.keyword(e);case zu:return this.quoted(e);case Db:return this.afterquote(e);case Nb:return this.number(e);case E_:return}};Mr.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=zu;return}if(Df.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Mr.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=gc;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=gc,this.currentObject=this.stack.pop(),this.currentObject||(this.state=E_);return}};Mr.prototype.number=function(e){if(Vb.test(e)){this.word+=e;return}if(Df.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Mr.prototype.quoted=function(e){if(e==='"'){this.state=Db;return}this.word+=e};Mr.prototype.keyword=function(e){if(y3.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=gc;return}if(Df.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Mr.prototype.neutral=function(e){if(v3.test(e)){this.word=e,this.state=Ob;return}if(e==='"'){this.word="",this.state=zu;return}if(Vb.test(e)){this.word=e,this.state=Nb;return}if(Df.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Mr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===E_)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function w3(e){var t=new Mr(e);return t.output()}function Td(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,r=n.reduce(function(s,a){return qo(a,s),s},i);t&&(e[t]=r)}function qo(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},qo(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&qo(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&qo(e[3],t[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Td(t,n,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Td(t,n,e),t[n].type=n;return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return qo(e,t[n]);return Td(t,n,e)}}var E3=.017453292519943295;function mi(e){return e*E3}function Fb(e){const t=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(e.lat0=mi(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(e.lat_ts=e.lat0,e.lat0=mi(e.lat0>0?90:-90),delete e.lat1)}function qy(e){let t={units:null,to_meter:void 0};return typeof e=="string"?(t.units=e.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function Hy(e){return typeof e=="object"?e.value*e.unit.conversion_factor:e}function Wy(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=Hy(e.ellipsoid.semi_major_axis),e.ellipsoid.inverse_flattening!==void 0?t.rf=e.ellipsoid.inverse_flattening:e.ellipsoid.semi_major_axis!==void 0&&e.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-Hy(e.ellipsoid.semi_minor_axis))))}function Bu(e,t={}){return!e||typeof e!="object"?e:e.type==="BoundCRS"?(Bu(e.source_crs,t),e.transformation&&(e.transformation.method&&e.transformation.method.name==="NTv2"?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map(n=>n.value)),t):(Object.keys(e).forEach(n=>{const i=e[n];if(i!==null)switch(n){case"name":if(t.srsCode)break;t.name=i,t.srsCode=i;break;case"type":i==="GeographicCRS"?t.projName="longlat":i==="ProjectedCRS"&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(t.ellps=i.ellipsoid.name,Wy(i,t)),i.prime_meridian&&(t.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=i.name,Wy(i,t);break;case"prime_meridian":t.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis){if(t.axis=i.axis.map(r=>{const s=r.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",i.unit){const{units:r,to_meter:s}=qy(i.unit);t.units=r,t.to_meter=s}else if(i.axis[0]&&i.axis[0].unit){const{units:r,to_meter:s}=qy(i.axis[0].unit);t.units=r,t.to_meter=s}}break;case"id":i.authority&&i.code&&(t.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(t.projName=i.method.name),i.parameters&&i.parameters.forEach(r=>{const s=r.name.toLowerCase().replace(/\s+/g,"_"),a=r.value;r.unit&&r.unit.conversion_factor?t[s]=a*r.unit.conversion_factor:r.unit==="degree"?t[s]=a*Math.PI/180:t[s]=a});break;case"unit":i.name&&(t.units=i.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),i.conversion_factor&&(t.to_meter=i.conversion_factor);break;case"base_crs":Bu(i,t),t.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),Fb(t),t)}var b3=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function T3(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function Gb(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;++n){var r=t[n];b3.indexOf(r)!==-1&&P3(e[r]),typeof e[r]=="object"&&Gb(e[r])}}function P3(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",i=0,r=e.AXIS.length;i<r;++i){var s=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;e.type==="GEOGCS"&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=mi(e.rectified_grid_angle));function l(m){var p=e.to_meter||1;return m*p}var h=function(m){return T3(e,m)},f=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",mi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",mi],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",mi],["lat0","latitude_of_origin",mi],["lat0","standard_parallel_1",mi],["lat1","standard_parallel_1",mi],["lat2","standard_parallel_2",mi],["azimuth","Azimuth"],["alpha","azimuth",mi],["srsCode","name"]];f.forEach(h),Fb(e)}function Cm(e){if(typeof e=="object")return Bu(e);const t=_3(e);var n=w3(e);if(t==="WKT2"){const s=p3(n);return Bu(s)}var i=n[0],r={};return qo(n,r),Gb(r),r[i]}function In(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?In[e]=xm(arguments[1]):In[e]=Cm(arguments[1]):In[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){return Array.isArray(i)?In.apply(t,i):In(i)});if(typeof e=="string"){if(e in In)return In[e]}else"EPSG"in e?In["EPSG:"+e.EPSG]=e:"ESRI"in e?In["ESRI:"+e.ESRI]=e:"IAU2000"in e?In["IAU2000:"+e.IAU2000]=e:console.log(e);return}}s3(In);function S3(e){return typeof e=="string"}function I3(e){return e in In}function M3(e){return e.indexOf("+")!==0&&e.indexOf("[")!==-1||typeof e=="object"&&!("srsCode"in e)}var A3=["3857","900913","3785","102113"];function L3(e){var t=ds(e,"authority");if(t){var n=ds(t,"epsg");return n&&A3.indexOf(n)>-1}}function x3(e){var t=ds(e,"extension");if(t)return ds(t,"proj4")}function C3(e){return e[0]==="+"}function k3(e){if(S3(e)){if(I3(e))return In[e];if(M3(e)){var t=Cm(e);if(L3(t))return In["EPSG:3857"];var n=x3(t);return n?xm(n):t}if(C3(e))return xm(e)}else return"projName"in e?e:Cm(e)}function Ky(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function Hi(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function Vc(e){return e<0?-1:1}function vt(e){return Math.abs(e)<=Ne?e:e-Vc(e)*_c}function yi(e,t,n){var i=e*n,r=.5*e;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(nt-t))/i}function vc(e,t){for(var n=.5*e,i,r,s=nt-2*Math.atan(t),a=0;a<=15;a++)if(i=e*Math.sin(s),r=nt-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function R3(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Hi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function O3(e){var t=e.x,n=e.y;if(n*Ni>90&&n*Ni<-90&&t*Ni>180&&t*Ni<-180)return null;var i,r;if(Math.abs(Math.abs(n)-nt)<=gt)return null;if(this.sphere)i=this.x0+this.a*this.k0*vt(t-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(ae+.5*n));else{var s=Math.sin(n),a=yi(this.e,n,s);i=this.x0+this.a*this.k0*vt(t-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return e.x=i,e.y=r,e}function N3(e){var t=e.x-this.x0,n=e.y-this.y0,i,r;if(this.sphere)r=nt-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(r=vc(this.e,s),r===-9999)return null}return i=vt(this.long0+t/(this.a*this.k0)),e.x=i,e.y=r,e}var D3=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const V3={init:R3,forward:O3,inverse:N3,names:D3};function F3(){}function Zy(e){return e}var G3=["longlat","identity"];const U3={init:F3,forward:Zy,inverse:Zy,names:G3};var z3=[V3,U3],Gs={},Ho=[];function Ub(e,t){var n=Ho.length;return e.names?(Ho[n]=e,e.names.forEach(function(i){Gs[i.toLowerCase()]=n}),this):(console.log(t),!0)}function zb(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function B3(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Gs[t]<"u"&&Ho[Gs[t]]||(t=zb(t),t in Gs&&Ho[Gs[t]]))return Ho[Gs[t]]}function $3(){z3.forEach(Ub)}const j3={start:$3,add:Ub,get:B3};var Bb={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const q3=Bb.WGS84;function H3(e,t,n,i){var r=e*e,s=t*t,a=(r-s)/r,l=0;i?(e*=1-a*(l3+a*(c3+a*h3)),r=e*e,a=0):l=Math.sqrt(a);var h=(r-s)/s;return{es:a,e:l,ep2:h}}function W3(e,t,n,i,r){if(!e){var s=ds(Bb,i);s||(s=q3),e=s.a,t=s.b,n=s.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<gt)&&(r=!0,t=e),{a:e,b:t,rf:n,sphere:r}}var tu={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var K3 in tu){var Pd=tu[K3];Pd.datumName&&(tu[Pd.datumName]=Pd)}function Z3(e,t,n,i,r,s,a){var l={};return e===void 0||e==="none"?l.datum_type=Lm:l.datum_type=o3,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=to),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=eo,l.datum_params[3]*=jl,l.datum_params[4]*=jl,l.datum_params[5]*=jl,l.datum_params[6]=l.datum_params[6]/1e6+1)),a&&(l.datum_type=la,l.grids=a),l.a=n,l.b=i,l.es=r,l.ep2=s,l}var b_={};function Y3(e,t,n){return t instanceof ArrayBuffer?Q3(e,t,n):{ready:X3(e,t)}}function Q3(e,t,n){var i=!0;n!==void 0&&n.includeErrorFields===!1&&(i=!1);var r=new DataView(t),s=e6(r),a=n6(r,s),l=i6(r,a,s,i),h={header:a,subgrids:l};return b_[e]=h,h}async function X3(e,t){for(var n=[],i=await t.getImageCount(),r=i-1;r>=0;r--){var s=await t.getImage(r),a=await s.readRasters(),l=a,h=[s.getWidth(),s.getHeight()],f=s.getBoundingBox().map(Yy),m=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Yy),p=f[0]+(h[0]-1)*m[0],g=f[3]-(h[1]-1)*m[1],E=l[0],T=l[1],P=[];for(let V=h[1]-1;V>=0;V--)for(let U=h[0]-1;U>=0;U--){var x=V*h[0]+U;P.push([-Yr(T[x]),Yr(E[x])])}n.push({del:m,lim:h,ll:[-p,g],cvs:P})}var O={header:{nSubgrids:i},subgrids:n};return b_[e]=O,O}function J3(e){if(e===void 0)return null;var t=e.split(",");return t.map(t6)}function t6(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:b_[e]||null,isNull:!1}}function Yy(e){return e*Math.PI/180}function Yr(e){return e/3600*Math.PI/180}function e6(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function n6(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:km(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function km(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function i6(e,t,n,i){for(var r=176,s=[],a=0;a<t.nSubgrids;a++){var l=s6(e,r,n),h=o6(e,r,l,n,i),f=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),m=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);s.push({ll:[Yr(l.lowerLongitude),Yr(l.lowerLatitude)],del:[Yr(l.longitudeInterval),Yr(l.latitudeInterval)],lim:[f,m],count:l.gridNodeCount,cvs:r6(h)});var p=16;i===!1&&(p=8),r+=176+l.gridNodeCount*p}return s}function r6(e){return e.map(function(t){return[Yr(t.longitudeShift),Yr(t.latitudeShift)]})}function s6(e,t,n){return{name:km(e,t+8,t+16).trim(),parent:km(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function o6(e,t,n,i,r){var s=t+176,a=16;r===!1&&(a=8);for(var l=[],h=0;h<n.gridNodeCount;h++){var f={latitudeShift:e.getFloat32(s+h*a,i),longitudeShift:e.getFloat32(s+h*a+4,i)};r!==!1&&(f.latitudeAccuracy=e.getFloat32(s+h*a+8,i),f.longitudeAccuracy=e.getFloat32(s+h*a+12,i)),l.push(f)}return l}function wi(e,t){if(!(this instanceof wi))return new wi(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(f){if(f)throw f};var n=k3(e);if(typeof n!="object"){t("Could not parse to valid json: "+e);return}var i=wi.projections.get(n.projName);if(!i){t("Could not get projection name from: "+e);return}if(n.datumCode&&n.datumCode!=="none"){var r=ds(tu,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=W3(n.a,n.b,n.rf,n.ellps,n.sphere),a=H3(s.a,s.b,s.rf,n.R_A),l=J3(n.nadgrids),h=n.datum||Z3(n.datumCode,n.datum_params,s.a,s.b,a.es,a.ep2,l);Ky(this,n),Ky(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=h,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}wi.projections=j3;wi.projections.start();function a6(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===to?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===eo?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function $b(e,t,n){var i=e.x,r=e.y,s=e.z?e.z:0,a,l,h,f;if(r<-nt&&r>-1.001*nt)r=-nt;else if(r>nt&&r<1.001*nt)r=nt;else{if(r<-nt)return{x:-1/0,y:-1/0,z:e.z};if(r>nt)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),l=Math.sin(r),f=Math.cos(r),h=l*l,a=n/Math.sqrt(1-t*h),{x:(a+s)*f*Math.cos(i),y:(a+s)*f*Math.sin(i),z:(a*(1-t)+s)*l}}function jb(e,t,n,i){var r=1e-12,s=r*r,a=30,l,h,f,m,p,g,E,T,P,x,O,V,U,q=e.x,J=e.y,at=e.z?e.z:0,k,I,M;if(l=Math.sqrt(q*q+J*J),h=Math.sqrt(q*q+J*J+at*at),l/n<r){if(k=0,h/n<r)return I=nt,M=-i,{x:e.x,y:e.y,z:e.z}}else k=Math.atan2(J,q);f=at/h,m=l/h,p=1/Math.sqrt(1-t*(2-t)*m*m),T=m*(1-t)*p,P=f*p,U=0;do U++,E=n/Math.sqrt(1-t*P*P),M=l*T+at*P-E*(1-t*P*P),g=t*E/(E+M),p=1/Math.sqrt(1-g*(2-g)*m*m),x=m*(1-g)*p,O=f*p,V=O*T-x*P,T=x,P=O;while(V*V>s&&U<a);return I=Math.atan(O/Math.abs(x)),{x:k,y:I,z:M}}function l6(e,t,n){if(t===to)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===eo){var i=n[0],r=n[1],s=n[2],a=n[3],l=n[4],h=n[5],f=n[6];return{x:f*(e.x-h*e.y+l*e.z)+i,y:f*(h*e.x+e.y-a*e.z)+r,z:f*(-l*e.x+a*e.y+e.z)+s}}}function c6(e,t,n){if(t===to)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===eo){var i=n[0],r=n[1],s=n[2],a=n[3],l=n[4],h=n[5],f=n[6],m=(e.x-i)/f,p=(e.y-r)/f,g=(e.z-s)/f;return{x:m+h*p-l*g,y:-h*m+p+a*g,z:l*m-a*p+g}}}function Rh(e){return e===to||e===eo}function h6(e,t,n){if(a6(e,t)||e.datum_type===Lm||t.datum_type===Lm)return n;var i=e.a,r=e.es;if(e.datum_type===la){var s=Qy(e,!1,n);if(s!==0)return;i=By,r=$y}var a=t.a,l=t.b,h=t.es;if(t.datum_type===la&&(a=By,l=a3,h=$y),r===h&&i===a&&!Rh(e.datum_type)&&!Rh(t.datum_type))return n;if(n=$b(n,r,i),Rh(e.datum_type)&&(n=l6(n,e.datum_type,e.datum_params)),Rh(t.datum_type)&&(n=c6(n,t.datum_type,t.datum_params)),n=jb(n,h,a,l),t.datum_type===la){var f=Qy(t,!0,n);if(f!==0)return}return n}function Qy(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},s=[];t:for(var a=0;a<e.grids.length;a++){var l=e.grids[a];if(s.push(l.name),l.isNull){r=i;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var h=l.grid.subgrids,f=0,m=h.length;f<m;f++){var p=h[f],g=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,E=p.ll[0]-g,T=p.ll[1]-g,P=p.ll[0]+(p.lim[0]-1)*p.del[0]+g,x=p.ll[1]+(p.lim[1]-1)*p.del[1]+g;if(!(T>i.y||E>i.x||x<i.y||P<i.x)&&(r=u6(i,t,p),!isNaN(r.x)))break t}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Ni+" "+i.y*Ni+" tried: '"+s+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function u6(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var r={x:e.x,y:e.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=vt(r.x-Math.PI)+Math.PI;var s=Xy(r,n);if(t){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var a=9,l=1e-12,h,f;do{if(f=Xy(s,n),isNaN(f.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:r.x-(f.x+s.x),y:r.y-(f.y+s.y)},s.x+=h.x,s.y+=h.y}while(a--&&Math.abs(h.x)>l&&Math.abs(h.y)>l);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=vt(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=e.x+s.x,i.y=e.y+s.y);return i}function Xy(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},r={x:n.x-1*i.x,y:n.y-1*i.y},s={x:Number.NaN,y:Number.NaN},a;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return s;a=i.y*t.lim[0]+i.x;var l={x:t.cvs[a][0],y:t.cvs[a][1]};a++;var h={x:t.cvs[a][0],y:t.cvs[a][1]};a+=t.lim[0];var f={x:t.cvs[a][0],y:t.cvs[a][1]};a--;var m={x:t.cvs[a][0],y:t.cvs[a][1]},p=r.x*r.y,g=r.x*(1-r.y),E=(1-r.x)*(1-r.y),T=(1-r.x)*r.y;return s.x=E*l.x+g*h.x+T*m.x+p*f.x,s.y=E*l.y+g*h.y+T*m.y+p*f.y,s}function Jy(e,t,n){var i=n.x,r=n.y,s=n.z||0,a,l,h,f={};for(h=0;h<3;h++)if(!(t&&h===2&&n.z===void 0))switch(h===0?(a=i,"ew".indexOf(e.axis[h])!==-1?l="x":l="y"):h===1?(a=r,"ns".indexOf(e.axis[h])!==-1?l="y":l="x"):(a=s,l="z"),e.axis[h]){case"e":f[l]=a;break;case"w":f[l]=-a;break;case"n":f[l]=a;break;case"s":f[l]=-a;break;case"u":n[l]!==void 0&&(f.z=a);break;case"d":n[l]!==void 0&&(f.z=-a);break;default:return null}return f}function qb(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function f6(e){t0(e.x),t0(e.y)}function t0(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function d6(e,t){return(e.datum.datum_type===to||e.datum.datum_type===eo||e.datum.datum_type===la)&&t.datumCode!=="WGS84"||(t.datum.datum_type===to||t.datum.datum_type===eo||t.datum.datum_type===la)&&e.datumCode!=="WGS84"}function $u(e,t,n,i){var r;Array.isArray(n)?n=qb(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(f6(n),e.datum&&t.datum&&d6(e,t)&&(r=new wi("WGS84"),n=$u(e,r,n,i),e=r),i&&e.axis!=="enu"&&(n=Jy(e,!1,n)),e.projName==="longlat")n={x:n.x*en,y:n.y*en,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=h6(e.datum,t.datum,n),!!n)return n=n,t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*Ni,y:n.y*Ni,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?Jy(t,!0,n):(n&&!s&&delete n.z,n)}var e0=wi("WGS84");function Sd(e,t,n,i){var r,s,a;return Array.isArray(n)?(r=$u(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(n.slice(3)):[r.x,r.y,n[2]].concat(n.slice(3)):[r.x,r.y].concat(n.slice(2)):[r.x,r.y]):(s=$u(e,t,n,i),a=Object.keys(n),a.length===2||a.forEach(function(l){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=n[l]}),s)}function Oh(e){return e instanceof wi?e:typeof e=="object"&&"oProj"in e?e.oProj:wi(e)}function m6(e,t,n){var i,r,s=!1,a;return typeof t>"u"?(r=Oh(e),i=e0,s=!0):(typeof t.x<"u"||Array.isArray(t))&&(n=t,r=Oh(e),i=e0,s=!0),i||(i=Oh(e)),r||(r=Oh(t)),n?Sd(i,r,n):(a={forward:function(l,h){return Sd(i,r,l,h)},inverse:function(l,h){return Sd(r,i,l,h)}},s&&(a.oProj=r),a)}var n0=6,Hb="AJSAJS",Wb="AFAFAF",Wo=65,kn=73,ti=79,Tl=86,Pl=90;const p6={forward:Kb,inverse:_6,toPoint:Zb};function Kb(e,t){return t=t||5,y6(g6({lat:e[1],lon:e[0]}),t)}function _6(e){var t=T_(Qb(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Zb(e){var t=T_(Qb(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Id(e){return e*(Math.PI/180)}function i0(e){return 180*(e/Math.PI)}function g6(e){var t=e.lat,n=e.lon,i=6378137,r=.00669438,s=.9996,a,l,h,f,m,p,g,E=Id(t),T=Id(n),P,x;x=Math.floor((n+180)/6)+1,n===180&&(x=60),t>=56&&t<64&&n>=3&&n<12&&(x=32),t>=72&&t<84&&(n>=0&&n<9?x=31:n>=9&&n<21?x=33:n>=21&&n<33?x=35:n>=33&&n<42&&(x=37)),a=(x-1)*6-180+3,P=Id(a),l=r/(1-r),h=i/Math.sqrt(1-r*Math.sin(E)*Math.sin(E)),f=Math.tan(E)*Math.tan(E),m=l*Math.cos(E)*Math.cos(E),p=Math.cos(E)*(T-P),g=i*((1-r/4-3*r*r/64-5*r*r*r/256)*E-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*E)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*E)-35*r*r*r/3072*Math.sin(6*E));var O=s*h*(p+(1-f+m)*p*p*p/6+(5-18*f+f*f+72*m-58*l)*p*p*p*p*p/120)+5e5,V=s*(g+h*Math.tan(E)*(p*p/2+(5-f+9*m+4*m*m)*p*p*p*p/24+(61-58*f+f*f+600*m-330*l)*p*p*p*p*p*p/720));return t<0&&(V+=1e7),{northing:Math.round(V),easting:Math.round(O),zoneNumber:x,zoneLetter:v6(t)}}function T_(e){var t=e.northing,n=e.easting,i=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var s=.9996,a=6378137,l=.00669438,h,f=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),m,p,g,E,T,P,x,O,V,U=n-5e5,q=t;i<"N"&&(q-=1e7),x=(r-1)*6-180+3,h=l/(1-l),P=q/s,O=P/(a*(1-l/4-3*l*l/64-5*l*l*l/256)),V=O+(3*f/2-27*f*f*f/32)*Math.sin(2*O)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*O)+151*f*f*f/96*Math.sin(6*O),m=a/Math.sqrt(1-l*Math.sin(V)*Math.sin(V)),p=Math.tan(V)*Math.tan(V),g=h*Math.cos(V)*Math.cos(V),E=a*(1-l)/Math.pow(1-l*Math.sin(V)*Math.sin(V),1.5),T=U/(m*s);var J=V-m*Math.tan(V)/E*(T*T/2-(5+3*p+10*g-4*g*g-9*h)*T*T*T*T/24+(61+90*p+298*g+45*p*p-252*h-3*g*g)*T*T*T*T*T*T/720);J=i0(J);var at=(T-(1+2*p+g)*T*T*T/6+(5-2*g+28*p-3*g*g+8*h+24*p*p)*T*T*T*T*T/120)/Math.cos(V);at=x+i0(at);var k;if(e.accuracy){var I=T_({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});k={top:I.lat,right:I.lon,bottom:J,left:at}}else k={lat:J,lon:at};return k}function v6(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function y6(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+w6(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function w6(e,t,n){var i=Yb(n),r=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return E6(r,s,i)}function Yb(e){var t=e%n0;return t===0&&(t=n0),t}function E6(e,t,n){var i=n-1,r=Hb.charCodeAt(i),s=Wb.charCodeAt(i),a=r+e-1,l=s+t,h=!1;a>Pl&&(a=a-Pl+Wo-1,h=!0),(a===kn||r<kn&&a>kn||(a>kn||r<kn)&&h)&&a++,(a===ti||r<ti&&a>ti||(a>ti||r<ti)&&h)&&(a++,a===kn&&a++),a>Pl&&(a=a-Pl+Wo-1),l>Tl?(l=l-Tl+Wo-1,h=!0):h=!1,(l===kn||s<kn&&l>kn||(l>kn||s<kn)&&h)&&l++,(l===ti||s<ti&&l>ti||(l>ti||s<ti)&&h)&&(l++,l===kn&&l++),l>Tl&&(l=l-Tl+Wo-1);var f=String.fromCharCode(a)+String.fromCharCode(l);return f}function Qb(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",r,s=0;!/[A-Z]/.test(r=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;i+=r,s++}var a=parseInt(i,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;n=e.substring(s,s+=2);for(var h=Yb(a),f=b6(n.charAt(0),h),m=T6(n.charAt(1),h);m<P6(l);)m+=2e6;var p=t-s;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var g=p/2,E=0,T=0,P,x,O,V,U;return g>0&&(P=1e5/Math.pow(10,g),x=e.substring(s,s+g),E=parseFloat(x)*P,O=e.substring(s+g),T=parseFloat(O)*P),V=E+f,U=T+m,{easting:V,northing:U,zoneLetter:l,zoneNumber:a,accuracy:P}}function b6(e,t){for(var n=Hb.charCodeAt(t-1),i=1e5,r=!1;n!==e.charCodeAt(0);){if(n++,n===kn&&n++,n===ti&&n++,n>Pl){if(r)throw"Bad character: "+e;n=Wo,r=!0}i+=1e5}return i}function T6(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=Wb.charCodeAt(t-1),i=0,r=!1;n!==e.charCodeAt(0);){if(n++,n===kn&&n++,n===ti&&n++,n>Tl){if(r)throw"Bad character: "+e;n=Wo,r=!0}i+=1e5}return i}function P6(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function ba(e,t,n){if(!(this instanceof ba))return new ba(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ba.fromMGRS=function(e){return new ba(Zb(e))};ba.prototype.toMGRS=function(e){return Kb([this.x,this.y],e)};var S6=1,I6=.25,r0=.046875,s0=.01953125,o0=.01068115234375,M6=.75,A6=.46875,L6=.013020833333333334,x6=.007120768229166667,C6=.3645833333333333,k6=.005696614583333333,R6=.3076171875;function P_(e){var t=[];t[0]=S6-e*(I6+e*(r0+e*(s0+e*o0))),t[1]=e*(M6-e*(r0+e*(s0+e*o0)));var n=e*e;return t[2]=n*(A6-e*(L6+e*x6)),n*=e,t[3]=n*(C6-e*k6),t[4]=n*e*R6,t}function Ca(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var O6=20;function S_(e,t,n){for(var i=1/(1-t),r=e,s=O6;s;--s){var a=Math.sin(r),l=1-t*a*a;if(l=(Ca(r,a,Math.cos(r),n)-e)*(l*Math.sqrt(l))*i,r-=l,Math.abs(l)<gt)return r}return r}function N6(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=P_(this.es),this.ml0=Ca(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function D6(e){var t=e.x,n=e.y,i=vt(t-this.long0),r,s,a,l=Math.sin(n),h=Math.cos(n);if(this.es){var m=h*i,p=Math.pow(m,2),g=this.ep2*Math.pow(h,2),E=Math.pow(g,2),T=Math.abs(h)>gt?Math.tan(n):0,P=Math.pow(T,2),x=Math.pow(P,2);r=1-this.es*Math.pow(l,2),m=m/Math.sqrt(r);var O=Ca(n,l,h,this.en);s=this.a*(this.k0*m*(1+p/6*(1-P+g+p/20*(5-18*P+x+14*g-58*P*g+p/42*(61+179*x-x*P-479*P)))))+this.x0,a=this.a*(this.k0*(O-this.ml0+l*i*m/2*(1+p/12*(5-P+9*g+4*E+p/30*(61+x-58*P+270*g-330*P*g+p/56*(1385+543*x-x*P-3111*P))))))+this.y0}else{var f=h*Math.sin(i);if(Math.abs(Math.abs(f)-1)<gt)return 93;if(s=.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,a=h*Math.cos(i)/Math.sqrt(1-Math.pow(f,2)),f=Math.abs(a),f>=1){if(f-1>gt)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return e.x=s,e.y=a,e}function V6(e){var t,n,i,r,s=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=S_(t,this.es,this.en),Math.abs(n)<nt){var p=Math.sin(n),g=Math.cos(n),E=Math.abs(g)>gt?Math.tan(n):0,T=this.ep2*Math.pow(g,2),P=Math.pow(T,2),x=Math.pow(E,2),O=Math.pow(x,2);t=1-this.es*Math.pow(p,2);var V=s*Math.sqrt(t)/this.k0,U=Math.pow(V,2);t=t*E,i=n-t*U/(1-this.es)*.5*(1-U/12*(5+3*x-9*T*x+T-4*P-U/30*(61+90*x-252*T*x+45*O+46*T-U/56*(1385+3633*x+4095*O+1574*O*x)))),r=vt(this.long0+V*(1-U/6*(1+2*x+T-U/20*(5+28*x+24*O+8*T*x+6*T-U/42*(61+662*x+1320*O+720*O*x))))/g)}else i=nt*Vc(a),r=0;else{var l=Math.exp(s/this.k0),h=.5*(l-1/l),f=this.lat0+a/this.k0,m=Math.cos(f);t=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(h,2))),i=Math.asin(t),a<0&&(i=-i),h===0&&m===0?r=0:r=vt(Math.atan2(h,m)+this.long0)}return e.x=r,e.y=i,e}var F6=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const eu={init:N6,forward:D6,inverse:V6,names:F6};function Xb(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Dn(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function G6(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function U6(e){var t=Math.abs(e);return t=G6(t*(1+t/(Dn(1,t)+1))),e<0?-t:t}function I_(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,r=e[i],s=0,a;--i>=0;)a=-s+n*r+e[i],s=r,r=a;return t+a*Math.sin(2*t)}function z6(e,t){for(var n=2*Math.cos(t),i=e.length-1,r=e[i],s=0,a;--i>=0;)a=-s+n*r+e[i],s=r,r=a;return Math.sin(t)*a}function B6(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Jb(e,t,n){for(var i=Math.sin(t),r=Math.cos(t),s=Xb(n),a=B6(n),l=2*r*a,h=-2*i*s,f=e.length-1,m=e[f],p=0,g=0,E=0,T,P;--f>=0;)T=g,P=p,g=m,p=E,m=-T+l*g-h*p+e[f],E=-P+h*g+l*p;return l=i*a,h=r*s,[l*m-h*E,l*E+h*m]}function $6(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(eu.init.apply(this),this.forward=eu.forward,this.inverse=eu.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=I_(this.cbg,this.lat0);this.Zb=-this.Qn*(i+z6(this.gtu,2*i))}function j6(e){var t=vt(e.x-this.long0),n=e.y;n=I_(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(t),a=Math.cos(t);n=Math.atan2(i,a*r),t=Math.atan2(s*r,Dn(i,r*a)),t=U6(Math.tan(t));var l=Jb(this.gtu,2*n,2*t);n=n+l[0],t=t+l[1];var h,f;return Math.abs(t)<=2.623395162778?(h=this.a*(this.Qn*t)+this.x0,f=this.a*(this.Qn*n+this.Zb)+this.y0):(h=1/0,f=1/0),e.x=h,e.y=f,e}function q6(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,r;if(Math.abs(t)<=2.623395162778){var s=Jb(this.utg,2*n,2*t);n=n+s[0],t=t+s[1],t=Math.atan(Xb(t));var a=Math.sin(n),l=Math.cos(n),h=Math.sin(t),f=Math.cos(t);n=Math.atan2(a*f,Dn(h,f*l)),t=Math.atan2(h,f*l),i=vt(t+this.long0),r=I_(this.cgb,n)}else i=1/0,r=1/0;return e.x=i,e.y=r,e}var H6=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const nu={init:$6,forward:j6,inverse:q6,names:H6};function W6(e,t){if(e===void 0){if(e=Math.floor((vt(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var K6="etmerc";function Z6(){var e=W6(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*en,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,nu.init.apply(this),this.forward=nu.forward,this.inverse=nu.inverse}var Y6=["Universal Transverse Mercator System","utm"];const Q6={init:Z6,names:Y6,dependsOn:K6};function M_(e,t){return Math.pow((1-e)/(1+e),t)}var X6=20;function J6(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ae)/(Math.pow(Math.tan(.5*this.lat0+ae),this.C)*M_(this.e*e,this.ratexp))}function tO(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ae),this.C)*M_(this.e*Math.sin(n),this.ratexp))-nt,e.x=this.C*t,e}function eO(e){for(var t=1e-14,n=e.x/this.C,i=e.y,r=Math.pow(Math.tan(.5*i+ae)/this.K,1/this.C),s=X6;s>0&&(i=2*Math.atan(r*M_(this.e*Math.sin(e.y),-.5*this.e))-nt,!(Math.abs(i-e.y)<t));--s)e.y=i;return s?(e.x=n,e.y=i,e):null}const A_={init:J6,forward:tO,inverse:eO};function nO(){A_.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function iO(e){var t,n,i,r;return e.x=vt(e.x-this.long0),A_.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=r*n*Math.sin(e.x),e.y=r*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function rO(e){var t,n,i,r,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Dn(e.x,e.y)){var a=2*Math.atan2(s,this.R2);t=Math.sin(a),n=Math.cos(a),r=Math.asin(n*this.sinc0+e.y*t*this.cosc0/s),i=Math.atan2(e.x*t,s*this.cosc0*n-e.y*this.sinc0*t)}else r=this.phic0,i=0;return e.x=i,e.y=r,A_.inverse.apply(this,[e]),e.x=vt(e.x+this.long0),e}var sO=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const oO={init:nO,forward:iO,inverse:rO,names:sO};function L_(e,t,n){return t*=n,Math.tan(.5*(nt+e))*Math.pow((1-t)/(1+t),.5*n)}function aO(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gt&&(this.k0=.5*(1+Vc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=gt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gt&&Math.abs(Math.cos(this.lat_ts))>gt&&(this.k0=.5*this.cons*Hi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/yi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Hi(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(L_(this.lat0,this.sinlat0,this.e))-nt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function lO(e){var t=e.x,n=e.y,i=Math.sin(n),r=Math.cos(n),s,a,l,h,f,m,p=vt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=gt&&Math.abs(n+this.lat0)<=gt?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(p)),e.x=this.a*s*r*Math.sin(p)+this.x0,e.y=this.a*s*(this.coslat0*i-this.sinlat0*r*Math.cos(p))+this.y0,e):(a=2*Math.atan(L_(n,i,this.e))-nt,h=Math.cos(a),l=Math.sin(a),Math.abs(this.coslat0)<=gt?(f=yi(this.e,n*this.con,this.con*i),m=2*this.a*this.k0*f/this.cons,e.x=this.x0+m*Math.sin(t-this.long0),e.y=this.y0-this.con*m*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<gt?(s=2*this.a*this.k0/(1+h*Math.cos(p)),e.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*h*Math.cos(p))),e.y=s*(this.cosX0*l-this.sinX0*h*Math.cos(p))+this.y0),e.x=s*h*Math.sin(p)+this.x0,e))}function cO(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,r,s,a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,n=this.lat0,a<=gt?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/a),Math.abs(this.coslat0)<gt?this.lat0>0?t=vt(this.long0+Math.atan2(e.x,-1*e.y)):t=vt(this.long0+Math.atan2(e.x,e.y)):t=vt(this.long0+Math.atan2(e.x*Math.sin(l),a*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=gt){if(a<=gt)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=a*this.cons/(2*this.a*this.k0),n=this.con*vc(this.e,i),t=this.con*vt(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=gt?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/a),t=vt(this.long0+Math.atan2(e.x*Math.sin(r),a*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),n=-1*vc(this.e,Math.tan(.5*(nt+s)));return e.x=t,e.y=n,e}var hO=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const uO={init:aO,forward:lO,inverse:cO,names:hO,ssfn_:L_};function fO(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),a=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+e/2)),f=Math.log((1+a*t)/(1-a*t));this.K=l-this.alpha*h+this.alpha*a/2*f}function dO(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*a+this.x0,e}function mO(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),l=this.lambda0+a/this.alpha,h=0,f=s,m=-1e3,p=0;Math.abs(f-m)>1e-7;){if(++p>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2)),m=f,f=2*Math.atan(Math.exp(h))-Math.PI/2}return e.x=l,e.y=f,e}var pO=["somerc"];const _O={init:fO,forward:dO,inverse:mO,names:pO};var $o=1e-7;function gO(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.projName=="object"?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1||t.indexOf(zb(n))!==-1}function vO(){var e,t,n,i,r,s,a,l,h,f,m=0,p,g=0,E=0,T=0,P=0,x=0,O=0;this.no_off=gO(this),this.no_rot="no_rot"in this;var V=!1;"alpha"in this&&(V=!0);var U=!1;if("rectified_grid_angle"in this&&(U=!0),V&&(O=this.alpha),U&&(m=this.rectified_grid_angle),V||U)g=this.longc;else if(E=this.long1,P=this.lat1,T=this.long2,x=this.lat2,Math.abs(P-x)<=$o||(e=Math.abs(P))<=$o||Math.abs(e-nt)<=$o||Math.abs(Math.abs(this.lat0)-nt)<=$o||Math.abs(Math.abs(x)-nt)<=$o)throw new Error;var q=1-this.es;t=Math.sqrt(q),Math.abs(this.lat0)>gt?(l=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*l*l,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/q),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(yi(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=r=1),V||U?(V?(p=Math.asin(Math.sin(O)/i),U||(m=O)):(p=m,O=Math.asin(i*Math.sin(p))),this.lam0=g-Math.asin(.5*(r-1/r)*Math.tan(p))/this.B):(s=Math.pow(yi(this.e,P,Math.sin(P)),this.B),a=Math.pow(yi(this.e,x,Math.sin(x)),this.B),r=this.E/s,h=(a-s)/(a+s),f=this.E*this.E,f=(f-a*s)/(f+a*s),e=E-T,e<-Math.PI?T-=_c:e>Math.PI&&(T+=_c),this.lam0=vt(.5*(E+T)-Math.atan(f*Math.tan(.5*this.B*(E-T))/h)/this.B),p=Math.atan(2*Math.sin(this.B*vt(E-this.lam0))/(r-1/r)),m=O=Math.asin(i*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(ae-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(ae+r))}function yO(e){var t={},n,i,r,s,a,l,h,f;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-nt)>gt){if(a=this.E/Math.pow(yi(this.e,e.y,Math.sin(e.y)),this.B),l=1/a,n=.5*(a-l),i=.5*(a+l),s=Math.sin(this.B*e.x),r=(n*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(r)-1)<gt)throw new Error;f=.5*this.ArB*Math.log((1-r)/(1+r)),l=Math.cos(this.B*e.x),Math.abs(l)<$o?h=this.A*e.x:h=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,l)}else f=e.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*e.y;return this.no_rot?(t.x=h,t.y=f):(h-=this.u_0,t.x=f*this.cosrot+h*this.sinrot,t.y=h*this.cosrot-f*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function wO(e){var t,n,i,r,s,a,l,h={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),r=.5*(i-1/i),s=.5*(i+1/i),a=Math.sin(this.BrA*t),l=(a*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(l)-1)<gt)h.x=0,h.y=l<0?-nt:nt;else{if(h.y=this.E/Math.sqrt((1+l)/(1-l)),h.y=vc(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return h.x+=this.lam0,h}var EO=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const bO={init:vO,forward:yO,inverse:wO,names:EO};function TO(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<gt)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Hi(this.e,t,n),r=yi(this.e,this.lat1,t),s=Math.sin(this.lat2),a=Math.cos(this.lat2),l=Hi(this.e,s,a),h=yi(this.e,this.lat2,s),f=Math.abs(Math.abs(this.lat0)-nt)<gt?0:yi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>gt?this.ns=Math.log(i/l)/Math.log(r/h):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function PO(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=gt&&(n=Vc(n)*(nt-2*gt));var i=Math.abs(Math.abs(n)-nt),r,s;if(i>gt)r=yi(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(i=n*this.ns,i<=0)return null;s=0}var a=this.ns*vt(t-this.long0);return e.x=this.k0*(s*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,e}function SO(e){var t,n,i,r,s,a=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+l*l),n=1):(t=-Math.sqrt(a*a+l*l),n=-1);var h=0;if(t!==0&&(h=Math.atan2(n*a,n*l)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),r=vc(this.e,i),r===-9999)return null}else r=-nt;return s=vt(h/this.ns+this.long0),e.x=s,e.y=r,e}var IO=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const MO={init:TO,forward:PO,inverse:SO,names:IO};function AO(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function LO(e){var t,n,i,r,s,a,l,h=e.x,f=e.y,m=vt(h-this.long0);return t=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/t)-this.s45),i=-m*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),a=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=l*Math.cos(a)/1,e.x=l*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e}function xO(e){var t,n,i,r,s,a,l,h,f=e.x;e.x=e.y,e.y=f,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(t)),e.x=this.long0-n/this.alfa,l=t,h=0;var m=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(h=1),l=e.y,m+=1;while(h===0&&m<15);return m>=15?null:e}var CO=["Krovak","krovak"];const kO={init:AO,forward:LO,inverse:xO,names:CO};function An(e,t,n,i,r){return e*r-t*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function Fc(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Gc(e){return .375*e*(1+.25*e*(1+.46875*e))}function Uc(e){return .05859375*e*e*(1+.75*e)}function zc(e){return e*e*e*(35/3072)}function x_(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function Ps(e){return Math.abs(e)<nt?e:e-Vc(e)*Math.PI}function ju(e,t,n,i,r){var s,a;s=e/t;for(var l=0;l<15;l++)if(a=(e-(t*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(t-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function RO(){this.sphere||(this.e0=Fc(this.es),this.e1=Gc(this.es),this.e2=Uc(this.es),this.e3=zc(this.es),this.ml0=this.a*An(this.e0,this.e1,this.e2,this.e3,this.lat0))}function OO(e){var t,n,i=e.x,r=e.y;if(i=vt(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),a=Math.cos(r),l=x_(this.a,this.e,s),h=Math.tan(r)*Math.tan(r),f=i*Math.cos(r),m=f*f,p=this.es*a*a/(1-this.es),g=this.a*An(this.e0,this.e1,this.e2,this.e3,r);t=l*f*(1-m*h*(1/6-(8-h+8*p)*m/120)),n=g-this.ml0+l*s/a*m*(.5+(5-h+6*p)*m/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function NO(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,r;if(this.sphere){var s=n+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(t)),r=Math.atan2(Math.tan(t),Math.cos(s))}else{var a=this.ml0/this.a+n,l=ju(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-nt)<=gt)return e.x=this.long0,e.y=nt,n<0&&(e.y*=-1),e;var h=x_(this.a,this.e,Math.sin(l)),f=h*h*h/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(l),2),p=t*this.a/h,g=p*p;i=l-h*Math.tan(l)/f*p*p*(.5-(1+3*m)*p*p/24),r=p*(1-g*(m/3+(1+3*m)*m*g/15))/Math.cos(l)}return e.x=vt(r+this.long0),e.y=Ps(i),e}var DO=["Cassini","Cassini_Soldner","cass"];const VO={init:RO,forward:OO,inverse:NO,names:DO};function is(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var Rm=1,Om=2,Nm=3,iu=4;function FO(){var e=Math.abs(this.lat0);if(Math.abs(e-nt)<gt?this.mode=this.lat0<0?Rm:Om:Math.abs(e)<gt?this.mode=Nm:this.mode=iu,this.es>0){var t;switch(this.qp=is(this.e,1),this.mmf=.5/(1-this.es),this.apa=WO(this.es),this.mode){case Om:this.dd=1;break;case Rm:this.dd=1;break;case Nm:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case iu:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=is(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===iu&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function GO(e){var t,n,i,r,s,a,l,h,f,m,p=e.x,g=e.y;if(p=vt(p-this.long0),this.sphere){if(s=Math.sin(g),m=Math.cos(g),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+m*i:1+this.sinph0*s+this.cosph0*m*i,n<=gt)return null;n=Math.sqrt(2/n),t=n*m*Math.sin(p),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*m*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<gt)return null;n=ae-g*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(p),n*=i}}else{switch(l=0,h=0,f=0,i=Math.cos(p),r=Math.sin(p),s=Math.sin(g),a=is(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=a/this.qp,h=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*h*i;break;case this.EQUIT:f=1+h*i;break;case this.N_POLE:f=nt+g,a=this.qp-a;break;case this.S_POLE:f=g-nt,a=this.qp+a;break}if(Math.abs(f)<gt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),this.mode===this.OBLIQ?n=this.ymf*f*(this.cosb1*l-this.sinb1*h*i):n=(f=Math.sqrt(2/(1+h*i)))*l*this.ymf,t=this.xmf*f*h*r;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(f=Math.sqrt(a))*r,n=i*(this.mode===this.S_POLE?f:-f)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function UO(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,r,s,a,l,h,f;if(this.sphere){var m=0,p,g=0;if(p=Math.sqrt(t*t+n*n),r=p*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(r),m=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=gt?0:Math.asin(n*g/p),t*=g,n=m*p;break;case this.OBLIQ:r=Math.abs(p)<=gt?this.lat0:Math.asin(m*this.sinph0+n*g*this.cosph0/p),t*=g*this.cosph0,n=(m-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:n=-n,r=nt-r;break;case this.S_POLE:r-=nt;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,h=Math.sqrt(t*t+n*n),h<gt)return e.x=this.long0,e.y=this.lat0,e;a=2*Math.asin(.5*h/this.rq),s=Math.cos(a),t*=a=Math.sin(a),this.mode===this.OBLIQ?(f=s*this.sinb1+n*a*this.cosb1/h,l=this.qp*f,n=h*this.cosb1*s-n*this.sinb1*a):(f=n*a/h,l=this.qp*f,n=h*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),l=t*t+n*n,!l)return e.x=this.long0,e.y=this.lat0,e;f=1-l/this.qp,this.mode===this.S_POLE&&(f=-f)}i=Math.atan2(t,n),r=KO(Math.asin(f),this.apa)}return e.x=vt(this.long0+i),e.y=r,e}var zO=.3333333333333333,BO=.17222222222222222,$O=.10257936507936508,jO=.06388888888888888,qO=.0664021164021164,HO=.016415012942191543;function WO(e){var t,n=[];return n[0]=e*zO,t=e*e,n[0]+=t*BO,n[1]=t*jO,t*=e,n[0]+=t*$O,n[1]+=t*qO,n[2]=t*HO,n}function KO(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var ZO=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const YO={init:FO,forward:GO,inverse:UO,names:ZO,S_POLE:Rm,N_POLE:Om,EQUIT:Nm,OBLIQ:iu};function ms(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function QO(){Math.abs(this.lat1+this.lat2)<gt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Hi(this.e3,this.sin_po,this.cos_po),this.qs1=is(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Hi(this.e3,this.sin_po,this.cos_po),this.qs2=is(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=is(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>gt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function XO(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=is(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*vt(t-this.long0),a=r*Math.sin(s)+this.x0,l=this.rh-r*Math.cos(s)+this.y0;return e.x=a,e.y=l,e}function JO(e){var t,n,i,r,s,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),r=0,t!==0&&(r=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),s=vt(r/this.ns0+this.long0),e.x=s,e.y=a,e}function t8(e,t){var n,i,r,s,a,l=ms(.5*t);if(e<gt)return l;for(var h=e*e,f=1;f<=25;f++)if(n=Math.sin(l),i=Math.cos(l),r=e*n,s=1-r*r,a=.5*s*s/i*(t/(1-h)-n/s+.5/e*Math.log((1-r)/(1+r))),l=l+a,Math.abs(a)<=1e-7)return l;return null}var e8=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const n8={init:QO,forward:XO,inverse:JO,names:e8,phi1z:t8};function i8(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function r8(e){var t,n,i,r,s,a,l,h,f=e.x,m=e.y;return i=vt(f-this.long0),t=Math.sin(m),n=Math.cos(m),r=Math.cos(i),a=this.sin_p14*t+this.cos_p14*n*r,s=1,a>0||Math.abs(a)<=gt?(l=this.x0+this.a*s*n*Math.sin(i)/a,h=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*r)/a):(l=this.x0+this.infinity_dist*n*Math.sin(i),h=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*r)),e.x=l,e.y=h,e}function s8(e){var t,n,i,r,s,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(t,this.rc),n=Math.sin(r),i=Math.cos(r),a=ms(i*this.sin_p14+e.y*n*this.cos_p14/t),s=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),s=vt(this.long0+s)):(a=this.phic0,s=0),e.x=s,e.y=a,e}var o8=["gnom"];const a8={init:i8,forward:r8,inverse:s8,names:o8};function l8(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*nt:nt;for(var i=Math.asin(.5*t),r,s,a,l,h=0;h<30;h++)if(s=Math.sin(i),a=Math.cos(i),l=e*s,r=Math.pow(1-l*l,2)/(2*a)*(t/(1-e*e)-s/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function c8(){this.sphere||(this.k0=Hi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function h8(e){var t=e.x,n=e.y,i,r,s=vt(t-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=is(this.e,Math.sin(n));i=this.x0+this.a*this.k0*s,r=this.y0+this.a*a*.5/this.k0}return e.x=i,e.y=r,e}function u8(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=vt(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=l8(this.e,2*e.y*this.k0/this.a),t=vt(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var f8=["cea"];const d8={init:c8,forward:h8,inverse:u8,names:f8};function m8(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function p8(e){var t=e.x,n=e.y,i=vt(t-this.long0),r=Ps(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*r,e}function _8(e){var t=e.x,n=e.y;return e.x=vt(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Ps(this.lat0+(n-this.y0)/this.a),e}var g8=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const v8={init:m8,forward:p8,inverse:_8,names:g8};var a0=20;function y8(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Fc(this.es),this.e1=Gc(this.es),this.e2=Uc(this.es),this.e3=zc(this.es),this.ml0=this.a*An(this.e0,this.e1,this.e2,this.e3,this.lat0)}function w8(e){var t=e.x,n=e.y,i,r,s,a=vt(t-this.long0);if(s=a*Math.sin(n),this.sphere)Math.abs(n)<=gt?(i=this.a*a,r=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(n),r=this.a*(Ps(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=gt)i=this.a*a,r=-1*this.ml0;else{var l=x_(this.a,this.e,Math.sin(n))/Math.tan(n);i=l*Math.sin(s),r=this.a*An(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+l*(1-Math.cos(s))}return e.x=i+this.x0,e.y=r+this.y0,e}function E8(e){var t,n,i,r,s,a,l,h,f;if(i=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=gt)t=vt(i/this.a+this.long0),n=0;else{a=this.lat0+r/this.a,l=i*i/this.a/this.a+a*a,h=a;var m;for(s=a0;s;--s)if(m=Math.tan(h),f=-1*(a*(h*m+1)-h-.5*(h*h+l)*m)/((h-a)/m-1),h+=f,Math.abs(f)<=gt){n=h;break}t=vt(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=gt)n=0,t=vt(this.long0+i/this.a);else{a=(this.ml0+r)/this.a,l=i*i/this.a/this.a+a*a,h=a;var p,g,E,T,P;for(s=a0;s;--s)if(P=this.e*Math.sin(h),p=Math.sqrt(1-P*P)*Math.tan(h),g=this.a*An(this.e0,this.e1,this.e2,this.e3,h),E=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),T=g/this.a,f=(a*(p*T+1)-T-.5*p*(T*T+l))/(this.es*Math.sin(2*h)*(T*T+l-2*a*T)/(4*p)+(a-T)*(p*E-2/Math.sin(2*h))-E),h-=f,Math.abs(f)<=gt){n=h;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=vt(this.long0+Math.asin(i*p/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var b8=["Polyconic","American_Polyconic","poly"];const T8={init:y8,forward:w8,inverse:E8,names:b8};function P8(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function S8(e){var t,n=e.x,i=e.y,r=i-this.lat0,s=n-this.long0,a=r/jl*1e-5,l=s,h=1,f=0;for(t=1;t<=10;t++)h=h*a,f=f+this.A[t]*h;var m=f,p=l,g=1,E=0,T,P,x=0,O=0;for(t=1;t<=6;t++)T=g*m-E*p,P=E*m+g*p,g=T,E=P,x=x+this.B_re[t]*g-this.B_im[t]*E,O=O+this.B_im[t]*g+this.B_re[t]*E;return e.x=O*this.a+this.x0,e.y=x*this.a+this.y0,e}function I8(e){var t,n=e.x,i=e.y,r=n-this.x0,s=i-this.y0,a=s/this.a,l=r/this.a,h=1,f=0,m,p,g=0,E=0;for(t=1;t<=6;t++)m=h*a-f*l,p=f*a+h*l,h=m,f=p,g=g+this.C_re[t]*h-this.C_im[t]*f,E=E+this.C_im[t]*h+this.C_re[t]*f;for(var T=0;T<this.iterations;T++){var P=g,x=E,O,V,U=a,q=l;for(t=2;t<=6;t++)O=P*g-x*E,V=x*g+P*E,P=O,x=V,U=U+(t-1)*(this.B_re[t]*P-this.B_im[t]*x),q=q+(t-1)*(this.B_im[t]*P+this.B_re[t]*x);P=1,x=0;var J=this.B_re[1],at=this.B_im[1];for(t=2;t<=6;t++)O=P*g-x*E,V=x*g+P*E,P=O,x=V,J=J+t*(this.B_re[t]*P-this.B_im[t]*x),at=at+t*(this.B_im[t]*P+this.B_re[t]*x);var k=J*J+at*at;g=(U*J+q*at)/k,E=(q*J-U*at)/k}var I=g,M=E,F=1,D=0;for(t=1;t<=9;t++)F=F*I,D=D+this.D[t]*F;var G=this.lat0+D*jl*1e5,C=this.long0+M;return e.x=C,e.y=G,e}var M8=["New_Zealand_Map_Grid","nzmg"];const A8={init:P8,forward:S8,inverse:I8,names:M8};function L8(){}function x8(e){var t=e.x,n=e.y,i=vt(t-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=r,e.y=s,e}function C8(e){e.x-=this.x0,e.y-=this.y0;var t=vt(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var k8=["Miller_Cylindrical","mill"];const R8={init:L8,forward:x8,inverse:C8,names:k8};var O8=20;function N8(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=P_(this.es)}function D8(e){var t,n,i=e.x,r=e.y;if(i=vt(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),a=O8;a;--a){var l=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<gt)break}t=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),f=Math.cos(r);n=this.a*Ca(r,h,f,this.en),t=this.a*i*f/Math.sqrt(1-this.es*h*h)}return e.x=t,e.y=n,e}function V8(e){var t,n,i,r;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=ms((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=ms(Math.sin(t)/this.n)),i=vt(i+this.long0),t=Ps(t)):(t=S_(e.y/this.a,this.es,this.en),r=Math.abs(t),r<nt?(r=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(t)),i=vt(n)):r-gt<nt&&(i=this.long0)),e.x=i,e.y=t,e}var F8=["Sinusoidal","sinu"];const G8={init:N8,forward:D8,inverse:V8,names:F8};function U8(){}function z8(e){for(var t=e.x,n=e.y,i=vt(t-this.long0),r=n,s=Math.PI*Math.sin(n);;){var a=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=a,Math.abs(a)<gt)break}r/=2,Math.PI/2-Math.abs(n)<gt&&(i=0);var l=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=l,e.y=h,e}function B8(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=vt(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return e.x=i,e.y=r,e}var $8=["Mollweide","moll"];const j8={init:U8,forward:z8,inverse:B8,names:$8};function q8(){Math.abs(this.lat1+this.lat2)<gt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Fc(this.es),this.e1=Gc(this.es),this.e2=Uc(this.es),this.e3=zc(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Hi(this.e,this.sin_phi,this.cos_phi),this.ml1=An(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<gt?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Hi(this.e,this.sin_phi,this.cos_phi),this.ml2=An(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=An(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function H8(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var r=An(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-r)}var s=this.ns*vt(t-this.long0),a=this.x0+i*Math.sin(s),l=this.y0+this.rh-i*Math.cos(s);return e.x=a,e.y=l,e}function W8(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,r;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(n!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return r=vt(this.long0+s/this.ns),i=Ps(this.g-n/this.a),e.x=r,e.y=i,e;var a=this.g-n/this.a;return i=ju(a,this.e0,this.e1,this.e2,this.e3),r=vt(this.long0+s/this.ns),e.x=r,e.y=i,e}var K8=["Equidistant_Conic","eqdc"];const Z8={init:q8,forward:H8,inverse:W8,names:K8};function Y8(){this.R=this.a}function Q8(e){var t=e.x,n=e.y,i=vt(t-this.long0),r,s;Math.abs(n)<=gt&&(r=this.x0+this.R*i,s=this.y0);var a=ms(2*Math.abs(n/Math.PI));(Math.abs(i)<=gt||Math.abs(Math.abs(n)-nt)<=gt)&&(r=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var l=.5*Math.abs(Math.PI/i-i/Math.PI),h=l*l,f=Math.sin(a),m=Math.cos(a),p=m/(f+m-1),g=p*p,E=p*(2/f-1),T=E*E,P=Math.PI*this.R*(l*(p-T)+Math.sqrt(h*(p-T)*(p-T)-(T+h)*(g-T)))/(T+h);i<0&&(P=-P),r=this.x0+P;var x=h+p;return P=Math.PI*this.R*(E*x-l*Math.sqrt((T+h)*(h+1)-x*x))/(T+h),n>=0?s=this.y0+P:s=this.y0-P,e.x=r,e.y=s,e}function X8(e){var t,n,i,r,s,a,l,h,f,m,p,g,E;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,i=e.x/p,r=e.y/p,s=i*i+r*r,a=-Math.abs(r)*(1+s),l=a-2*r*r+i*i,h=-2*a+1+2*r*r+s*s,E=r*r/h+(2*l*l*l/h/h/h-9*a*l/h/h)/27,f=(a-l*l/3/h)/h,m=2*Math.sqrt(-f/3),p=3*E/f/m,Math.abs(p)>1&&(p>=0?p=1:p=-1),g=Math.acos(p)/3,e.y>=0?n=(-m*Math.cos(g+Math.PI/3)-l/3/h)*Math.PI:n=-(-m*Math.cos(g+Math.PI/3)-l/3/h)*Math.PI,Math.abs(i)<gt?t=this.long0:t=vt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),e.x=t,e.y=n,e}var J8=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const tN={init:Y8,forward:Q8,inverse:X8,names:J8};function eN(e,t,n,i,r,s){const a=i-t,l=Math.atan((1-s)*Math.tan(e)),h=Math.atan((1-s)*Math.tan(n)),f=Math.sin(l),m=Math.cos(l),p=Math.sin(h),g=Math.cos(h);let E=a,T,P=100,x,O,V,U,q,J,at,k,I,M,F,D,G,C;do{if(x=Math.sin(E),O=Math.cos(E),V=Math.sqrt(g*x*(g*x)+(m*p-f*g*O)*(m*p-f*g*O)),V===0)return{azi1:0,s12:0};U=f*p+m*g*O,q=Math.atan2(V,U),J=m*g*x/V,at=1-J*J,k=at!==0?U-2*f*p/at:0,I=s/16*at*(4+s*(4-3*at)),T=E,E=a+(1-I)*s*J*(q+I*V*(k+I*U*(-1+2*k*k)))}while(Math.abs(E-T)>1e-12&&--P>0);return P===0?{azi1:NaN,s12:NaN}:(M=at*(r*r-r*(1-s)*(r*(1-s)))/(r*(1-s)*(r*(1-s))),F=1+M/16384*(4096+M*(-768+M*(320-175*M))),D=M/1024*(256+M*(-128+M*(74-47*M))),G=D*V*(k+D/4*(U*(-1+2*k*k)-D/6*k*(-3+4*V*V)*(-3+4*k*k))),C=r*(1-s)*F*(q-G),{azi1:Math.atan2(g*x,m*p-f*g*O),s12:C})}function nN(e,t,n,i,r,s){const a=Math.atan((1-s)*Math.tan(e)),l=Math.sin(a),h=Math.cos(a),f=Math.sin(n),m=Math.cos(n),p=Math.atan2(l,h*m),g=h*f,E=1-g*g,T=E*(r*r-r*(1-s)*(r*(1-s)))/(r*(1-s)*(r*(1-s))),P=1+T/16384*(4096+T*(-768+T*(320-175*T))),x=T/1024*(256+T*(-128+T*(74-47*T)));let O=i/(r*(1-s)*P),V,U=100,q,J,at,k;do q=Math.cos(2*p+O),J=Math.sin(O),at=Math.cos(O),k=x*J*(q+x/4*(at*(-1+2*q*q)-x/6*q*(-3+4*J*J)*(-3+4*q*q))),V=O,O=i/(r*(1-s)*P)+k;while(Math.abs(O-V)>1e-12&&--U>0);if(U===0)return{lat2:NaN,lon2:NaN};const I=l*J-h*at*m,M=Math.atan2(l*at+h*J*m,(1-s)*Math.sqrt(g*g+I*I)),F=Math.atan2(J*f,h*at-l*J*m),D=s/16*E*(4+s*(4-3*E)),G=F-(1-D)*s*g*(O+D*J*(q+D*at*(-1+2*q*q))),C=t+G;return{lat2:M,lon2:C}}function iN(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function rN(e){var t=e.x,n=e.y,i=Math.sin(e.y),r=Math.cos(e.y),s=vt(t-this.long0),a,l,h,f,m,p,g,E,T,P,x;return this.sphere?Math.abs(this.sin_p12-1)<=gt?(e.x=this.x0+this.a*(nt-n)*Math.sin(s),e.y=this.y0-this.a*(nt-n)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=gt?(e.x=this.x0+this.a*(nt+n)*Math.sin(s),e.y=this.y0+this.a*(nt+n)*Math.cos(s),e):(T=this.sin_p12*i+this.cos_p12*r*Math.cos(s),g=Math.acos(T),E=g?g/Math.sin(g):1,e.x=this.x0+this.a*E*r*Math.sin(s),e.y=this.y0+this.a*E*(this.cos_p12*i-this.sin_p12*r*Math.cos(s)),e):(a=Fc(this.es),l=Gc(this.es),h=Uc(this.es),f=zc(this.es),Math.abs(this.sin_p12-1)<=gt?(m=this.a*An(a,l,h,f,nt),p=this.a*An(a,l,h,f,n),e.x=this.x0+(m-p)*Math.sin(s),e.y=this.y0-(m-p)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=gt?(m=this.a*An(a,l,h,f,nt),p=this.a*An(a,l,h,f,n),e.x=this.x0+(m+p)*Math.sin(s),e.y=this.y0+(m+p)*Math.cos(s),e):Math.abs(t)<gt&&Math.abs(n-this.lat0)<gt?(e.x=e.y=0,e):(P=eN(this.lat0,this.long0,n,t,this.a,this.f),x=P.azi1,e.x=P.s12*Math.sin(x),e.y=P.s12*Math.cos(x),e))}function sN(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,r,s,a,l,h,f,m,p,g,E,T,P,x;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*nt*this.a?void 0:(n=t/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(t)<=gt?a=this.lat0:(a=ms(r*this.sin_p12+e.y*i*this.cos_p12/t),l=Math.abs(this.lat0)-nt,Math.abs(l)<=gt?this.lat0>=0?s=vt(this.long0+Math.atan2(e.x,-e.y)):s=vt(this.long0-Math.atan2(-e.x,e.y)):s=vt(this.long0+Math.atan2(e.x*i,t*this.cos_p12*r-e.y*this.sin_p12*i))),e.x=s,e.y=a,e)):(h=Fc(this.es),f=Gc(this.es),m=Uc(this.es),p=zc(this.es),Math.abs(this.sin_p12-1)<=gt?(g=this.a*An(h,f,m,p,nt),t=Math.sqrt(e.x*e.x+e.y*e.y),E=g-t,a=ju(E/this.a,h,f,m,p),s=vt(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=a,e):Math.abs(this.sin_p12+1)<=gt?(g=this.a*An(h,f,m,p,nt),t=Math.sqrt(e.x*e.x+e.y*e.y),E=t-g,a=ju(E/this.a,h,f,m,p),s=vt(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=a,e):(T=Math.atan2(e.x,e.y),P=Math.sqrt(e.x*e.x+e.y*e.y),x=nN(this.lat0,this.long0,T,P,this.a,this.f),e.x=x.lon2,e.y=x.lat2,e))}var oN=["Azimuthal_Equidistant","aeqd"];const aN={init:iN,forward:rN,inverse:sN,names:oN};function lN(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function cN(e){var t,n,i,r,s,a,l,h,f=e.x,m=e.y;return i=vt(f-this.long0),t=Math.sin(m),n=Math.cos(m),r=Math.cos(i),a=this.sin_p14*t+this.cos_p14*n*r,s=1,(a>0||Math.abs(a)<=gt)&&(l=this.a*s*n*Math.sin(i),h=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*r)),e.x=l,e.y=h,e}function hN(e){var t,n,i,r,s,a,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=ms(t/this.a),i=Math.sin(n),r=Math.cos(n),a=this.long0,Math.abs(t)<=gt?(l=this.lat0,e.x=a,e.y=l,e):(l=ms(r*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.abs(this.lat0)-nt,Math.abs(s)<=gt?(this.lat0>=0?a=vt(this.long0+Math.atan2(e.x,-e.y)):a=vt(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=l,e):(a=vt(this.long0+Math.atan2(e.x*i,t*this.cos_p14*r-e.y*this.sin_p14*i)),e.x=a,e.y=l,e))}var uN=["ortho"];const fN={init:lN,forward:cN,inverse:hN,names:uN};var Ae={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},le={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function dN(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=nt-ae/2?this.face=Ae.TOP:this.lat0<=-(nt-ae/2)?this.face=Ae.BOTTOM:Math.abs(this.long0)<=ae?this.face=Ae.FRONT:Math.abs(this.long0)<=nt+ae?this.face=this.long0>0?Ae.RIGHT:Ae.LEFT:this.face=Ae.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function mN(e){var t={x:0,y:0},n,i,r,s,a,l,h={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===Ae.TOP)s=nt-n,i>=ae&&i<=nt+ae?(h.value=le.AREA_0,r=i-nt):i>nt+ae||i<=-(nt+ae)?(h.value=le.AREA_1,r=i>0?i-Ne:i+Ne):i>-(nt+ae)&&i<=-ae?(h.value=le.AREA_2,r=i+nt):(h.value=le.AREA_3,r=i);else if(this.face===Ae.BOTTOM)s=nt+n,i>=ae&&i<=nt+ae?(h.value=le.AREA_0,r=-i+nt):i<ae&&i>=-ae?(h.value=le.AREA_1,r=-i):i<-ae&&i>=-(nt+ae)?(h.value=le.AREA_2,r=-i-nt):(h.value=le.AREA_3,r=i>0?-i+Ne:-i-Ne);else{var f,m,p,g,E,T,P;this.face===Ae.RIGHT?i=ca(i,+nt):this.face===Ae.BACK?i=ca(i,+Ne):this.face===Ae.LEFT&&(i=ca(i,-nt)),g=Math.sin(n),E=Math.cos(n),T=Math.sin(i),P=Math.cos(i),f=E*P,m=E*T,p=g,this.face===Ae.FRONT?(s=Math.acos(f),r=Nh(s,p,m,h)):this.face===Ae.RIGHT?(s=Math.acos(m),r=Nh(s,p,-f,h)):this.face===Ae.BACK?(s=Math.acos(-f),r=Nh(s,p,-m,h)):this.face===Ae.LEFT?(s=Math.acos(-m),r=Nh(s,p,f,h)):(s=r=0,h.value=le.AREA_0)}return l=Math.atan(12/Ne*(r+Math.acos(Math.sin(r)*Math.cos(ae))-nt)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(r))))),h.value===le.AREA_1?l+=nt:h.value===le.AREA_2?l+=Ne:h.value===le.AREA_3&&(l+=1.5*Ne),t.x=a*Math.cos(l),t.y=a*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function pN(e){var t={lam:0,phi:0},n,i,r,s,a,l,h,f,m,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=le.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=le.AREA_1,n-=nt):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=le.AREA_2,n=n<0?n+Ne:n-Ne):(p.value=le.AREA_3,n+=nt),m=Ne/12*Math.tan(n),a=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),l=Math.atan(a),r=Math.cos(n),s=Math.tan(i),h=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),h<-1?h=-1:h>1&&(h=1),this.face===Ae.TOP)f=Math.acos(h),t.phi=nt-f,p.value===le.AREA_0?t.lam=l+nt:p.value===le.AREA_1?t.lam=l<0?l+Ne:l-Ne:p.value===le.AREA_2?t.lam=l-nt:t.lam=l;else if(this.face===Ae.BOTTOM)f=Math.acos(h),t.phi=f-nt,p.value===le.AREA_0?t.lam=-l+nt:p.value===le.AREA_1?t.lam=-l:p.value===le.AREA_2?t.lam=-l-nt:t.lam=l<0?-l-Ne:-l+Ne;else{var g,E,T;g=h,m=g*g,m>=1?T=0:T=Math.sqrt(1-m)*Math.sin(l),m+=T*T,m>=1?E=0:E=Math.sqrt(1-m),p.value===le.AREA_1?(m=E,E=-T,T=m):p.value===le.AREA_2?(E=-E,T=-T):p.value===le.AREA_3&&(m=E,E=T,T=-m),this.face===Ae.RIGHT?(m=g,g=-E,E=m):this.face===Ae.BACK?(g=-g,E=-E):this.face===Ae.LEFT&&(m=g,g=E,E=-m),t.phi=Math.acos(-T)-nt,t.lam=Math.atan2(E,g),this.face===Ae.RIGHT?t.lam=ca(t.lam,-nt):this.face===Ae.BACK?t.lam=ca(t.lam,-Ne):this.face===Ae.LEFT&&(t.lam=ca(t.lam,+nt))}if(this.es!==0){var P,x,O;P=t.phi<0?1:0,x=Math.tan(t.phi),O=this.b/Math.sqrt(x*x+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),P&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Nh(e,t,n,i){var r;return e<gt?(i.value=le.AREA_0,r=0):(r=Math.atan2(t,n),Math.abs(r)<=ae?i.value=le.AREA_0:r>ae&&r<=nt+ae?(i.value=le.AREA_1,r-=nt):r>nt+ae||r<=-(nt+ae)?(i.value=le.AREA_2,r=r>=0?r-Ne:r+Ne):(i.value=le.AREA_3,r+=nt)),r}function ca(e,t){var n=e+t;return n<-Ne?n+=_c:n>+Ne&&(n-=_c),n}var _N=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const gN={init:dN,forward:mN,inverse:pN,names:_N};var Dm=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Sl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],tT=.8487,eT=1.3523,nT=Ni/5,vN=1/nT,Ko=18,qu=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},yN=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function wN(e,t,n,i){for(var r=t;i;--i){var s=e(r);if(r-=s,Math.abs(s)<n)break}return r}function EN(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function bN(e){var t=vt(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*nT);i<0?i=0:i>=Ko&&(i=Ko-1),n=Ni*(n-vN*i);var r={x:qu(Dm[i],n)*t,y:qu(Sl[i],n)};return e.y<0&&(r.y=-r.y),r.x=r.x*this.a*tT+this.x0,r.y=r.y*this.a*eT+this.y0,r}function TN(e){var t={x:(e.x-this.x0)/(this.a*tT),y:Math.abs(e.y-this.y0)/(this.a*eT)};if(t.y>=1)t.x/=Dm[Ko][0],t.y=e.y<0?-nt:nt;else{var n=Math.floor(t.y*Ko);for(n<0?n=0:n>=Ko&&(n=Ko-1);;)if(Sl[n][0]>t.y)--n;else if(Sl[n+1][0]<=t.y)++n;else break;var i=Sl[n],r=5*(t.y-i[0])/(Sl[n+1][0]-i[0]);r=wN(function(s){return(qu(i,s)-t.y)/yN(i,s)},r,gt,100),t.x/=qu(Dm[n],r),t.y=(5*n+r)*en,e.y<0&&(t.y=-t.y)}return t.x=vt(t.x+this.long0),t}var PN=["Robinson","robin"];const SN={init:EN,forward:bN,inverse:TN,names:PN};function IN(){this.name="geocent"}function MN(e){var t=$b(e,this.es,this.a);return t}function AN(e){var t=jb(e,this.es,this.a,this.b);return t}var LN=["Geocentric","geocentric","geocent","Geocent"];const xN={init:IN,forward:MN,inverse:AN,names:LN};var fn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},fl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function CN(){if(Object.keys(fl).forEach((function(n){if(typeof this[n]>"u")this[n]=fl[n].def;else{if(fl[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);fl[n].num&&(this[n]=parseFloat(this[n]))}fl[n].degrees&&(this[n]=this[n]*en)}).bind(this)),Math.abs(Math.abs(this.lat0)-nt)<gt?this.mode=this.lat0<0?fn.S_POLE:fn.N_POLE:Math.abs(this.lat0)<gt?this.mode=fn.EQUIT:(this.mode=fn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function kN(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),r,s;switch(this.mode){case fn.OBLIQ:s=this.sinph0*t+this.cosph0*n*i;break;case fn.EQUIT:s=n*i;break;case fn.S_POLE:s=-t;break;case fn.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),r=s*n*Math.sin(e.x),this.mode){case fn.OBLIQ:s*=this.cosph0*t-this.sinph0*n*i;break;case fn.EQUIT:s*=t;break;case fn.N_POLE:s*=-(n*i);break;case fn.S_POLE:s*=n*i;break}var a,l;return a=s*this.cg+r*this.sg,l=1/(a*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*l,s=a*l,e.x=r*this.a,e.y=s*this.a,e}function RN(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,r;r=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*r,i=this.pn1*e.y*this.cw*r,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var s=Dn(e.x,e.y);if(Math.abs(s)<gt)t.x=0,t.y=e.y;else{var a,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-l*l),this.mode){case fn.OBLIQ:t.y=Math.asin(a*this.sinph0+e.y*l*this.cosph0/s),e.y=(a-this.sinph0*Math.sin(t.y))*s,e.x*=l*this.cosph0;break;case fn.EQUIT:t.y=Math.asin(e.y*l/s),e.y=a*s,e.x*=l;break;case fn.N_POLE:t.y=Math.asin(a),e.y=-e.y;break;case fn.S_POLE:t.y=-Math.asin(a);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var ON=["Tilted_Perspective","tpers"];const NN={init:CN,forward:kN,inverse:RN,names:ON};function DN(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function VN(e){var t=e.x,n=e.y,i,r,s,a;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var l=this.radius_p/Dn(this.radius_p*Math.cos(n),Math.sin(n));if(r=l*Math.cos(t)*Math.cos(n),s=l*Math.sin(t)*Math.cos(n),a=l*Math.sin(n),(this.radius_g-r)*r-s*s-a*a*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/Dn(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(a/Dn(s,i)))}else this.shape==="sphere"&&(i=Math.cos(n),r=Math.cos(t)*i,s=Math.sin(t)*i,a=Math.sin(n),i=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/Dn(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(a/Dn(s,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function FN(e){var t=-1,n=0,i=0,r,s,a,l;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Dn(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Dn(1,n));var h=i/this.radius_p;if(r=n*n+h*h+t*t,s=2*this.radius_g*t,a=s*s-4*r*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-s-Math.sqrt(a))/(2*r),t=this.radius_g+l*t,n*=l,i*=l,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),r=n*n+i*i+t*t,s=2*this.radius_g*t,a=s*s-4*r*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-s-Math.sqrt(a))/(2*r),t=this.radius_g+l*t,n*=l,i*=l,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var GN=["Geostationary Satellite View","Geostationary_Satellite","geos"];const UN={init:DN,forward:VN,inverse:FN,names:GN};var ql=1.340264,Hl=-.081106,Wl=893e-6,Kl=.003796,Hu=Math.sqrt(3)/2;function zN(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function BN(e){var t=vt(e.x-this.long0),n=e.y,i=Math.asin(Hu*Math.sin(n)),r=i*i,s=r*r*r;return e.x=t*Math.cos(i)/(Hu*(ql+3*Hl*r+s*(7*Wl+9*Kl*r))),e.y=i*(ql+Hl*r+s*(Wl+Kl*r)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function $N(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,n=12,i=e.y,r,s,a,l,h,f;for(f=0;f<n&&(r=i*i,s=r*r*r,a=i*(ql+Hl*r+s*(Wl+Kl*r))-e.y,l=ql+3*Hl*r+s*(7*Wl+9*Kl*r),i-=h=a/l,!(Math.abs(h)<t));++f);return r=i*i,s=r*r*r,e.x=Hu*e.x*(ql+3*Hl*r+s*(7*Wl+9*Kl*r))/Math.cos(i),e.y=Math.asin(Math.sin(i)/Hu),e.x=vt(e.x+this.long0),e}var jN=["eqearth","Equal Earth","Equal_Earth"];const qN={init:zN,forward:BN,inverse:$N,names:jN};var yc=1e-10;function HN(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<yc)throw new Error;this.es?(this.en=P_(this.es),this.m1=Ca(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=KN,this.forward=WN):(Math.abs(this.phi1)+yc>=nt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=YN,this.forward=ZN)}function WN(e){var t=vt(e.x-(this.long0||0)),n=e.y,i,r,s;return i=this.am1+this.m1-Ca(n,r=Math.sin(n),s=Math.cos(n),this.en),r=s*t/(i*Math.sqrt(1-this.es*r*r)),e.x=i*Math.sin(r),e.y=this.am1-i*Math.cos(r),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function KN(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i,r;if(n=Dn(e.x,e.y=this.am1-e.y),r=S_(this.am1+this.m1-n,this.es,this.en),(t=Math.abs(r))<nt)t=Math.sin(r),i=n*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(r);else if(Math.abs(t-nt)<=yc)i=0;else throw new Error;return e.x=vt(i+(this.long0||0)),e.y=Ps(r),e}function ZN(e){var t=vt(e.x-(this.long0||0)),n=e.y,i,r;return r=this.cphi1+this.phi1-n,Math.abs(r)>yc?(e.x=r*Math.sin(i=t*Math.cos(n)/r),e.y=this.cphi1-r*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function YN(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i=Dn(e.x,e.y=this.cphi1-e.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>nt)throw new Error;return Math.abs(Math.abs(n)-nt)<=yc?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(n),e.x=vt(t+(this.long0||0)),e.y=Ps(n),e}var QN=["bonne","Bonne (Werner lat_1=90)"];const XN={init:HN,names:QN};function JN(e){e.Proj.projections.add(eu),e.Proj.projections.add(nu),e.Proj.projections.add(Q6),e.Proj.projections.add(oO),e.Proj.projections.add(uO),e.Proj.projections.add(_O),e.Proj.projections.add(bO),e.Proj.projections.add(MO),e.Proj.projections.add(kO),e.Proj.projections.add(VO),e.Proj.projections.add(YO),e.Proj.projections.add(n8),e.Proj.projections.add(a8),e.Proj.projections.add(d8),e.Proj.projections.add(v8),e.Proj.projections.add(T8),e.Proj.projections.add(A8),e.Proj.projections.add(R8),e.Proj.projections.add(G8),e.Proj.projections.add(j8),e.Proj.projections.add(Z8),e.Proj.projections.add(tN),e.Proj.projections.add(aN),e.Proj.projections.add(fN),e.Proj.projections.add(gN),e.Proj.projections.add(SN),e.Proj.projections.add(xN),e.Proj.projections.add(NN),e.Proj.projections.add(UN),e.Proj.projections.add(qN),e.Proj.projections.add(XN)}const ru=Object.assign(m6,{defaultDatum:"WGS84",Proj:wi,WGS84:new wi("WGS84"),Point:ba,toPoint:qb,defs:In,nadgrid:Y3,transform:$u,mgrs:p6,version:"__VERSION__"});JN(ru);function tD(e,t){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t))return{utmX:"N/A",utmY:"N/A",utmZone:"N/A"};const n=Math.floor((t+180)/6)+1,i=e<0,r=`+proj=utm +zone=${n} ${i?"+south":""} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`,s="EPSG:4326";ru.defs(`EPSG:32${i?"7":"6"}${n}`)||ru.defs(`EPSG:32${i?"7":"6"}${n}`,r);try{const[a,l]=ru(s,`EPSG:32${i?"7":"6"}${n}`,[t,e]);return{utmX:a.toFixed(2),utmY:l.toFixed(2),utmZone:`${n}${i?"S":"N"}`}}catch(a){return console.error("Error en la conversión a UTM:",a),{utmX:"Error",utmY:"Error",utmZone:"Error"}}}async function eD(e){const t=$l(),n=pc(t,"projects",e,"features"),i=await Ib(n),r=[];return i.forEach(s=>{const a=s.data(),l=JSON.parse(a.geometry);l.properties||(l.properties={}),l.properties.firestore_id=s.id,l.properties.name=a.name,r.push(l)}),{type:"FeatureCollection",features:r}}function nD(e){const t=e.features.map(n=>(n.geometry.type==="Polygon"||n.geometry.type==="MultiPolygon"?n.properties.area_m2=y_(n).toFixed(2):(n.geometry.type==="LineString"||n.geometry.type==="MultiLineString")&&(n.properties.longitud_m=w_(n,{units:"meters"}).toFixed(2)),n));return{...e,features:t}}function iD(e){const t=[];let n=0;const i={Polygon:"Polígono",LineString:"Línea",Point:"Punto"};return e.features.forEach(r=>{const s=i[r.geometry.type]||r.geometry.type;r.geometry.type==="Point"&&n++;let a=[];switch(r.geometry.type){case"Point":a.push(r.geometry.coordinates);break;case"LineString":a=r.geometry.coordinates;break;case"Polygon":a=r.geometry.coordinates[0];break}a.forEach((l,h)=>{const f=l[1],m=l[0],p=tD(f,m);t.push({"Nombre Forma":r.properties.name||"Sin nombre","Tipo Geometría":s,"Vértice/Punto Nº":r.geometry.type==="Point"?n:h+1,Latitud:f,Longitud:m,UTMX:p.utmX,UTMY:p.utmY,"Zona UTM":p.utmZone,"Elevacion (m)":"0"})})}),t}function rD(e){return JSON.stringify(e,null,2)}function sD(e){if(!e||e.length===0)return"";const t=Object.keys(e[0]).join(","),n=e.map(i=>Object.values(i).map(s=>{const a=String(s);return a.includes(",")||a.includes('"')?`"${a.replace(/"/g,'""')}"`:a}).join(","));return[t,...n].join(`
`)}function oD(e){const t=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
`,n=`  </Document>
</kml>`,i=e.features.map(r=>{const s=r.properties.name||"Sin nombre",a=r.geometry;let l="";try{switch(a.type){case"Point":l=`<Point><coordinates>${`${a.coordinates[0]},${a.coordinates[1]},0`}</coordinates></Point>`;break;case"LineString":l=`<LineString><coordinates>${a.coordinates.map(p=>`${p[0]},${p[1]},0`).join(" ")}</coordinates></LineString>`;break;case"Polygon":l=`<Polygon><outerBoundaryIs><LinearRing><coordinates>${a.coordinates[0].map(p=>`${p[0]},${p[1]},0`).join(" ")}</coordinates></LinearRing></outerBoundaryIs></Polygon>`;break;default:return""}}catch(h){return console.error(`Error converting feature ${s} to KML:`,h),""}return`    <Placemark>
      <name>${s}</name>
      ${l}
    </Placemark>`}).join(`
`);return t+i+`
`+n}function Md(e,t,n){const i=new Blob([e],{type:n}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}const aD={class:"modal-content"},lD={class:"modal-body"},cD={class:"table-container"},hD={class:"modal-footer"},uD={__name:"ExportPreviewModal",props:{flattenedFeatures:{type:Array,required:!0},enrichedFeatures:{type:Object,required:!0},projectName:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,i=()=>{const a=rD(n.enrichedFeatures);Md(a,`${n.projectName}.geojson`,"application/json")},r=()=>{const a=sD(n.flattenedFeatures);Md(a,`${n.projectName}.csv`,"text/csv;charset=utf-8;")},s=()=>{const a=oD(n.enrichedFeatures);Md(a,`${n.projectName}.kml`,"application/vnd.google-earth.kml+xml")};return(a,l)=>(pe(),ke("div",{class:"modal-overlay",onClick:l[1]||(l[1]=uf(h=>a.$emit("close"),["self"]))},[dt("div",aD,[l[3]||(l[3]=dt("div",{class:"modal-header"},[dt("h2",null,"Previsualización de Exportación")],-1)),dt("div",lD,[dt("div",cD,[dt("table",null,[l[2]||(l[2]=dt("thead",null,[dt("tr",null,[dt("th",{class:"col-nombre"},"Nombre Forma"),dt("th",{class:"col-tipo"},"Tipo Geometría"),dt("th",{class:"col-vertice"},"Vértice/Punto Nº"),dt("th",{class:"col-latlon"},"Latitud"),dt("th",{class:"col-latlon"},"Longitud"),dt("th",{class:"col-utm"},"UTMX"),dt("th",{class:"col-utm"},"UTMY"),dt("th",{class:"col-zona-utm"},"Zona UTM"),dt("th",{class:"col-elevacion"},"Elevacion (m)")])],-1)),dt("tbody",null,[(pe(!0),ke(zn,null,af(e.flattenedFeatures,(h,f)=>(pe(),ke("tr",{key:f},[dt("td",null,Ce(h["Nombre Forma"]),1),dt("td",null,Ce(h["Tipo Geometría"]),1),dt("td",null,Ce(h["Vértice/Punto Nº"]),1),dt("td",null,Ce(h.Latitud.toFixed(6)),1),dt("td",null,Ce(h.Longitud.toFixed(6)),1),dt("td",null,Ce(h.UTMX),1),dt("td",null,Ce(h.UTMY),1),dt("td",null,Ce(h["Zona UTM"]),1),dt("td",null,Ce(h["Elevacion (m)"]),1)]))),128))])])])]),dt("div",hD,[dt("button",{onClick:i,class:"action-button"},"Descargar GeoJSON"),dt("button",{onClick:r,class:"action-button csv-button"},"Descargar CSV"),dt("button",{onClick:s,class:"action-button kml-button"},"Descargar KML"),dt("button",{onClick:l[0]||(l[0]=h=>a.$emit("close")),class:"action-button"},"Cerrar")])])]))}},fD=so(uD,[["__scopeId","data-v-b42ca538"]]),dD={class:"feature-icon"},mD={class:"feature-name"},pD={key:0,class:"feature-details"},_D={class:"data-summary"},gD={class:"vertices-list"},vD=["onClick"],yD={__name:"FeatureItem",props:{feature:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},emits:["feature-selected","vertex-selected"],setup(e,{emit:t}){const n=e,i=t,r=ue(!1),s=$e(()=>{const p=n.feature,g=aa(p);let E="";switch(g){case"Polygon":case"MultiPolygon":const T=y_(p);T<1e4?E=`${T.toFixed(2)} m²`:T<1e6?E=`${(T/1e4).toFixed(2)} ha`:E=`${(T/1e6).toFixed(2)} km²`;break;case"LineString":case"MultiLineString":const P=w_(p,{units:"meters"});P<1e3?E=`${P.toFixed(2)} m`:E=`${(P/1e3).toFixed(2)} km`;break;case"Point":const x=Ea(p);E=`${x[1].toFixed(6)}, ${x[0].toFixed(6)}`;break}return E}),a=$e(()=>{const p=aa(n.feature);let g="",E=s.value;switch(p){case"Point":g="Coordenadas:";break;case"LineString":case"MultiLineString":g="Longitud:";break;case"Polygon":case"MultiPolygon":g="Área:";break;default:g="Valor:"}return{label:g,value:E}}),l=$e(()=>{const p=n.feature,g=aa(p);let E=[];return g==="Point"?E.push(Ea(p)):g==="LineString"?E=kh(p):g==="Polygon"?E=kh(p)[0]:g==="MultiLineString"?kh(p).forEach(T=>E=E.concat(T)):g==="MultiPolygon"&&kh(p).forEach(T=>E=E.concat(T[0])),E});function h(p){switch(p){case"Point":return"Punto";case"LineString":case"MultiLineString":return"Línea";case"Polygon":case"MultiPolygon":return"Polígono";default:return p}}function f(){r.value=!r.value,i("feature-selected",n.feature)}function m(p){i("vertex-selected",p)}return(p,g)=>{const E=dp("font-awesome-icon");return pe(),ke("div",{class:Ec(["feature-item",{"is-selected":e.isSelected}])},[dt("div",{class:"feature-header",onClick:f},[dt("span",dD,[e.feature.geometry.type==="Polygon"||e.feature.geometry.type==="MultiPolygon"?(pe(),na(E,{key:0,icon:"draw-polygon"})):e.feature.geometry.type==="LineString"||e.feature.geometry.type==="MultiLineString"?(pe(),na(E,{key:1,icon:"wave-square"})):e.feature.geometry.type==="Point"?(pe(),na(E,{key:2,icon:"circle"})):qs("",!0)]),dt("span",mD,Ce(e.feature.properties.name||"Sin nombre"),1)]),r.value?(pe(),ke("div",pD,[dt("div",_D,[dt("p",null,[g[0]||(g[0]=dt("strong",null,"Tipo:",-1)),nc(" "+Ce(h(e.feature.geometry.type)),1)]),dt("p",null,[dt("strong",null,Ce(a.value.label),1),nc(" "+Ce(a.value.value),1)])]),dt("div",gD,[g[1]||(g[1]=dt("strong",null,"Vértices:",-1)),dt("ul",null,[(pe(!0),ke(zn,null,af(l.value,(T,P)=>(pe(),ke("li",{key:P,onClick:uf(x=>m(T),["stop"])},Ce(P+1)+": ("+Ce(T[1].toFixed(6))+", "+Ce(T[0].toFixed(6))+") ",9,vD))),128))])])])):qs("",!0)],2)}}},wD=so(yD,[["__scopeId","data-v-77f5e987"]]),ED={class:"panel-header"},bD={key:0,class:"panel-content"},TD={key:0},PD={__name:"LayersPanel",props:{features:{type:Array,default:()=>[]},selectedFeatureId:{type:String,default:null}},emits:["feature-selected","vertex-selected"],setup(e,{emit:t}){const n=e,i=ue(!0),r=ue(null);function s(){i.value=!i.value}return dr(()=>n.features,a=>{console.log("Features updated in LayersPanel:",a.length)},{immediate:!0}),dr(()=>n.selectedFeatureId,a=>{a&&r.value&&Jl(()=>{const l=r.value.querySelector(".feature-item.is-selected");l&&l.scrollIntoView({behavior:"smooth",block:"center"})})}),(a,l)=>(pe(),ke("aside",{class:Ec(["layers-panel",{"layers-panel-expanded":i.value}])},[dt("div",ED,[l[2]||(l[2]=dt("h2",null,"Panel de Capas",-1)),dt("button",{onClick:s,class:"toggle-panel-button"},Ce(i.value?"X":"▶"),1)]),i.value?(pe(),ke("div",bD,[e.features.length===0?(pe(),ke("p",TD,"No hay formas en el mapa.")):(pe(),ke("div",{key:1,class:"feature-list",ref_key:"featureListRef",ref:r},[(pe(!0),ke(zn,null,af(e.features,h=>(pe(),na(wD,{key:h.id,feature:h,"is-selected":h.id===e.selectedFeatureId,onFeatureSelected:l[0]||(l[0]=f=>a.$emit("feature-selected",f)),onVertexSelected:l[1]||(l[1]=f=>a.$emit("vertex-selected",f))},null,8,["feature","is-selected"]))),128))],512))])):qs("",!0)],2))}},SD=so(PD,[["__scopeId","data-v-29cc1421"]]),ID={key:0,class:"modal-overlay"},MD={class:"modal-content"},AD={__name:"NameFeatureModal",props:{show:{type:Boolean,default:!1}},emits:["confirmed","cancelled"],setup(e,{emit:t}){const n=e,i=t,r=ue(n.show),s=ue("");dr(()=>n.show,h=>{r.value=h,h&&(s.value="")});const a=()=>{s.value.trim()?(i("confirmed",s.value.trim()),r.value=!1):alert("Por favor, introduce un nombre para la forma.")},l=()=>{i("cancelled"),r.value=!1};return(h,f)=>r.value?(pe(),ke("div",ID,[dt("div",MD,[f[1]||(f[1]=dt("h3",null,"Nombre de la Nueva Forma",-1)),fu(dt("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=m=>s.value=m),placeholder:"Introduce el nombre aquí",onKeyup:J2(a,["enter"])},null,544),[[_u,s.value]]),dt("div",{class:"modal-actions"},[dt("button",{onClick:a},"Aceptar"),dt("button",{onClick:l},"Cancelar")])])])):qs("",!0)}},LD=so(AD,[["__scopeId","data-v-f9cc10dd"]]),xD={class:"map-view-wrapper"},CD={class:"toolbar-horizontal"},kD={class:"drawing-tools"},RD={class:"main-content"},OD={__name:"MapView",setup(e){const t=lx(),n=ue("Cargando..."),i=si("projectName"),r=ue(null),s=ue(!1),a=ue({flattened:[],enriched:{}}),l=ue(null);ue(null);const h=ue(null),f=ue([]),m=ue(null),p=ue(null),g=ue(null),E=ue(null),T=ue(null),P=ue(null),x=ue(!1),O=ue(!1),V=ue(null),U={color:"#3388ff",weight:2,fillColor:"#3388ff",fillOpacity:.3},q={radius:8,fillColor:"#3388ff",color:"#3388ff",weight:3,opacity:1,fillOpacity:.3};Me.Popup.prototype._animateZoom=function(rt){if(!this._map)return;const ht=this._map._latLngToNewLayerPoint(this._latlng,rt.zoom,rt.center),Pt=this._getAnchor();Me.DomUtil.setPosition(this._container,ht.add(Pt))};function J(rt){switch(rt){case"Point":return"Punto";case"LineString":case"MultiLineString":return"Línea";case"Polygon":case"MultiPolygon":return"Polígono";default:return rt}}function at(rt){const ht=rt,Pt=aa(ht);let mt="";switch(Pt){case"Polygon":case"MultiPolygon":const Tt=y_(ht);Tt<1e4?mt=`${Tt.toFixed(2)} m²`:Tt<1e6?mt=`${(Tt/1e4).toFixed(2)} ha`:mt=`${(Tt/1e6).toFixed(2)} km²`;break;case"LineString":case"MultiLineString":const j=w_(ht,{units:"meters"});j<1e3?mt=`${j.toFixed(2)} m`:mt=`${(j/1e3).toFixed(2)} km`;break;case"Point":const it=Ea(ht);mt=`${it[1].toFixed(6)}, ${it[0].toFixed(6)}`;break}return mt}function k(rt){const ht=rt.properties.name||"Sin nombre",Pt=J(rt.geometry.type),mt=at(rt),Tt=aa(rt);let j="Valor:";switch(Tt){case"Point":j="Coordenadas:";break;case"LineString":case"MultiLineString":j="Longitud:";break;case"Polygon":case"MultiPolygon":j="Área:";break}return`
    <div>
      <strong style="font-weight: 900; font-size: 1.1em;">${ht}</strong><br>
      <strong>Tipo:</strong> ${Pt}<br>
      <strong>${j}</strong> ${mt}
    </div>
  `}function I(rt){if(!rt.feature)return;const ht=k(rt.feature);rt.bindPopup(ht)}function M(rt){rt.on("click",async ht=>{await Jl(),m.value=rt.feature.id,rt.openPopup()})}async function F(){try{const rt=await eD(t.params.id),ht=nD(rt),mt=iD(ht).map((Tt,j)=>({num_registro:j+1,...Tt}));a.value={flattened:mt,enriched:ht},s.value=!0}catch(rt){console.error("Error al preparar datos para el modal de exportación:",rt),alert("No se pudieron cargar los datos para la exportación. Revise la consola.")}}function D(){p.value&&p.value.enabled()&&p.value.disable(),g.value&&g.value.enabled()&&g.value.disable(),E.value&&E.value.enabled()&&E.value.disable(),T.value&&T.value.enabled()&&T.value.disable(),P.value&&P.value.enabled()&&P.value.disable(),x.value=!1}function G(){T.value&&T.value.enabled()&&T.value.save(),P.value&&P.value.enabled()&&P.value.save(),D()}function C(){T.value&&T.value.enabled()&&T.value.revertLayers(),P.value&&P.value.enabled()&&P.value.revertLayers(),D()}function fe(rt){if(!l.value)return;const ht=rt,Pt=aa(ht);if(Pt==="Point"){const mt=Ea(ht);Vt(l.value).setView([mt[1],mt[0]],16)}else if(Pt==="LineString"||Pt==="MultiLineString"||Pt==="Polygon"||Pt==="MultiPolygon"){const mt=Me.geoJSON(ht);Vt(l.value).fitBounds(mt.getBounds())}Vt(h.value).eachLayer(mt=>{mt.feature&&mt.feature.id===ht.id&&mt.openPopup()})}function ln(rt){l.value&&Vt(l.value).setView([rt[1],rt[0]],18)}async function Zt(){if(!l.value||!t.params.id)return;const rt=Vt(l.value).getCenter(),ht=Vt(l.value).getZoom(),Pt=$l(),mt=wl(Pt,"projects",t.params.id);try{await Vy(mt,{lastZoom:ht,lastCenter:{lat:rt.lat,lng:rt.lng}}),console.log("Estado del mapa guardado en Firestore.")}catch(Tt){console.error("Error al guardar el estado del mapa:",Tt)}}const qt=()=>{console.log("Localizando usuario..."),navigator.geolocation&&navigator.geolocation.getCurrentPosition(rt=>{console.log("Ubicación obtenida:",rt);const{latitude:ht,longitude:Pt}=rt.coords;l.value?(Vt(l.value).setView([ht,Pt],16),Me.marker([ht,Pt]).addTo(Vt(l.value)).bindPopup("Estás aquí").openPopup()):console.error("Map instance is not available.")},rt=>{console.error("Error al obtener la ubicación:",rt)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ft=rt=>{rt.key==="Escape"&&C()},Ze=async rt=>{if(!V.value)return;const ht=V.value;Vt(l.value).removeLayer(ht);const Pt=ht.toGeoJSON();Pt.properties||(Pt.properties={}),Pt.properties.name=rt;let mt=null;const Tt=$l();Me.geoJSON(Pt,{pointToLayer:(j,it)=>Me.circleMarker(it,q),onEachFeature:(j,it)=>{M(it),Vt(h.value).addLayer(it),mt=it,I(it)}});try{const j=pc(Tt,"projects",t.params.id,"features"),it=await Mb(j,{geometry:JSON.stringify(Pt),name:rt});mt&&(mt.feature.id=it.id,mt.feature.properties=Pt.properties),Pt.id=it.id,f.value.push(Pt),console.log("Geometría guardada en Firestore y capa actualizada en el mapa")}catch(j){console.error("Error al guardar la geometría:",j),mt&&Vt(h.value).removeLayer(mt)}finally{V.value=null,O.value=!1,Vt(l.value).invalidateSize()}},It=()=>{V.value&&Vt(l.value).hasLayer(V.value)&&Vt(l.value).removeLayer(V.value),V.value=null,O.value=!1};T1(async()=>{const rt=$l(),ht=wl(rt,"projects",t.params.id),Pt=await MR(ht);let mt=[-32.94,-60.63],Tt=13;if(Pt.exists()){n.value=Pt.data().name,i.value=Pt.data().name;const j=Pt.data();j.lastZoom!==void 0&&j.lastCenter!==void 0?(Tt=j.lastZoom,mt=[j.lastCenter.lat,j.lastCenter.lng],console.log("Cargando estado del mapa guardado:",mt,Tt)):console.log("No se encontró estado del mapa guardado, usando valores por defecto.")}else n.value="Proyecto no encontrado",i.value=null,console.log("Proyecto no encontrado, usando valores por defecto.");if(r.value){l.value=Bd(Me.map(r.value).setView(mt,Tt)),l.value.on("zoomend",()=>{Zt(),l.value.invalidateSize()}),l.value.on("moveend",()=>{Zt(),l.value.invalidateSize()});const j=Me.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),it=Me.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});j.addTo(l.value);const pt={OpenStreetMap:j,Satélite:it};Me.control.layers(pt).addTo(l.value);const Et=new KR,Wt=new HR({provider:Et,style:"bar",searchLabel:"Buscar un lugar...",showMarker:!0,marker:{icon:new Me.Icon.Default,draggable:!1}});l.value.addControl(Wt),h.value=Bd(Me.featureGroup().addTo(l.value)),p.value=new Me.Draw.Polygon(l.value,{shapeOptions:U}),g.value=new Me.Draw.Polyline(l.value,{shapeOptions:U}),E.value=new Me.Draw.CircleMarker(l.value,{shapeOptions:q}),T.value=new Me.EditToolbar.Edit(l.value,{featureGroup:h.value}),P.value=new Me.EditToolbar.Delete(l.value,{featureGroup:h.value});const A=pc(rt,"projects",t.params.id,"features"),R=Pb(A);LR(R,async z=>{f.value=z.docs.map(Z=>{const Y=Z.data(),K=JSON.parse(Y.geometry);return K.properties=K.properties||{},K.properties.name=Y.name,K.id=Z.id,K}),o2(async()=>{Vt(h.value).clearLayers(),f.value.forEach(Z=>{Me.geoJSON(Z,{pointToLayer:(Y,K)=>Me.circleMarker(K,q),onEachFeature:(Y,K)=>{K.feature=Y,M(K),I(K),Vt(h.value).addLayer(K)}})}),await Jl(),Vt(l.value).invalidateSize()})}),l.value.on(Me.Draw.Event.DELETED,async z=>{z.layers.eachLayer(async Z=>{const Y=Z.feature.id;if(Y)try{const K=wl(rt,"projects",t.params.id,"features",Y);await AR(K),console.log("Geometría eliminada de Firestore")}catch(K){console.error("Error al eliminar la geometría:",K)}})}),l.value.on(Me.Draw.Event.CREATED,async z=>{V.value=z.layer,O.value=!0}),l.value.on(Me.Draw.Event.EDITED,async z=>{z.layers.eachLayer(async Y=>{const K=Y.feature.id;if(K)try{const ct=wl(rt,"projects",t.params.id,"features",K),lt=Y.toGeoJSON();await Vy(ct,{geometry:JSON.stringify(lt)}),console.log("Geometría editada y guardada en Firestore")}catch(ct){console.error("Error al editar la geometría:",ct)}})})}window.addEventListener("keydown",ft)}),P1(()=>{l.value&&(l.value.off(),l.value.remove()),window.removeEventListener("keydown",ft)});function Ht(rt){if(!l.value){console.error("Map not initialized.");return}switch(D(),rt){case"polygon":p.value.enable(),x.value=!0;break;case"polyline":g.value.enable(),x.value=!0;break;case"circlemarker":E.value.enable(),x.value=!0;break;case"edit":T.value.enable(),x.value=!0;break;case"delete":P.value.enable(),x.value=!0;break;default:console.warn("Unknown drawing type:",rt)}}return(rt,ht)=>{const Pt=dp("font-awesome-icon");return pe(),ke("div",null,[dt("div",xD,[dt("div",CD,[dt("div",kD,[dt("button",{onClick:ht[0]||(ht[0]=mt=>Ht("polygon")),class:"action-button"},"Dibujar Polígono"),dt("button",{onClick:ht[1]||(ht[1]=mt=>Ht("polyline")),class:"action-button"},"Dibujar Línea"),dt("button",{onClick:ht[2]||(ht[2]=mt=>Ht("circlemarker")),class:"action-button"},"Dibujar Marcador"),dt("button",{onClick:ht[3]||(ht[3]=mt=>Ht("edit")),class:"action-button edit-button"},"Editar Formas"),dt("button",{onClick:ht[4]||(ht[4]=mt=>Ht("delete")),class:"action-button delete-button"},"Borrar Formas"),x.value?(pe(),ke("button",{key:0,onClick:G,class:"action-button save-button"},"Guardar")):qs("",!0),x.value?(pe(),ke("button",{key:1,onClick:C,class:"action-button cancel-button"},"Cancelar")):qs("",!0)]),dt("button",{onClick:qt,class:"action-button locate-button"},[on(Pt,{icon:"location-crosshairs"}),ht[6]||(ht[6]=nc(" Localizar",-1))]),dt("button",{onClick:F,class:"action-button"},"Exportar Objetos")]),dt("div",RD,[on(SD,{features:f.value,"selected-feature-id":m.value,onFeatureSelected:fe,onVertexSelected:ln},null,8,["features","selected-feature-id"]),dt("main",{class:"map-container",ref_key:"mapElement",ref:r},null,512)])]),s.value?(pe(),na(fD,{key:0,flattenedFeatures:a.value.flattened,enrichedFeatures:a.value.enriched,projectName:n.value,onClose:ht[5]||(ht[5]=mt=>s.value=!1)},null,8,["flattenedFeatures","enrichedFeatures","projectName"])):qs("",!0),on(LD,{show:O.value,onConfirmed:Ze,onCancelled:It},null,8,["show"])])}}},ND=so(OD,[["__scopeId","data-v-c36e3f3c"]]),DD=[{path:"/",name:"Auth",component:px},{path:"/dashboard",name:"Dashboard",component:DR,meta:{requiresAuth:!0}},{path:"/project/:id",name:"MapView",component:ND,props:!0,meta:{requiresAuth:!0}}],iT=sx({history:O4("/relevamiento-gis-saas/"),routes:DD});iT.beforeEach((e,t,n)=>{e.matched.some(r=>r.meta.requiresAuth)&&!Kr.value?n({name:"Auth"}):e.name==="Auth"&&Kr.value?n({name:"Dashboard"}):n()});/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function Vm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function VD(e){if(Array.isArray(e))return e}function FD(e){if(Array.isArray(e))return Vm(e)}function GD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,rT(i.key),i)}}function zD(e,t,n){return t&&UD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function su(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C_(e))||t){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(h){throw h},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var h=n.next();return a=h.done,h},e:function(h){l=!0,s=h},f:function(){try{a||n.return==null||n.return()}finally{if(l)throw s}}}}function ne(e,t,n){return(t=rT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BD(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $D(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,s,a,l=[],h=!0,f=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);h=!0);}catch(m){f=!0,r=m}finally{try{if(!h&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function jD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l0(Object(n),!0).forEach(function(i){ne(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l0(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Vf(e,t){return VD(e)||$D(e,t)||C_(e,t)||jD()}function Pi(e){return FD(e)||BD(e)||C_(e)||qD()}function HD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rT(e){var t=HD(e,"string");return typeof t=="symbol"?t:t+""}function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function C_(e,t){if(e){if(typeof e=="string")return Vm(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vm(e,t):void 0}}var c0=function(){},k_={},sT={},oT=null,aT={mark:c0,measure:c0};try{typeof window<"u"&&(k_=window),typeof document<"u"&&(sT=document),typeof MutationObserver<"u"&&(oT=MutationObserver),typeof performance<"u"&&(aT=performance)}catch{}var WD=k_.navigator||{},h0=WD.userAgent,u0=h0===void 0?"":h0,ps=k_,Ee=sT,f0=oT,Dh=aT;ps.document;var Ar=!!Ee.documentElement&&!!Ee.head&&typeof Ee.addEventListener=="function"&&typeof Ee.createElement=="function",lT=~u0.indexOf("MSIE")||~u0.indexOf("Trident/"),Ad,KD=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,ZD=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,cT={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},YD={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},hT=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],yn="classic",Bc="duotone",uT="sharp",fT="sharp-duotone",dT="chisel",mT="etch",pT="jelly",_T="jelly-duo",gT="jelly-fill",vT="notdog",yT="notdog-duo",wT="slab",ET="slab-press",bT="thumbprint",TT="whiteboard",QD="Classic",XD="Duotone",JD="Sharp",t5="Sharp Duotone",e5="Chisel",n5="Etch",i5="Jelly",r5="Jelly Duo",s5="Jelly Fill",o5="Notdog",a5="Notdog Duo",l5="Slab",c5="Slab Press",h5="Thumbprint",u5="Whiteboard",PT=[yn,Bc,uT,fT,dT,mT,pT,_T,gT,vT,yT,wT,ET,bT,TT];Ad={},ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(Ad,yn,QD),Bc,XD),uT,JD),fT,t5),dT,e5),mT,n5),pT,i5),_T,r5),gT,s5),vT,o5),ne(ne(ne(ne(ne(Ad,yT,a5),wT,l5),ET,c5),bT,h5),TT,u5);var f5={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},d5={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},m5=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),p5={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},ST=["fak","fa-kit","fakd","fa-kit-duotone"],d0={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},_5=["kit"],g5="kit",v5="kit-duotone",y5="Kit",w5="Kit Duotone";ne(ne({},g5,y5),v5,w5);var E5={kit:{"fa-kit":"fak"}},b5={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},T5={kit:{fak:"fa-kit"}},m0={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Ld,Vh={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},P5=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],S5="classic",I5="duotone",M5="sharp",A5="sharp-duotone",L5="chisel",x5="etch",C5="jelly",k5="jelly-duo",R5="jelly-fill",O5="notdog",N5="notdog-duo",D5="slab",V5="slab-press",F5="thumbprint",G5="whiteboard",U5="Classic",z5="Duotone",B5="Sharp",$5="Sharp Duotone",j5="Chisel",q5="Etch",H5="Jelly",W5="Jelly Duo",K5="Jelly Fill",Z5="Notdog",Y5="Notdog Duo",Q5="Slab",X5="Slab Press",J5="Thumbprint",t9="Whiteboard";Ld={},ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(Ld,S5,U5),I5,z5),M5,B5),A5,$5),L5,j5),x5,q5),C5,H5),k5,W5),R5,K5),O5,Z5),ne(ne(ne(ne(ne(Ld,N5,Y5),D5,Q5),V5,X5),F5,J5),G5,t9);var e9="kit",n9="kit-duotone",i9="Kit",r9="Kit Duotone";ne(ne({},e9,i9),n9,r9);var s9={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},o9={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},Fm={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},a9=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],IT=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(P5,a9),l9=["solid","regular","light","thin","duotone","brands","semibold"],MT=[1,2,3,4,5,6,7,8,9,10],c9=MT.concat([11,12,13,14,15,16,17,18,19,20]),h9=["aw","fw","pull-left","pull-right"],u9=[].concat(Pi(Object.keys(o9)),l9,h9,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",Vh.GROUP,Vh.SWAP_OPACITY,Vh.PRIMARY,Vh.SECONDARY]).concat(MT.map(function(e){return"".concat(e,"x")})).concat(c9.map(function(e){return"w-".concat(e)})),f9={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Tr="___FONT_AWESOME___",Gm=16,AT="fa",LT="svg-inline--fa",no="data-fa-i2svg",Um="data-fa-pseudo-element",d9="data-fa-pseudo-element-pending",R_="data-prefix",O_="data-icon",p0="fontawesome-i2svg",m9="async",p9=["HTML","HEAD","STYLE","SCRIPT"],xT=["::before","::after",":before",":after"],CT=function(){try{return!0}catch{return!1}}();function $c(e){return new Proxy(e,{get:function(n,i){return i in n?n[i]:n[yn]}})}var kT=st({},cT);kT[yn]=st(st(st(st({},{"fa-duotone":"duotone"}),cT[yn]),d0.kit),d0["kit-duotone"]);var _9=$c(kT),zm=st({},p5);zm[yn]=st(st(st(st({},{duotone:"fad"}),zm[yn]),m0.kit),m0["kit-duotone"]);var _0=$c(zm),Bm=st({},Fm);Bm[yn]=st(st({},Bm[yn]),T5.kit);var RT=$c(Bm),$m=st({},s9);$m[yn]=st(st({},$m[yn]),E5.kit);$c($m);var g9=KD,OT="fa-layers-text",v9=ZD,y9=st({},f5);$c(y9);var w9=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],xd=YD,E9=[].concat(Pi(_5),Pi(u9)),Zl=ps.FontAwesomeConfig||{};function b9(e){var t=Ee.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function T9(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Ee&&typeof Ee.querySelector=="function"){var P9=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];P9.forEach(function(e){var t=Vf(e,2),n=t[0],i=t[1],r=T9(b9(n));r!=null&&(Zl[i]=r)})}var NT={styleDefault:"solid",familyDefault:yn,cssPrefix:AT,replacementClass:LT,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Zl.familyPrefix&&(Zl.cssPrefix=Zl.familyPrefix);var Ta=st(st({},NT),Zl);Ta.autoReplaceSvg||(Ta.observeMutations=!1);var Ct={};Object.keys(NT).forEach(function(e){Object.defineProperty(Ct,e,{enumerable:!0,set:function(n){Ta[e]=n,Yl.forEach(function(i){return i(Ct)})},get:function(){return Ta[e]}})});Object.defineProperty(Ct,"familyPrefix",{enumerable:!0,set:function(t){Ta.cssPrefix=t,Yl.forEach(function(n){return n(Ct)})},get:function(){return Ta.cssPrefix}});ps.FontAwesomeConfig=Ct;var Yl=[];function S9(e){return Yl.push(e),function(){Yl.splice(Yl.indexOf(e),1)}}var No=Gm,Di={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function I9(e){if(!(!e||!Ar)){var t=Ee.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Ee.head.childNodes,i=null,r=n.length-1;r>-1;r--){var s=n[r],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=s)}return Ee.head.insertBefore(t,i),e}}var M9="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function g0(){for(var e=12,t="";e-- >0;)t+=M9[Math.random()*62|0];return t}function ka(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function N_(e){return e.classList?ka(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function DT(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function A9(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(DT(e[n]),'" ')},"").trim()}function Ff(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function D_(e){return e.size!==Di.size||e.x!==Di.x||e.y!==Di.y||e.rotate!==Di.rotate||e.flipX||e.flipY}function L9(e){var t=e.transform,n=e.containerWidth,i=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),h={transform:"".concat(s," ").concat(a," ").concat(l)},f={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:h,path:f}}function x9(e){var t=e.transform,n=e.width,i=n===void 0?Gm:n,r=e.height,s=r===void 0?Gm:r,a="";return lT?a+="translate(".concat(t.x/No-i/2,"em, ").concat(t.y/No-s/2,"em) "):a+="translate(calc(-50% + ".concat(t.x/No,"em), calc(-50% + ").concat(t.y/No,"em)) "),a+="scale(".concat(t.size/No*(t.flipX?-1:1),", ").concat(t.size/No*(t.flipY?-1:1),") "),a+="rotate(".concat(t.rotate,"deg) "),a}var C9=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function VT(){var e=AT,t=LT,n=Ct.cssPrefix,i=Ct.replacementClass,r=C9;if(n!==e||i!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");r=r.replace(s,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(l,".".concat(i))}return r}var v0=!1;function Cd(){Ct.autoAddCss&&!v0&&(I9(VT()),v0=!0)}var k9={mixout:function(){return{dom:{css:VT,insertCss:Cd}}},hooks:function(){return{beforeDOMElementCreation:function(){Cd()},beforeI2svg:function(){Cd()}}}},Pr=ps||{};Pr[Tr]||(Pr[Tr]={});Pr[Tr].styles||(Pr[Tr].styles={});Pr[Tr].hooks||(Pr[Tr].hooks={});Pr[Tr].shims||(Pr[Tr].shims=[]);var _i=Pr[Tr],FT=[],GT=function(){Ee.removeEventListener("DOMContentLoaded",GT),Ku=1,FT.map(function(t){return t()})},Ku=!1;Ar&&(Ku=(Ee.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ee.readyState),Ku||Ee.addEventListener("DOMContentLoaded",GT));function R9(e){Ar&&(Ku?setTimeout(e,0):FT.push(e))}function jc(e){var t=e.tag,n=e.attributes,i=n===void 0?{}:n,r=e.children,s=r===void 0?[]:r;return typeof e=="string"?DT(e):"<".concat(t," ").concat(A9(i),">").concat(s.map(jc).join(""),"</").concat(t,">")}function y0(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var kd=function(t,n,i,r){var s=Object.keys(t),a=s.length,l=n,h,f,m;for(i===void 0?(h=1,m=t[s[0]]):(h=0,m=i);h<a;h++)f=s[h],m=l(m,t[f],f,t);return m};function UT(e){return Pi(e).length!==1?null:e.codePointAt(0).toString(16)}function w0(e){return Object.keys(e).reduce(function(t,n){var i=e[n],r=!!i.icon;return r?t[i.iconName]=i.icon:t[n]=i,t},{})}function zT(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.skipHooks,r=i===void 0?!1:i,s=w0(t);typeof _i.hooks.addPack=="function"&&!r?_i.hooks.addPack(e,w0(t)):_i.styles[e]=st(st({},_i.styles[e]||{}),s),e==="fas"&&zT("fa",t)}var wc=_i.styles,O9=_i.shims,BT=Object.keys(RT),N9=BT.reduce(function(e,t){return e[t]=Object.keys(RT[t]),e},{}),V_=null,$T={},jT={},qT={},HT={},WT={};function D9(e){return~E9.indexOf(e)}function V9(e,t){var n=t.split("-"),i=n[0],r=n.slice(1).join("-");return i===e&&r!==""&&!D9(r)?r:null}var KT=function(){var t=function(s){return kd(wc,function(a,l,h){return a[h]=kd(l,s,{}),a},{})};$T=t(function(r,s,a){if(s[3]&&(r[s[3]]=a),s[2]){var l=s[2].filter(function(h){return typeof h=="number"});l.forEach(function(h){r[h.toString(16)]=a})}return r}),jT=t(function(r,s,a){if(r[a]=a,s[2]){var l=s[2].filter(function(h){return typeof h=="string"});l.forEach(function(h){r[h]=a})}return r}),WT=t(function(r,s,a){var l=s[2];return r[a]=a,l.forEach(function(h){r[h]=a}),r});var n="far"in wc||Ct.autoFetchSvg,i=kd(O9,function(r,s){var a=s[0],l=s[1],h=s[2];return l==="far"&&!n&&(l="fas"),typeof a=="string"&&(r.names[a]={prefix:l,iconName:h}),typeof a=="number"&&(r.unicodes[a.toString(16)]={prefix:l,iconName:h}),r},{names:{},unicodes:{}});qT=i.names,HT=i.unicodes,V_=Gf(Ct.styleDefault,{family:Ct.familyDefault})};S9(function(e){V_=Gf(e.styleDefault,{family:Ct.familyDefault})});KT();function F_(e,t){return($T[e]||{})[t]}function F9(e,t){return(jT[e]||{})[t]}function $s(e,t){return(WT[e]||{})[t]}function ZT(e){return qT[e]||{prefix:null,iconName:null}}function G9(e){var t=HT[e],n=F_("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function _s(){return V_}var YT=function(){return{prefix:null,iconName:null,rest:[]}};function U9(e){var t=yn,n=BT.reduce(function(i,r){return i[r]="".concat(Ct.cssPrefix,"-").concat(r),i},{});return PT.forEach(function(i){(e.includes(n[i])||e.some(function(r){return N9[i].includes(r)}))&&(t=i)}),t}function Gf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,i=n===void 0?yn:n,r=_9[i][e];if(i===Bc&&!e)return"fad";var s=_0[i][e]||_0[i][r],a=e in _i.styles?e:null,l=s||a||null;return l}function z9(e){var t=[],n=null;return e.forEach(function(i){var r=V9(Ct.cssPrefix,i);r?n=r:i&&t.push(i)}),{iconName:n,rest:t}}function E0(e){return e.sort().filter(function(t,n,i){return i.indexOf(t)===n})}var b0=IT.concat(ST);function Uf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.skipLookups,i=n===void 0?!1:n,r=null,s=E0(e.filter(function(E){return b0.includes(E)})),a=E0(e.filter(function(E){return!b0.includes(E)})),l=s.filter(function(E){return r=E,!hT.includes(E)}),h=Vf(l,1),f=h[0],m=f===void 0?null:f,p=U9(s),g=st(st({},z9(a)),{},{prefix:Gf(m,{family:p})});return st(st(st({},g),q9({values:e,family:p,styles:wc,config:Ct,canonical:g,givenPrefix:r})),B9(i,r,g))}function B9(e,t,n){var i=n.prefix,r=n.iconName;if(e||!i||!r)return{prefix:i,iconName:r};var s=t==="fa"?ZT(r):{},a=$s(i,r);return r=s.iconName||a||r,i=s.prefix||i,i==="far"&&!wc.far&&wc.fas&&!Ct.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}var $9=PT.filter(function(e){return e!==yn||e!==Bc}),j9=Object.keys(Fm).filter(function(e){return e!==yn}).map(function(e){return Object.keys(Fm[e])}).flat();function q9(e){var t=e.values,n=e.family,i=e.canonical,r=e.givenPrefix,s=r===void 0?"":r,a=e.styles,l=a===void 0?{}:a,h=e.config,f=h===void 0?{}:h,m=n===Bc,p=t.includes("fa-duotone")||t.includes("fad"),g=f.familyDefault==="duotone",E=i.prefix==="fad"||i.prefix==="fa-duotone";if(!m&&(p||g||E)&&(i.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(i.prefix="fab"),!i.prefix&&$9.includes(n)){var T=Object.keys(l).find(function(x){return j9.includes(x)});if(T||f.autoFetchSvg){var P=m5.get(n).defaultShortPrefixId;i.prefix=P,i.iconName=$s(i.prefix,i.iconName)||i.iconName}}return(i.prefix==="fa"||s==="fa")&&(i.prefix=_s()||"fas"),i}var H9=function(){function e(){GD(this,e),this.definitions={}}return zD(e,[{key:"add",value:function(){for(var n=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var a=r.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(l){n.definitions[l]=st(st({},n.definitions[l]||{}),a[l]),zT(l,a[l]),KT()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var a=r[s],l=a.prefix,h=a.iconName,f=a.icon,m=f[2];n[l]||(n[l]={}),m.length>0&&m.forEach(function(p){typeof p=="string"&&(n[l][p]=f)}),n[l][h]=f}),n}}])}(),T0=[],Zo={},ha={},W9=Object.keys(ha);function K9(e,t){var n=t.mixoutsTo;return T0=e,Zo={},Object.keys(ha).forEach(function(i){W9.indexOf(i)===-1&&delete ha[i]}),T0.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(a){typeof r[a]=="function"&&(n[a]=r[a]),Wu(r[a])==="object"&&Object.keys(r[a]).forEach(function(l){n[a]||(n[a]={}),n[a][l]=r[a][l]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(a){Zo[a]||(Zo[a]=[]),Zo[a].push(s[a])})}i.provides&&i.provides(ha)}),n}function jm(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s=Zo[e]||[];return s.forEach(function(a){t=a.apply(null,[t].concat(i))}),t}function io(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=Zo[e]||[];r.forEach(function(s){s.apply(null,n)})}function gs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ha[e]?ha[e].apply(null,t):void 0}function qm(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||_s();if(t)return t=$s(n,t)||t,y0(QT.definitions,n,t)||y0(_i.styles,n,t)}var QT=new H9,Z9=function(){Ct.autoReplaceSvg=!1,Ct.observeMutations=!1,io("noAuto")},Y9={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ar?(io("beforeI2svg",t),gs("pseudoElements2svg",t),gs("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;Ct.autoReplaceSvg===!1&&(Ct.autoReplaceSvg=!0),Ct.observeMutations=!0,R9(function(){X9({autoReplaceSvgRoot:n}),io("watch",t)})}},Q9={icon:function(t){if(t===null)return null;if(Wu(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:$s(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],i=Gf(t[0]);return{prefix:i,iconName:$s(i,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(Ct.cssPrefix,"-"))>-1||t.match(g9))){var r=Uf(t.split(" "),{skipLookups:!0});return{prefix:r.prefix||_s(),iconName:$s(r.prefix,r.iconName)||r.iconName}}if(typeof t=="string"){var s=_s();return{prefix:s,iconName:$s(s,t)||t}}}},qn={noAuto:Z9,config:Ct,dom:Y9,parse:Q9,library:QT,findIconDefinition:qm,toHtml:jc},X9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,i=n===void 0?Ee:n;(Object.keys(_i.styles).length>0||Ct.autoFetchSvg)&&Ar&&Ct.autoReplaceSvg&&qn.dom.i2svg({node:i})};function zf(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(i){return jc(i)})}}),Object.defineProperty(e,"node",{get:function(){if(Ar){var i=Ee.createElement("div");return i.innerHTML=e.html,i.children}}}),e}function J9(e){var t=e.children,n=e.main,i=e.mask,r=e.attributes,s=e.styles,a=e.transform;if(D_(a)&&n.found&&!i.found){var l=n.width,h=n.height,f={x:l/h/2,y:.5};r.style=Ff(st(st({},s),{},{"transform-origin":"".concat(f.x+a.x/16,"em ").concat(f.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}function t7(e){var t=e.prefix,n=e.iconName,i=e.children,r=e.attributes,s=e.symbol,a=s===!0?"".concat(t,"-").concat(Ct.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:st(st({},r),{},{id:a}),children:i}]}]}function e7(e){var t=["aria-label","aria-labelledby","title","role"];return t.some(function(n){return n in e})}function G_(e){var t=e.icons,n=t.main,i=t.mask,r=e.prefix,s=e.iconName,a=e.transform,l=e.symbol,h=e.maskId,f=e.extra,m=e.watchable,p=m===void 0?!1:m,g=i.found?i:n,E=g.width,T=g.height,P=[Ct.replacementClass,s?"".concat(Ct.cssPrefix,"-").concat(s):""].filter(function(J){return f.classes.indexOf(J)===-1}).filter(function(J){return J!==""||!!J}).concat(f.classes).join(" "),x={children:[],attributes:st(st({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:P,role:f.attributes.role||"img",viewBox:"0 0 ".concat(E," ").concat(T)})};!e7(f.attributes)&&!f.attributes["aria-hidden"]&&(x.attributes["aria-hidden"]="true"),p&&(x.attributes[no]="");var O=st(st({},x),{},{prefix:r,iconName:s,main:n,mask:i,maskId:h,transform:a,symbol:l,styles:st({},f.styles)}),V=i.found&&n.found?gs("generateAbstractMask",O)||{children:[],attributes:{}}:gs("generateAbstractIcon",O)||{children:[],attributes:{}},U=V.children,q=V.attributes;return O.children=U,O.attributes=q,l?t7(O):J9(O)}function P0(e){var t=e.content,n=e.width,i=e.height,r=e.transform,s=e.extra,a=e.watchable,l=a===void 0?!1:a,h=st(st({},s.attributes),{},{class:s.classes.join(" ")});l&&(h[no]="");var f=st({},s.styles);D_(r)&&(f.transform=x9({transform:r,width:n,height:i}),f["-webkit-transform"]=f.transform);var m=Ff(f);m.length>0&&(h.style=m);var p=[];return p.push({tag:"span",attributes:h,children:[t]}),p}function n7(e){var t=e.content,n=e.extra,i=st(st({},n.attributes),{},{class:n.classes.join(" ")}),r=Ff(n.styles);r.length>0&&(i.style=r);var s=[];return s.push({tag:"span",attributes:i,children:[t]}),s}var Rd=_i.styles;function Hm(e){var t=e[0],n=e[1],i=e.slice(4),r=Vf(i,1),s=r[0],a=null;return Array.isArray(s)?a={tag:"g",attributes:{class:"".concat(Ct.cssPrefix,"-").concat(xd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ct.cssPrefix,"-").concat(xd.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Ct.cssPrefix,"-").concat(xd.PRIMARY),fill:"currentColor",d:s[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:t,height:n,icon:a}}var i7={found:!1,width:512,height:512};function r7(e,t){!CT&&!Ct.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Wm(e,t){var n=t;return t==="fa"&&Ct.styleDefault!==null&&(t=_s()),new Promise(function(i,r){if(n==="fa"){var s=ZT(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&Rd[t]&&Rd[t][e]){var a=Rd[t][e];return i(Hm(a))}r7(e,t),i(st(st({},i7),{},{icon:Ct.showMissingIcons&&e?gs("missingIconAbstract")||{}:{}}))})}var S0=function(){},Km=Ct.measurePerformance&&Dh&&Dh.mark&&Dh.measure?Dh:{mark:S0,measure:S0},Il='FA "7.0.0"',s7=function(t){return Km.mark("".concat(Il," ").concat(t," begins")),function(){return XT(t)}},XT=function(t){Km.mark("".concat(Il," ").concat(t," ends")),Km.measure("".concat(Il," ").concat(t),"".concat(Il," ").concat(t," begins"),"".concat(Il," ").concat(t," ends"))},U_={begin:s7,end:XT},ou=function(){};function I0(e){var t=e.getAttribute?e.getAttribute(no):null;return typeof t=="string"}function o7(e){var t=e.getAttribute?e.getAttribute(R_):null,n=e.getAttribute?e.getAttribute(O_):null;return t&&n}function a7(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Ct.replacementClass)}function l7(){if(Ct.autoReplaceSvg===!0)return au.replace;var e=au[Ct.autoReplaceSvg];return e||au.replace}function c7(e){return Ee.createElementNS("http://www.w3.org/2000/svg",e)}function h7(e){return Ee.createElement(e)}function JT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,i=n===void 0?e.tag==="svg"?c7:h7:n;if(typeof e=="string")return Ee.createTextNode(e);var r=i(e.tag);Object.keys(e.attributes||[]).forEach(function(a){r.setAttribute(a,e.attributes[a])});var s=e.children||[];return s.forEach(function(a){r.appendChild(JT(a,{ceFn:i}))}),r}function u7(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var au={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(r){n.parentNode.insertBefore(JT(r),n)}),n.getAttribute(no)===null&&Ct.keepOriginalSource){var i=Ee.createComment(u7(n));n.parentNode.replaceChild(i,n)}else n.remove()},nest:function(t){var n=t[0],i=t[1];if(~N_(n).indexOf(Ct.replacementClass))return au.replace(t);var r=new RegExp("".concat(Ct.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(l,h){return h===Ct.replacementClass||h.match(r)?l.toSvg.push(h):l.toNode.push(h),l},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var a=i.map(function(l){return jc(l)}).join(`
`);n.setAttribute(no,""),n.innerHTML=a}};function M0(e){e()}function tP(e,t){var n=typeof t=="function"?t:ou;if(e.length===0)n();else{var i=M0;Ct.mutateApproach===m9&&(i=ps.requestAnimationFrame||M0),i(function(){var r=l7(),s=U_.begin("mutate");e.map(r),s(),n()})}}var z_=!1;function eP(){z_=!0}function Zm(){z_=!1}var Zu=null;function A0(e){if(f0&&Ct.observeMutations){var t=e.treeCallback,n=t===void 0?ou:t,i=e.nodeCallback,r=i===void 0?ou:i,s=e.pseudoElementsCallback,a=s===void 0?ou:s,l=e.observeMutationsRoot,h=l===void 0?Ee:l;Zu=new f0(function(f){if(!z_){var m=_s();ka(f).forEach(function(p){if(p.type==="childList"&&p.addedNodes.length>0&&!I0(p.addedNodes[0])&&(Ct.searchPseudoElements&&a(p.target),n(p.target)),p.type==="attributes"&&p.target.parentNode&&Ct.searchPseudoElements&&a([p.target],!0),p.type==="attributes"&&I0(p.target)&&~w9.indexOf(p.attributeName))if(p.attributeName==="class"&&o7(p.target)){var g=Uf(N_(p.target)),E=g.prefix,T=g.iconName;p.target.setAttribute(R_,E||m),T&&p.target.setAttribute(O_,T)}else a7(p.target)&&r(p.target)})}}),Ar&&Zu.observe(h,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function f7(){Zu&&Zu.disconnect()}function d7(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(i,r){var s=r.split(":"),a=s[0],l=s.slice(1);return a&&l.length>0&&(i[a]=l.join(":").trim()),i},{})),n}function m7(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),i=e.innerText!==void 0?e.innerText.trim():"",r=Uf(N_(e));return r.prefix||(r.prefix=_s()),t&&n&&(r.prefix=t,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=F9(r.prefix,e.innerText)||F_(r.prefix,UT(e.innerText))),!r.iconName&&Ct.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=e.firstChild.data)),r}function p7(e){var t=ka(e.attributes).reduce(function(n,i){return n.name!=="class"&&n.name!=="style"&&(n[i.name]=i.value),n},{});return t}function _7(){return{iconName:null,prefix:null,transform:Di,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function L0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=m7(e),i=n.iconName,r=n.prefix,s=n.rest,a=p7(e),l=jm("parseNodeAttributes",{},e),h=t.styleParser?d7(e):[];return st({iconName:i,prefix:r,transform:Di,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:h,attributes:a}},l)}var g7=_i.styles;function nP(e){var t=Ct.autoReplaceSvg==="nest"?L0(e,{styleParser:!1}):L0(e);return~t.extra.classes.indexOf(OT)?gs("generateLayersText",e,t):gs("generateSvgReplacementMutation",e,t)}function v7(){return[].concat(Pi(ST),Pi(IT))}function x0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ar)return Promise.resolve();var n=Ee.documentElement.classList,i=function(p){return n.add("".concat(p0,"-").concat(p))},r=function(p){return n.remove("".concat(p0,"-").concat(p))},s=Ct.autoFetchSvg?v7():hT.concat(Object.keys(g7));s.includes("fa")||s.push("fa");var a=[".".concat(OT,":not([").concat(no,"])")].concat(s.map(function(m){return".".concat(m,":not([").concat(no,"])")})).join(", ");if(a.length===0)return Promise.resolve();var l=[];try{l=ka(e.querySelectorAll(a))}catch{}if(l.length>0)i("pending"),r("complete");else return Promise.resolve();var h=U_.begin("onTree"),f=l.reduce(function(m,p){try{var g=nP(p);g&&m.push(g)}catch(E){CT||E.name==="MissingIcon"&&console.error(E)}return m},[]);return new Promise(function(m,p){Promise.all(f).then(function(g){tP(g,function(){i("active"),i("complete"),r("pending"),typeof t=="function"&&t(),h(),m()})}).catch(function(g){h(),p(g)})})}function y7(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;nP(e).then(function(n){n&&tP([n],t)})}function w7(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(t||{}).icon?t:qm(t||{}),r=n.mask;return r&&(r=(r||{}).icon?r:qm(r||{})),e(i,st(st({},n),{},{mask:r}))}}var E7=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.transform,r=i===void 0?Di:i,s=n.symbol,a=s===void 0?!1:s,l=n.mask,h=l===void 0?null:l,f=n.maskId,m=f===void 0?null:f,p=n.classes,g=p===void 0?[]:p,E=n.attributes,T=E===void 0?{}:E,P=n.styles,x=P===void 0?{}:P;if(t){var O=t.prefix,V=t.iconName,U=t.icon;return zf(st({type:"icon"},t),function(){return io("beforeDOMElementCreation",{iconDefinition:t,params:n}),G_({icons:{main:Hm(U),mask:h?Hm(h.icon):{found:!1,width:null,height:null,icon:{}}},prefix:O,iconName:V,transform:st(st({},Di),r),symbol:a,maskId:m,extra:{attributes:T,styles:x,classes:g}})})}},b7={mixout:function(){return{icon:w7(E7)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=x0,n.nodeCallback=y7,n}}},provides:function(t){t.i2svg=function(n){var i=n.node,r=i===void 0?Ee:i,s=n.callback,a=s===void 0?function(){}:s;return x0(r,a)},t.generateSvgReplacementMutation=function(n,i){var r=i.iconName,s=i.prefix,a=i.transform,l=i.symbol,h=i.mask,f=i.maskId,m=i.extra;return new Promise(function(p,g){Promise.all([Wm(r,s),h.iconName?Wm(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(E){var T=Vf(E,2),P=T[0],x=T[1];p([n,G_({icons:{main:P,mask:x},prefix:s,iconName:r,transform:a,symbol:l,maskId:f,extra:m,watchable:!0})])}).catch(g)})},t.generateAbstractIcon=function(n){var i=n.children,r=n.attributes,s=n.main,a=n.transform,l=n.styles,h=Ff(l);h.length>0&&(r.style=h);var f;return D_(a)&&(f=gs("generateAbstractTransformGrouping",{main:s,transform:a,containerWidth:s.width,iconWidth:s.width})),i.push(f||s.icon),{children:i,attributes:r}}}},T7={mixout:function(){return{layer:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.classes,s=r===void 0?[]:r;return zf({type:"layer"},function(){io("beforeDOMElementCreation",{assembler:n,params:i});var a=[];return n(function(l){Array.isArray(l)?l.map(function(h){a=a.concat(h.abstract)}):a=a.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(Ct.cssPrefix,"-layers")].concat(Pi(s)).join(" ")},children:a}]})}}}},P7={mixout:function(){return{counter:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.title;var r=i.classes,s=r===void 0?[]:r,a=i.attributes,l=a===void 0?{}:a,h=i.styles,f=h===void 0?{}:h;return zf({type:"counter",content:n},function(){return io("beforeDOMElementCreation",{content:n,params:i}),n7({content:n.toString(),extra:{attributes:l,styles:f,classes:["".concat(Ct.cssPrefix,"-layers-counter")].concat(Pi(s))}})})}}}},S7={mixout:function(){return{text:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.transform,s=r===void 0?Di:r,a=i.classes,l=a===void 0?[]:a,h=i.attributes,f=h===void 0?{}:h,m=i.styles,p=m===void 0?{}:m;return zf({type:"text",content:n},function(){return io("beforeDOMElementCreation",{content:n,params:i}),P0({content:n,transform:st(st({},Di),s),extra:{attributes:f,styles:p,classes:["".concat(Ct.cssPrefix,"-layers-text")].concat(Pi(l))}})})}}},provides:function(t){t.generateLayersText=function(n,i){var r=i.transform,s=i.extra,a=null,l=null;if(lT){var h=parseInt(getComputedStyle(n).fontSize,10),f=n.getBoundingClientRect();a=f.width/h,l=f.height/h}return Promise.resolve([n,P0({content:n.innerHTML,width:a,height:l,transform:r,extra:s,watchable:!0})])}}},iP=new RegExp('"',"ug"),C0=[1105920,1112319],k0=st(st(st(st({},{FontAwesome:{normal:"fas",400:"fas"}}),d5),f9),b5),Ym=Object.keys(k0).reduce(function(e,t){return e[t.toLowerCase()]=k0[t],e},{}),I7=Object.keys(Ym).reduce(function(e,t){var n=Ym[t];return e[t]=n[900]||Pi(Object.entries(n))[0][1],e},{});function M7(e){var t=e.replace(iP,"");return UT(Pi(t)[0]||"")}function A7(e){var t=e.getPropertyValue("font-feature-settings").includes("ss01"),n=e.getPropertyValue("content"),i=n.replace(iP,""),r=i.codePointAt(0),s=r>=C0[0]&&r<=C0[1],a=i.length===2?i[0]===i[1]:!1;return s||a||t}function L7(e,t){var n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(t),r=isNaN(i)?"normal":i;return(Ym[n]||{})[r]||I7[n]}function R0(e,t){var n="".concat(d9).concat(t.replace(":","-"));return new Promise(function(i,r){if(e.getAttribute(n)!==null)return i();var s=ka(e.children),a=s.filter(function(at){return at.getAttribute(Um)===t})[0],l=ps.getComputedStyle(e,t),h=l.getPropertyValue("font-family"),f=h.match(v9),m=l.getPropertyValue("font-weight"),p=l.getPropertyValue("content");if(a&&!f)return e.removeChild(a),i();if(f&&p!=="none"&&p!==""){var g=l.getPropertyValue("content"),E=L7(h,m),T=M7(g),P=f[0].startsWith("FontAwesome"),x=A7(l),O=F_(E,T),V=O;if(P){var U=G9(T);U.iconName&&U.prefix&&(O=U.iconName,E=U.prefix)}if(O&&!x&&(!a||a.getAttribute(R_)!==E||a.getAttribute(O_)!==V)){e.setAttribute(n,V),a&&e.removeChild(a);var q=_7(),J=q.extra;J.attributes[Um]=t,Wm(O,E).then(function(at){var k=G_(st(st({},q),{},{icons:{main:at,mask:YT()},prefix:E,iconName:V,extra:J,watchable:!0})),I=Ee.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(I,e.firstChild):e.appendChild(I),I.outerHTML=k.map(function(M){return jc(M)}).join(`
`),e.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function x7(e){return Promise.all([R0(e,"::before"),R0(e,"::after")])}function C7(e){return e.parentNode!==document.head&&!~p9.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Um)&&(!e.parentNode||e.parentNode.tagName!=="svg")}var k7=function(t){return!!t&&xT.some(function(n){return t.includes(n)})},R7=function(t){if(!t)return[];for(var n=new Set,i=[t],r=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],s=function(){var E=l[a];i=i.flatMap(function(T){return T.split(E).map(function(P){return P.replace(/,\s*$/,"").trim()})})},a=0,l=r;a<l.length;a++)s();i=i.flatMap(function(g){return g.includes("(")?g:g.split(",").map(function(E){return E.trim()})});var h=su(i),f;try{for(h.s();!(f=h.n()).done;){var m=f.value;if(k7(m)){var p=xT.reduce(function(g,E){return g.replace(E,"")},m);p!==""&&p!=="*"&&n.add(p)}}}catch(g){h.e(g)}finally{h.f()}return n};function O0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ar){var n;if(t)n=e;else if(Ct.searchPseudoElementsFullScan)n=e.querySelectorAll("*");else{var i=new Set,r=su(document.styleSheets),s;try{for(r.s();!(s=r.n()).done;){var a=s.value;try{var l=su(a.cssRules),h;try{for(l.s();!(h=l.n()).done;){var f=h.value,m=R7(f.selectorText),p=su(m),g;try{for(p.s();!(g=p.n()).done;){var E=g.value;i.add(E)}}catch(P){p.e(P)}finally{p.f()}}}catch(P){l.e(P)}finally{l.f()}}catch(P){Ct.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(a.href," (").concat(P.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(P){r.e(P)}finally{r.f()}if(!i.size)return;var T=Array.from(i).join(", ");try{n=e.querySelectorAll(T)}catch{}}return new Promise(function(P,x){var O=ka(n).filter(C7).map(x7),V=U_.begin("searchPseudoElements");eP(),Promise.all(O).then(function(){V(),Zm(),P()}).catch(function(){V(),Zm(),x()})})}}var O7={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=O0,n}}},provides:function(t){t.pseudoElements2svg=function(n){var i=n.node,r=i===void 0?Ee:i;Ct.searchPseudoElements&&O0(r)}}},N0=!1,N7={mixout:function(){return{dom:{unwatch:function(){eP(),N0=!0}}}},hooks:function(){return{bootstrap:function(){A0(jm("mutationObserverCallbacks",{}))},noAuto:function(){f7()},watch:function(n){var i=n.observeMutationsRoot;N0?Zm():A0(jm("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},D0=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),a=s[0],l=s.slice(1).join("-");if(a&&l==="h")return i.flipX=!0,i;if(a&&l==="v")return i.flipY=!0,i;if(l=parseFloat(l),isNaN(l))return i;switch(a){case"grow":i.size=i.size+l;break;case"shrink":i.size=i.size-l;break;case"left":i.x=i.x-l;break;case"right":i.x=i.x+l;break;case"up":i.y=i.y-l;break;case"down":i.y=i.y+l;break;case"rotate":i.rotate=i.rotate+l;break}return i},n)},D7={mixout:function(){return{parse:{transform:function(n){return D0(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,i){var r=i.getAttribute("data-fa-transform");return r&&(n.transform=D0(r)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var i=n.main,r=n.transform,s=n.containerWidth,a=n.iconWidth,l={transform:"translate(".concat(s/2," 256)")},h="translate(".concat(r.x*32,", ").concat(r.y*32,") "),f="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),m="rotate(".concat(r.rotate," 0 0)"),p={transform:"".concat(h," ").concat(f," ").concat(m)},g={transform:"translate(".concat(a/2*-1," -256)")},E={outer:l,inner:p,path:g};return{tag:"g",attributes:st({},E.outer),children:[{tag:"g",attributes:st({},E.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:st(st({},i.icon.attributes),E.path)}]}]}}}},Od={x:0,y:0,width:"100%",height:"100%"};function V0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function V7(e){return e.tag==="g"?e.children:[e]}var F7={hooks:function(){return{parseNodeAttributes:function(n,i){var r=i.getAttribute("data-fa-mask"),s=r?Uf(r.split(" ").map(function(a){return a.trim()})):YT();return s.prefix||(s.prefix=_s()),n.mask=s,n.maskId=i.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var i=n.children,r=n.attributes,s=n.main,a=n.mask,l=n.maskId,h=n.transform,f=s.width,m=s.icon,p=a.width,g=a.icon,E=L9({transform:h,containerWidth:p,iconWidth:f}),T={tag:"rect",attributes:st(st({},Od),{},{fill:"white"})},P=m.children?{children:m.children.map(V0)}:{},x={tag:"g",attributes:st({},E.inner),children:[V0(st({tag:m.tag,attributes:st(st({},m.attributes),E.path)},P))]},O={tag:"g",attributes:st({},E.outer),children:[x]},V="mask-".concat(l||g0()),U="clip-".concat(l||g0()),q={tag:"mask",attributes:st(st({},Od),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[T,O]},J={tag:"defs",children:[{tag:"clipPath",attributes:{id:U},children:V7(g)},q]};return i.push(J,{tag:"rect",attributes:st({fill:"currentColor","clip-path":"url(#".concat(U,")"),mask:"url(#".concat(V,")")},Od)}),{children:i,attributes:r}}}},G7={provides:function(t){var n=!1;ps.matchMedia&&(n=ps.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:st(st({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=st(st({},s),{},{attributeName:"opacity"}),l={tag:"circle",attributes:st(st({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||l.children.push({tag:"animate",attributes:st(st({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:st(st({},a),{},{values:"1;0;1;1;0;1;"})}),i.push(l),i.push({tag:"path",attributes:st(st({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:st(st({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||i.push({tag:"path",attributes:st(st({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:st(st({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},U7={hooks:function(){return{parseNodeAttributes:function(n,i){var r=i.getAttribute("data-fa-symbol"),s=r===null?!1:r===""?!0:r;return n.symbol=s,n}}}},z7=[k9,b7,T7,P7,S7,O7,N7,D7,F7,G7,U7];K9(z7,{mixoutsTo:qn});qn.noAuto;qn.config;var B7=qn.library,$7=qn.dom,Qm=qn.parse;qn.findIconDefinition;qn.toHtml;var j7=qn.icon;qn.layer;qn.text;qn.counter;function hn(e,t,n){return(t=K7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F0(Object(n),!0).forEach(function(i){hn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function q7(e,t){if(e==null)return{};var n,i,r=H7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H7(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function W7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K7(e){var t=W7(e,"string");return typeof t=="symbol"?t:t+""}function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function Nd(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?hn({},e,t):{}}function Z7(e){var t,n=(t={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":e.flip===!0,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both"},hn(hn(hn(hn(hn(hn(hn(hn(hn(hn(t,"fa-".concat(e.size),e.size!==null),"fa-rotate-".concat(e.rotation),e.rotation!==null),"fa-rotate-by",e.rotateBy),"fa-pull-".concat(e.pull),e.pull!==null),"fa-swap-opacity",e.swapOpacity),"fa-bounce",e.bounce),"fa-shake",e.shake),"fa-beat",e.beat),"fa-fade",e.fade),"fa-beat-fade",e.beatFade),hn(hn(hn(hn(t,"fa-flash",e.flash),"fa-spin-pulse",e.spinPulse),"fa-spin-reverse",e.spinReverse),"fa-width-auto",e.widthAuto));return Object.keys(n).map(function(i){return n[i]?i:null}).filter(function(i){return i})}var Y7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rP={exports:{}};(function(e){(function(t){var n=function(O,V,U){if(!f(V)||p(V)||g(V)||E(V)||h(V))return V;var q,J=0,at=0;if(m(V))for(q=[],at=V.length;J<at;J++)q.push(n(O,V[J],U));else{q={};for(var k in V)Object.prototype.hasOwnProperty.call(V,k)&&(q[O(k,U)]=n(O,V[k],U))}return q},i=function(O,V){V=V||{};var U=V.separator||"_",q=V.split||/(?=[A-Z])/;return O.split(q).join(U)},r=function(O){return T(O)?O:(O=O.replace(/[\-_\s]+(.)?/g,function(V,U){return U?U.toUpperCase():""}),O.substr(0,1).toLowerCase()+O.substr(1))},s=function(O){var V=r(O);return V.substr(0,1).toUpperCase()+V.substr(1)},a=function(O,V){return i(O,V).toLowerCase()},l=Object.prototype.toString,h=function(O){return typeof O=="function"},f=function(O){return O===Object(O)},m=function(O){return l.call(O)=="[object Array]"},p=function(O){return l.call(O)=="[object Date]"},g=function(O){return l.call(O)=="[object RegExp]"},E=function(O){return l.call(O)=="[object Boolean]"},T=function(O){return O=O-0,O===O},P=function(O,V){var U=V&&"process"in V?V.process:V;return typeof U!="function"?O:function(q,J){return U(q,O,J)}},x={camelize:r,decamelize:a,pascalize:s,depascalize:a,camelizeKeys:function(O,V){return n(P(r,V),O)},decamelizeKeys:function(O,V){return n(P(a,V),O,V)},pascalizeKeys:function(O,V){return n(P(s,V),O)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};e.exports?e.exports=x:t.humps=x})(Y7)})(rP);var Q7=rP.exports,X7=["class","style"];function J7(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var i=n.indexOf(":"),r=Q7.camelize(n.slice(0,i)),s=n.slice(i+1).trim();return t[r]=s,t},{})}function tV(e){return e.split(/\s+/).reduce(function(t,n){return t[n]=!0,t},{})}function sP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(h){return sP(h)}),r=Object.keys(e.attributes||{}).reduce(function(h,f){var m=e.attributes[f];switch(f){case"class":h.class=tV(m);break;case"style":h.style=J7(m);break;default:h.attrs[f]=m}return h},{attrs:{},class:{},style:{}});n.class;var s=n.style,a=s===void 0?{}:s,l=q7(n,X7);return yp(e.tag,hr(hr(hr({},t),{},{class:r.class,style:hr(hr({},r.style),a)},r.attrs),l),i)}var oP=!1;try{oP=!0}catch{}function eV(){if(!oP&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function G0(e){if(e&&Yu(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Qm.icon)return Qm.icon(e);if(e===null)return null;if(Yu(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}var nV=fp({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(t){return[!0,!1,"horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(Number.parseInt(t,10))>-1}},rotateBy:{type:Boolean,default:!1},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1},widthAuto:{type:Boolean,default:!1}},setup:function(t,n){var i=n.attrs,r=$e(function(){return G0(t.icon)}),s=$e(function(){return Nd("classes",Z7(t))}),a=$e(function(){return Nd("transform",typeof t.transform=="string"?Qm.transform(t.transform):t.transform)}),l=$e(function(){return Nd("mask",G0(t.mask))}),h=$e(function(){var m=hr(hr(hr(hr({},s.value),a.value),l.value),{},{symbol:t.symbol,maskId:t.maskId});return m.title=t.title,m.titleId=t.titleId,j7(r.value,m)});dr(h,function(m){if(!m)return eV("Could not find one or more icon(s)",r.value,l.value)},{immediate:!0});var f=$e(function(){return h.value?sP(h.value.abstract[0],{},i):null});return function(){return f.value}}});/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var iV={prefix:"fas",iconName:"wave-square",icon:[512,512,[],"f83e","M64 96c0-17.7 14.3-32 32-32l160 0c17.7 0 32 14.3 32 32l0 288 96 0 0-128c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0 0 128c0 17.7-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32l0-288-96 0 0 128c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-128z"]},rV={prefix:"fas",iconName:"draw-polygon",icon:[512,512,[58055,"vector-polygon"],"f5ee","M64 0c23.7 0 44.4 12.9 55.4 32l273.1 0c11.1-19.1 31.7-32 55.4-32 35.3 0 64 28.7 64 64 0 34-26.5 61.8-60 63.9l-2.1 2.9-71.5 99.1c3.6 8 5.6 16.9 5.6 26.2s-2 18.2-5.6 26.2l2.2 3.1 69.3 96 2.1 2.9c33.5 2.1 60 29.9 60 63.9 0 35.3-28.7 64-64 64-23.7 0-44.4-12.9-55.4-32l-273.1 0c-11.1 19.1-31.7 32-55.4 32-35.3 0-64-28.7-64-64 0-23.7 12.9-44.4 32-55.4l0-273.1C12.9 108.4 0 87.7 0 64 0 28.7 28.7 0 64 0zM394.2 413.4l-65.5-90.6-2.2-3.1c-2.1 .2-4.3 .3-6.5 .3-35.3 0-64-28.7-64-64s28.7-64 64-64c2.2 0 4.4 .1 6.5 .3l67.7-93.7c-.6-.9-1.1-1.7-1.6-2.6L119.4 96c-5.6 9.7-13.7 17.8-23.4 23.4l0 273.1c9.7 5.6 17.8 13.7 23.4 23.4l273.1 0c.5-.9 1.1-1.8 1.6-2.6z"]},sV={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0z"]},oV={prefix:"fas",iconName:"location-crosshairs",icon:[576,512,["location"],"f601","M288-16c17.7 0 32 14.3 32 32l0 18.3c98.1 14 175.7 91.6 189.7 189.7l18.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-18.3 0c-14 98.1-91.6 175.7-189.7 189.7l0 18.3c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-18.3C157.9 463.7 80.3 386.1 66.3 288L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l18.3 0C80.3 125.9 157.9 48.3 256 34.3L256 16c0-17.7 14.3-32 32-32zM128 256a160 160 0 1 0 320 0 160 160 0 1 0 -320 0zm160-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]};B7.add(oV,rV,iV,sV);$7.watch();nw(i4);const aV=Uw();let dl;qA(aV,e=>{console.log("Auth state changed. New user:",e?e.email:"null"),Kr.value=e,dl||VP(async()=>{const{default:t}=await import("./App-DRvpDTiE.js");return{default:t}},__vite__mapDeps([0,1])).then(({default:t})=>{dl=nI(t),dl.component("font-awesome-icon",nV),dl.use(iT),dl.mount("#app")})});export{zn as F,lV as T,so as _,ke as a,dt as b,$e as c,na as d,qs as e,Jo as f,Kr as g,Uw as h,si as i,ax as j,nc as k,ue as l,on as m,pe as o,Uh as p,dp as r,cV as s,Ce as t,lx as u,_1 as w};
